2025-05-18 00:21:10,762 - __main__ - INFO - Starting bot...
2025-05-18 00:21:10,763 - aiogram.dispatcher - INFO - Start polling
2025-05-18 00:21:11,192 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-18 00:21:14,318 - aiogram.event - INFO - Update id=142690074 is not handled. Duration 0 ms by bot id=7498826228
2025-05-18 00:21:14,319 - aiogram.event - ERROR - Cause exception while process update id=142690074 by bot id=7498826228
AttributeError: 'NoneType' object has no attribute 'find_one'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\handlers\user_handlers.py", line 96, in show_catalog
    sleep_data = await db.get_sleep_mode()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\database\mongodb.py", line 258, in get_sleep_mode
    settings = await self.settings.find_one({"setting": "sleep_mode"})
                     ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'find_one'
2025-05-18 00:21:18,593 - aiogram.event - INFO - Update id=142690075 is not handled. Duration 0 ms by bot id=7498826228
2025-05-18 00:21:18,594 - aiogram.event - ERROR - Cause exception while process update id=142690075 by bot id=7498826228
AttributeError: 'NoneType' object has no attribute 'find_one'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\handlers\user_handlers.py", line 96, in show_catalog
    sleep_data = await db.get_sleep_mode()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\database\mongodb.py", line 258, in get_sleep_mode
    settings = await self.settings.find_one({"setting": "sleep_mode"})
                     ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'find_one'
2025-05-18 00:21:21,214 - aiogram.event - INFO - Update id=142690076 is not handled. Duration 1 ms by bot id=7498826228
2025-05-18 00:21:21,215 - aiogram.event - ERROR - Cause exception while process update id=142690076 by bot id=7498826228
AttributeError: 'NoneType' object has no attribute 'find_one'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\handlers\user_handlers.py", line 434, in show_cart
    sleep_data = await db.get_sleep_mode()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\database\mongodb.py", line 258, in get_sleep_mode
    settings = await self.settings.find_one({"setting": "sleep_mode"})
                     ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'find_one'
2025-05-18 00:21:22,569 - aiogram.event - INFO - Update id=142690077 is handled. Duration 500 ms by bot id=7498826228
2025-05-18 00:22:22,835 - aiogram.event - INFO - Update id=142690078 is not handled. Duration 0 ms by bot id=7498826228
2025-05-18 00:22:22,836 - aiogram.event - ERROR - Cause exception while process update id=142690078 by bot id=7498826228
AttributeError: 'NoneType' object has no attribute 'find_one'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\handlers\user_handlers.py", line 96, in show_catalog
    sleep_data = await db.get_sleep_mode()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\database\mongodb.py", line 258, in get_sleep_mode
    async def delete_order(self, order_id: str):
                         ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'find_one'
2025-05-18 00:22:25,798 - aiogram.event - INFO - Update id=142690079 is not handled. Duration 1 ms by bot id=7498826228
2025-05-18 00:22:25,799 - aiogram.event - ERROR - Cause exception while process update id=142690079 by bot id=7498826228
AttributeError: 'NoneType' object has no attribute 'find_one'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\handlers\user_handlers.py", line 434, in show_cart
    sleep_data = await db.get_sleep_mode()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\database\mongodb.py", line 258, in get_sleep_mode
    async def delete_order(self, order_id: str):
                         ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'find_one'
2025-05-18 00:23:29,720 - aiogram.event - INFO - Update id=142690080 is not handled. Duration 0 ms by bot id=7498826228
2025-05-18 00:23:29,720 - aiogram.event - ERROR - Cause exception while process update id=142690080 by bot id=7498826228
AttributeError: 'NoneType' object has no attribute 'find_one'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\handlers\user_handlers.py", line 96, in show_catalog
    sleep_data = await db.get_sleep_mode()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Bot_vapeshop\database\mongodb.py", line 258, in get_sleep_mode
    return None
    
AttributeError: 'NoneType' object has no attribute 'find_one'
2025-05-18 00:23:34,998 - aiogram.dispatcher - INFO - Polling stopped
2025-05-18 00:23:35,259 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-18 00:23:35,262 - root - INFO - Bot stopped
2025-05-18 00:23:41,508 - __main__ - INFO - Starting bot...
2025-05-18 00:23:41,509 - aiogram.dispatcher - INFO - Start polling
2025-05-18 00:23:41,961 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-18 00:23:46,486 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-18 00:23:49,768 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-18 00:23:49,769 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-18 00:23:49,770 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-18 00:23:50,750 - aiogram.event - INFO - Update id=142690081 is handled. Duration 4263 ms by bot id=7498826228
2025-05-18 00:23:52,442 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-18 00:23:55,186 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-18 00:23:55,187 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-18 00:23:55,188 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-18 00:23:55,365 - aiogram.event - INFO - Update id=142690082 is handled. Duration 2923 ms by bot id=7498826228
2025-05-18 00:23:58,124 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-18 00:23:58,420 - database.mongodb - INFO - [DEBUG] Found 2 products in category ����
2025-05-18 00:23:58,900 - aiogram.event - INFO - Update id=142690083 is handled. Duration 775 ms by bot id=7498826228
2025-05-18 00:24:14,732 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6828db168bf55aef229978b6
2025-05-18 00:24:15,005 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6828db168bf55aef229978b6'), 'name': '��', 'category': '����', 'price': 5555, 'description': '���', 'photo': 'AgACAgIAAxkBAAIHa2go2xZd319MSl2P3O5zkXWZF2ZNAAI58jEbLlZISZKgaU-fgEGNAQADAgADeQADNgQ', 'available': True}
2025-05-18 00:24:15,006 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6828db168bf55aef229978b6
2025-05-18 00:24:15,890 - aiogram.event - INFO - Update id=142690084 is handled. Duration 1160 ms by bot id=7498826228
2025-05-18 00:24:19,555 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-18 00:24:19,556 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6828d4f20001de6237f02932
2025-05-18 00:24:19,847 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6828d4f20001de6237f02932'), 'name': '����', 'category': '����', 'price': 5000, 'description': '������', 'photo': 'AgACAgIAAxkBAAIG1Ggo1PJlH3cCOOcj20bkEnAe-SF2AAIY8jEbLlZISWzkEf8F24fMAQADAgADeQADNgQ', 'available': True, 'flavors': ['������', '�����', '�����']}
2025-05-18 00:24:19,848 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6828d4f20001de6237f02932
2025-05-18 00:24:20,710 - aiogram.event - INFO - Update id=142690085 is handled. Duration 1155 ms by bot id=7498826228
2025-05-18 00:24:30,338 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-18 00:24:30,339 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6828d4f20001de6237f02932
2025-05-18 00:24:30,607 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6828d4f20001de6237f02932'), 'name': '����', 'category': '����', 'price': 5000, 'description': '������', 'photo': 'AgACAgIAAxkBAAIG1Ggo1PJlH3cCOOcj20bkEnAe-SF2AAIY8jEbLlZISWzkEf8F24fMAQADAgADeQADNgQ', 'available': True, 'flavors': ['������', '�����', '�����']}
2025-05-18 00:24:30,608 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6828d4f20001de6237f02932
2025-05-18 00:24:31,412 - aiogram.event - INFO - Update id=142690086 is handled. Duration 1075 ms by bot id=7498826228
2025-05-18 00:24:45,877 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-18 00:24:48,912 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-18 00:24:48,913 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-18 00:24:48,914 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-18 00:24:49,606 - aiogram.event - INFO - Update id=142690087 is handled. Duration 3731 ms by bot id=7498826228
2025-05-18 00:26:26,766 - aiogram.event - INFO - Update id=142690088 is handled. Duration 300 ms by bot id=7498826228
2025-05-18 00:26:30,705 - aiogram.event - INFO - Update id=142690089 is handled. Duration 468 ms by bot id=7498826228
2025-05-18 00:26:39,777 - aiogram.event - INFO - Update id=142690090 is handled. Duration 1454 ms by bot id=7498826228
2025-05-18 00:27:16,175 - aiogram.event - INFO - Update id=142690091 is handled. Duration 1357 ms by bot id=7498826228
2025-05-18 13:52:16,635 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2025-05-18 13:52:16,678 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7498826228)
2025-05-18 13:52:17,756 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2025-05-18 13:52:17,846 - aiogram.dispatcher - WARNING - Sleep for 1.239868 seconds and try again... (tryings = 1, bot id = 7498826228)
2025-05-18 13:52:19,607 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2025-05-18 13:52:19,608 - aiogram.dispatcher - WARNING - Sleep for 1.572303 seconds and try again... (tryings = 2, bot id = 7498826228)
2025-05-18 13:52:21,633 - aiogram.dispatcher - INFO - Connection established (tryings = 3, bot id = 7498826228)
2025-05-18 13:52:22,996 - aiogram.event - INFO - Update id=142690092 is handled. Duration 1355 ms by bot id=7498826228
2025-05-19 12:09:36,491 - __main__ - INFO - Starting bot...
2025-05-19 12:09:36,513 - aiogram.dispatcher - INFO - Start polling
2025-05-19 12:09:36,989 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 12:10:42,835 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 12:10:46,262 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:10:46,263 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:10:46,265 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:10:47,168 - aiogram.event - INFO - Update id=142690824 is handled. Duration 4333 ms by bot id=7498826228
2025-05-19 12:10:49,262 - aiogram.event - INFO - Update id=142690825 is handled. Duration 298 ms by bot id=7498826228
2025-05-19 12:10:52,104 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 12:10:54,987 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:10:54,988 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:10:54,988 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:10:55,167 - aiogram.event - INFO - Update id=142690826 is handled. Duration 3063 ms by bot id=7498826228
2025-05-19 12:10:56,481 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 12:10:56,796 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 12:10:57,141 - aiogram.event - INFO - Update id=142690827 is handled. Duration 662 ms by bot id=7498826228
2025-05-19 12:10:59,954 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 12:10:59,955 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:11:00,248 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd']}
2025-05-19 12:11:00,249 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:11:01,129 - aiogram.event - INFO - Update id=142690828 is handled. Duration 1175 ms by bot id=7498826228
2025-05-19 12:11:11,154 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 12:11:14,142 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:11:14,143 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:11:14,144 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:11:14,764 - aiogram.event - INFO - Update id=142690829 is handled. Duration 3613 ms by bot id=7498826228
2025-05-19 12:11:21,441 - aiogram.event - INFO - Update id=142690830 is handled. Duration 232 ms by bot id=7498826228
2025-05-19 12:11:25,043 - aiogram.event - INFO - Update id=142690831 is handled. Duration 482 ms by bot id=7498826228
2025-05-19 12:11:44,018 - aiogram.event - INFO - Update id=142690832 is handled. Duration 1509 ms by bot id=7498826228
2025-05-19 12:13:40,561 - aiogram.event - INFO - Update id=142690833 is handled. Duration 1423 ms by bot id=7498826228
2025-05-19 12:13:52,428 - aiogram.event - INFO - Update id=142690834 is handled. Duration 160 ms by bot id=7498826228
2025-05-19 12:13:55,703 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 12:13:55,853 - aiogram.event - INFO - Update id=142690835 is handled. Duration 156 ms by bot id=7498826228
2025-05-19 12:14:01,020 - aiogram.event - INFO - Update id=142690836 is handled. Duration 773 ms by bot id=7498826228
2025-05-19 12:14:09,176 - aiogram.event - INFO - Update id=142690837 is handled. Duration 301 ms by bot id=7498826228
2025-05-19 12:14:11,151 - aiogram.event - INFO - Update id=142690838 is handled. Duration 632 ms by bot id=7498826228
2025-05-19 12:14:13,268 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:14:13,575 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd']}
2025-05-19 12:14:13,576 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:14:13,858 - aiogram.event - INFO - Update id=142690839 is handled. Duration 599 ms by bot id=7498826228
2025-05-19 12:14:15,135 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:14:15,431 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd']}
2025-05-19 12:14:15,432 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:14:15,742 - aiogram.event - INFO - Update id=142690840 is handled. Duration 617 ms by bot id=7498826228
2025-05-19 12:14:31,303 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:14:31,599 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd']}
2025-05-19 12:14:31,601 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:14:32,077 - aiogram.event - INFO - Update id=142690841 is handled. Duration 846 ms by bot id=7498826228
2025-05-19 12:15:52,989 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 12:15:56,138 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:15:56,139 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:15:56,140 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:15:56,309 - aiogram.event - INFO - Update id=142690842 is handled. Duration 3320 ms by bot id=7498826228
2025-05-19 12:15:57,635 - database.mongodb - INFO - [DEBUG] Getting products for category: ��������
2025-05-19 12:15:57,935 - database.mongodb - INFO - [DEBUG] Found 0 products in category ��������
2025-05-19 12:15:58,255 - aiogram.event - INFO - Update id=142690843 is handled. Duration 620 ms by bot id=7498826228
2025-05-19 12:15:59,556 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 12:15:59,848 - database.mongodb - INFO - [DEBUG] Found 0 products in category ����
2025-05-19 12:16:00,003 - aiogram.event - INFO - Update id=142690844 is handled. Duration 447 ms by bot id=7498826228
2025-05-19 12:16:01,533 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 12:16:01,830 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 12:16:02,236 - aiogram.event - INFO - Update id=142690845 is handled. Duration 703 ms by bot id=7498826228
2025-05-19 12:16:03,898 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 12:16:03,898 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:16:04,188 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 12:16:04,189 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:16:05,289 - aiogram.event - INFO - Update id=142690846 is handled. Duration 1392 ms by bot id=7498826228
2025-05-19 12:16:07,338 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 12:16:10,033 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:16:10,034 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:16:10,034 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:16:10,607 - aiogram.event - INFO - Update id=142690847 is handled. Duration 3271 ms by bot id=7498826228
2025-05-19 12:16:34,515 - aiogram.event - INFO - Update id=142690848 is handled. Duration 150 ms by bot id=7498826228
2025-05-19 12:16:38,971 - aiogram.event - INFO - Update id=142690849 is handled. Duration 426 ms by bot id=7498826228
2025-05-19 12:20:54,287 - aiogram.event - INFO - Update id=142690850 is handled. Duration 684 ms by bot id=7498826228
2025-05-19 12:21:04,612 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 12:21:04,876 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 12:21:04,880 - root - INFO - Bot stopped
2025-05-19 12:21:10,914 - __main__ - INFO - Starting bot...
2025-05-19 12:21:10,916 - aiogram.dispatcher - INFO - Start polling
2025-05-19 12:21:11,348 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 12:21:23,430 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 12:21:26,775 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:21:26,775 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:21:26,776 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:21:27,681 - aiogram.event - INFO - Update id=142690851 is handled. Duration 4252 ms by bot id=7498826228
2025-05-19 12:21:33,397 - aiogram.event - INFO - Update id=142690852 is handled. Duration 168 ms by bot id=7498826228
2025-05-19 12:21:37,279 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 12:21:37,465 - aiogram.event - INFO - Update id=142690853 is handled. Duration 190 ms by bot id=7498826228
2025-05-19 12:21:47,936 - aiogram.event - INFO - Update id=142690854 is handled. Duration 826 ms by bot id=7498826228
2025-05-19 12:21:58,794 - aiogram.event - INFO - Update id=142690855 is handled. Duration 170 ms by bot id=7498826228
2025-05-19 12:22:01,209 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 12:22:03,912 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:22:03,913 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:22:03,914 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:22:04,069 - aiogram.event - INFO - Update id=142690856 is handled. Duration 2860 ms by bot id=7498826228
2025-05-19 12:22:05,127 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 12:22:05,391 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 12:22:05,697 - aiogram.event - INFO - Update id=142690857 is handled. Duration 570 ms by bot id=7498826228
2025-05-19 12:22:06,930 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 12:22:06,931 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:22:07,199 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 12:22:07,200 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 12:22:08,042 - aiogram.event - INFO - Update id=142690858 is handled. Duration 1112 ms by bot id=7498826228
2025-05-19 12:22:23,415 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 12:22:26,636 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:22:26,638 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:22:26,638 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 12:22:27,377 - aiogram.event - INFO - Update id=142690859 is handled. Duration 3964 ms by bot id=7498826228
2025-05-19 12:22:35,398 - aiogram.event - INFO - Update id=142690860 is handled. Duration 168 ms by bot id=7498826228
2025-05-19 12:22:38,460 - aiogram.event - INFO - Update id=142690861 is handled. Duration 442 ms by bot id=7498826228
2025-05-19 12:22:49,835 - aiogram.event - INFO - Update id=142690862 is handled. Duration 1362 ms by bot id=7498826228
2025-05-19 12:24:31,369 - aiogram.event - INFO - Update id=142690863 is handled. Duration 158 ms by bot id=7498826228
2025-05-19 12:24:36,142 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 12:24:36,320 - aiogram.event - INFO - Update id=142690864 is handled. Duration 182 ms by bot id=7498826228
2025-05-19 13:02:49,998 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 13:02:50,253 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 13:02:50,255 - root - INFO - Bot stopped
2025-05-19 13:02:57,076 - __main__ - INFO - Starting bot...
2025-05-19 13:02:57,077 - aiogram.dispatcher - INFO - Start polling
2025-05-19 13:02:57,505 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 13:03:12,132 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 13:03:15,235 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:03:15,235 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:03:15,236 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:03:16,191 - aiogram.event - INFO - Update id=142690865 is handled. Duration 4060 ms by bot id=7498826228
2025-05-19 13:03:18,906 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 13:03:21,891 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:03:21,892 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:03:21,893 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:03:22,061 - aiogram.event - INFO - Update id=142690866 is handled. Duration 3155 ms by bot id=7498826228
2025-05-19 13:03:31,919 - aiogram.event - INFO - Update id=142690867 is handled. Duration 172 ms by bot id=7498826228
2025-05-19 13:03:35,903 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 13:03:36,134 - aiogram.event - INFO - Update id=142690868 is handled. Duration 238 ms by bot id=7498826228
2025-05-19 13:03:39,296 - aiogram.event - INFO - Update id=142690869 is handled. Duration 254 ms by bot id=7498826228
2025-05-19 13:03:41,193 - aiogram.event - INFO - Update id=142690870 is handled. Duration 600 ms by bot id=7498826228
2025-05-19 13:03:42,370 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:03:42,677 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 13:03:42,679 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:03:42,834 - aiogram.event - INFO - Update id=142690871 is handled. Duration 474 ms by bot id=7498826228
2025-05-19 13:03:46,702 - aiogram.event - INFO - Update id=142690872 is handled. Duration 508 ms by bot id=7498826228
2025-05-19 13:03:49,853 - aiogram.event - INFO - Update id=142690873 is handled. Duration 582 ms by bot id=7498826228
2025-05-19 13:03:50,547 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:03:50,846 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 13:03:50,848 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:03:51,179 - aiogram.event - INFO - Update id=142690874 is handled. Duration 638 ms by bot id=7498826228
2025-05-19 13:03:51,957 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:03:52,257 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 13:03:52,259 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:03:52,395 - aiogram.event - INFO - Update id=142690875 is handled. Duration 446 ms by bot id=7498826228
2025-05-19 13:03:57,033 - aiogram.event - INFO - Update id=142690876 is handled. Duration 327 ms by bot id=7498826228
2025-05-19 13:03:58,573 - aiogram.event - INFO - Update id=142690877 is handled. Duration 318 ms by bot id=7498826228
2025-05-19 13:04:02,421 - aiogram.event - INFO - Update id=142690878 is handled. Duration 406 ms by bot id=7498826228
2025-05-19 13:04:09,386 - aiogram.event - INFO - Update id=142690879 is handled. Duration 167 ms by bot id=7498826228
2025-05-19 13:04:13,801 - aiogram.event - INFO - Update id=142690880 is handled. Duration 195 ms by bot id=7498826228
2025-05-19 13:04:21,361 - aiogram.event - INFO - Update id=142690881 is handled. Duration 175 ms by bot id=7498826228
2025-05-19 13:04:33,382 - aiogram.event - INFO - Update id=142690882 is handled. Duration 465 ms by bot id=7498826228
2025-05-19 13:04:40,389 - aiogram.event - INFO - Update id=142690883 is handled. Duration 691 ms by bot id=7498826228
2025-05-19 13:04:43,257 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:04:43,552 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 13:04:43,553 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:04:43,835 - aiogram.event - INFO - Update id=142690884 is handled. Duration 586 ms by bot id=7498826228
2025-05-19 13:04:46,424 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:04:46,723 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 13:04:46,723 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:04:46,926 - aiogram.event - INFO - Update id=142690885 is handled. Duration 511 ms by bot id=7498826228
2025-05-19 13:08:53,125 - aiogram.event - INFO - Update id=142690886 is handled. Duration 185 ms by bot id=7498826228
2025-05-19 13:09:00,338 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:09:00,629 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 13:09:00,631 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:09:00,956 - aiogram.event - INFO - Update id=142690887 is handled. Duration 624 ms by bot id=7498826228
2025-05-19 13:09:04,206 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:09:04,505 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 13:09:04,506 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:09:05,047 - aiogram.event - INFO - Update id=142690888 is handled. Duration 848 ms by bot id=7498826228
2025-05-19 13:09:06,388 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:09:06,682 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 13:09:06,683 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:09:06,834 - aiogram.event - INFO - Update id=142690889 is handled. Duration 457 ms by bot id=7498826228
2025-05-19 13:09:14,345 - aiogram.event - INFO - Update id=142690890 is not handled. Duration 14 ms by bot id=7498826228
2025-05-19 13:09:16,618 - aiogram.event - INFO - Update id=142690891 is handled. Duration 154 ms by bot id=7498826228
2025-05-19 13:09:20,525 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:09:20,828 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 13:09:20,829 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:09:21,193 - aiogram.event - INFO - Update id=142690892 is handled. Duration 674 ms by bot id=7498826228
2025-05-19 13:09:28,755 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 13:09:29,008 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 13:09:29,011 - root - INFO - Bot stopped
2025-05-19 13:09:35,471 - __main__ - INFO - Starting bot...
2025-05-19 13:09:35,473 - aiogram.dispatcher - INFO - Start polling
2025-05-19 13:09:35,912 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 13:09:41,983 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 13:09:45,211 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:09:45,212 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:09:45,213 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:09:46,093 - aiogram.event - INFO - Update id=142690893 is handled. Duration 4111 ms by bot id=7498826228
2025-05-19 13:10:13,073 - aiogram.event - INFO - Update id=142690894 is handled. Duration 248 ms by bot id=7498826228
2025-05-19 13:10:15,046 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 13:10:15,276 - aiogram.event - INFO - Update id=142690895 is handled. Duration 232 ms by bot id=7498826228
2025-05-19 13:10:19,426 - aiogram.event - INFO - Update id=142690896 is handled. Duration 198 ms by bot id=7498826228
2025-05-19 13:10:21,547 - aiogram.event - INFO - Update id=142690897 is handled. Duration 596 ms by bot id=7498826228
2025-05-19 13:10:23,360 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:10:23,643 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 13:10:23,645 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:10:23,883 - aiogram.event - INFO - Update id=142690898 is handled. Duration 531 ms by bot id=7498826228
2025-05-19 13:10:29,791 - aiogram.event - INFO - Update id=142690899 is handled. Duration 320 ms by bot id=7498826228
2025-05-19 13:10:32,724 - aiogram.event - INFO - Update id=142690900 is handled. Duration 802 ms by bot id=7498826228
2025-05-19 13:10:33,693 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:10:33,966 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 13:10:33,967 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:10:34,316 - aiogram.event - INFO - Update id=142690901 is handled. Duration 629 ms by bot id=7498826228
2025-05-19 13:10:35,514 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:10:35,785 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 13:10:35,786 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:10:35,932 - aiogram.event - INFO - Update id=142690902 is handled. Duration 424 ms by bot id=7498826228
2025-05-19 13:10:39,266 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:10:39,539 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 13:10:39,540 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:10:39,716 - aiogram.event - INFO - Update id=142690903 is handled. Duration 459 ms by bot id=7498826228
2025-05-19 13:18:15,012 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 13:18:15,279 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 13:18:15,281 - root - INFO - Bot stopped
2025-05-19 13:18:23,295 - __main__ - INFO - Starting bot...
2025-05-19 13:18:23,296 - aiogram.dispatcher - INFO - Start polling
2025-05-19 13:18:23,843 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 13:18:28,943 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 13:18:32,333 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:18:32,334 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:18:32,335 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:18:33,230 - aiogram.event - INFO - Update id=142690904 is handled. Duration 4288 ms by bot id=7498826228
2025-05-19 13:18:41,937 - aiogram.event - INFO - Update id=142690905 is handled. Duration 218 ms by bot id=7498826228
2025-05-19 13:18:44,474 - handlers.admin_handlers - WARNING - Failed admin login attempt from user 1088067370
2025-05-19 13:18:44,475 - aiogram.event - INFO - Update id=142690906 is not handled. Duration 5 ms by bot id=7498826228
2025-05-19 13:18:44,476 - aiogram.event - ERROR - Cause exception while process update id=142690906 by bot id=7498826228
AttributeError: 'SecurityManager' object has no attribute 'failed_attempts'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 125, in check_admin_password
    attempts_left = security_manager.max_attempts - security_manager.failed_attempts.get(user_id, 0)
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'SecurityManager' object has no attribute 'failed_attempts'. Did you mean: 'add_failed_attempt'?
2025-05-19 13:18:47,373 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 13:18:47,556 - aiogram.event - INFO - Update id=142690907 is handled. Duration 191 ms by bot id=7498826228
2025-05-19 13:18:54,233 - aiogram.event - INFO - Update id=142690908 is handled. Duration 188 ms by bot id=7498826228
2025-05-19 13:18:56,918 - aiogram.event - INFO - Update id=142690909 is handled. Duration 593 ms by bot id=7498826228
2025-05-19 13:18:57,814 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:18:58,101 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 13:18:58,102 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 13:18:58,240 - aiogram.event - INFO - Update id=142690910 is handled. Duration 434 ms by bot id=7498826228
2025-05-19 13:19:01,481 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:19:01,774 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 13:19:01,775 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:19:02,092 - aiogram.event - INFO - Update id=142690911 is handled. Duration 619 ms by bot id=7498826228
2025-05-19 13:19:04,319 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:19:04,609 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 13:19:04,610 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:19:04,927 - aiogram.event - INFO - Update id=142690912 is handled. Duration 617 ms by bot id=7498826228
2025-05-19 13:19:15,006 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:19:15,295 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 13:19:15,296 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:19:15,811 - aiogram.event - INFO - Update id=142690913 is handled. Duration 813 ms by bot id=7498826228
2025-05-19 13:19:22,548 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:19:22,838 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 0}]}
2025-05-19 13:19:22,839 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:19:23,200 - aiogram.event - INFO - Update id=142690914 is handled. Duration 661 ms by bot id=7498826228
2025-05-19 13:19:27,496 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:19:27,785 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 0}]}
2025-05-19 13:19:27,786 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:19:28,243 - aiogram.event - INFO - Update id=142690915 is handled. Duration 758 ms by bot id=7498826228
2025-05-19 13:19:34,458 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:19:34,755 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 0}, {'name': '�����', 'quantity': 0}]}
2025-05-19 13:19:34,756 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:19:35,048 - aiogram.event - INFO - Update id=142690916 is handled. Duration 598 ms by bot id=7498826228
2025-05-19 13:19:51,646 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:19:51,935 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 0}, {'name': '�����', 'quantity': 0}]}
2025-05-19 13:19:51,936 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:19:52,452 - aiogram.event - INFO - Update id=142690917 is handled. Duration 815 ms by bot id=7498826228
2025-05-19 13:19:55,058 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:19:55,355 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 50}, {'name': '�����', 'quantity': 0}]}
2025-05-19 13:19:55,357 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:19:55,638 - aiogram.event - INFO - Update id=142690918 is handled. Duration 589 ms by bot id=7498826228
2025-05-19 13:19:58,030 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:19:58,319 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 50}, {'name': '�����', 'quantity': 0}]}
2025-05-19 13:19:58,321 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:19:58,856 - aiogram.event - INFO - Update id=142690919 is handled. Duration 856 ms by bot id=7498826228
2025-05-19 13:22:20,043 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:22:20,333 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 0}]}
2025-05-19 13:22:20,334 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:22:20,720 - aiogram.event - INFO - Update id=142690920 is handled. Duration 686 ms by bot id=7498826228
2025-05-19 13:23:34,374 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:23:34,666 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 0}]}
2025-05-19 13:23:34,667 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:23:35,218 - aiogram.event - INFO - Update id=142690921 is handled. Duration 856 ms by bot id=7498826228
2025-05-19 13:24:09,057 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:24:09,344 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 35}]}
2025-05-19 13:24:09,346 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:24:09,651 - aiogram.event - INFO - Update id=142690922 is handled. Duration 604 ms by bot id=7498826228
2025-05-19 13:24:15,516 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:24:15,805 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 35}]}
2025-05-19 13:24:15,806 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:24:16,291 - aiogram.event - INFO - Update id=142690923 is handled. Duration 790 ms by bot id=7498826228
2025-05-19 13:25:05,366 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:25:05,667 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 10}]}
2025-05-19 13:25:05,668 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:25:06,068 - aiogram.event - INFO - Update id=142690924 is handled. Duration 711 ms by bot id=7498826228
2025-05-19 13:25:08,119 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:25:08,417 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 10}]}
2025-05-19 13:25:08,418 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:25:08,904 - aiogram.event - INFO - Update id=142690925 is handled. Duration 797 ms by bot id=7498826228
2025-05-19 13:25:22,894 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 13:25:23,173 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 1}]}
2025-05-19 13:25:23,174 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 13:25:23,486 - aiogram.event - INFO - Update id=142690926 is handled. Duration 600 ms by bot id=7498826228
2025-05-19 13:25:35,592 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 13:25:38,775 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:25:38,776 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:25:38,777 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:25:38,943 - aiogram.event - INFO - Update id=142690927 is handled. Duration 3352 ms by bot id=7498826228
2025-05-19 13:25:40,412 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 13:25:40,702 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 13:25:41,152 - aiogram.event - INFO - Update id=142690928 is handled. Duration 740 ms by bot id=7498826228
2025-05-19 13:50:28,813 - aiogram.event - INFO - Update id=142690929 is handled. Duration 576 ms by bot id=7498826228
2025-05-19 13:50:31,632 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 13:50:34,948 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:50:34,949 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:50:34,950 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:50:35,112 - aiogram.event - INFO - Update id=142690930 is handled. Duration 3481 ms by bot id=7498826228
2025-05-19 13:50:37,011 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 13:50:37,308 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 13:50:37,797 - aiogram.event - INFO - Update id=142690931 is handled. Duration 787 ms by bot id=7498826228
2025-05-19 13:59:18,245 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 13:59:18,499 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 13:59:18,501 - root - INFO - Bot stopped
2025-05-19 13:59:25,717 - __main__ - INFO - Starting bot...
2025-05-19 13:59:25,719 - aiogram.dispatcher - INFO - Start polling
2025-05-19 13:59:26,154 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 13:59:26,311 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 13:59:26,311 - database.mongodb - ERROR - [ERROR] Error getting products for category ����: 'NoneType' object has no attribute 'products'
2025-05-19 13:59:26,756 - aiogram.event - INFO - Update id=142690932 is handled. Duration 445 ms by bot id=7498826228
2025-05-19 13:59:29,354 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 13:59:29,354 - database.mongodb - ERROR - [ERROR] Error getting products for category ����������� ����������: 'NoneType' object has no attribute 'products'
2025-05-19 13:59:29,599 - aiogram.event - INFO - Update id=142690933 is handled. Duration 245 ms by bot id=7498826228
2025-05-19 13:59:47,030 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 13:59:50,172 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:59:50,173 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:59:50,173 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:59:50,770 - aiogram.event - INFO - Update id=142690934 is handled. Duration 3739 ms by bot id=7498826228
2025-05-19 13:59:52,252 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 13:59:54,970 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:59:54,971 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:59:54,972 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 13:59:55,143 - aiogram.event - INFO - Update id=142690935 is handled. Duration 2891 ms by bot id=7498826228
2025-05-19 13:59:57,371 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 13:59:57,635 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 13:59:58,294 - aiogram.event - INFO - Update id=142690936 is handled. Duration 923 ms by bot id=7498826228
2025-05-19 14:00:03,424 - aiogram.event - INFO - Update id=142690937 is handled. Duration 478 ms by bot id=7498826228
2025-05-19 14:00:04,643 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 14:00:04,907 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 14:00:05,264 - aiogram.event - INFO - Update id=142690938 is handled. Duration 622 ms by bot id=7498826228
2025-05-19 14:00:07,312 - aiogram.event - INFO - Update id=142690939 is not handled. Duration 10 ms by bot id=7498826228
2025-05-19 14:00:25,567 - aiogram.event - INFO - Update id=142690940 is handled. Duration 185 ms by bot id=7498826228
2025-05-19 14:00:34,459 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 14:00:34,629 - aiogram.event - INFO - Update id=142690941 is handled. Duration 173 ms by bot id=7498826228
2025-05-19 14:01:03,289 - aiogram.event - INFO - Update id=142690942 is handled. Duration 178 ms by bot id=7498826228
2025-05-19 14:01:06,286 - aiogram.event - INFO - Update id=142690943 is handled. Duration 614 ms by bot id=7498826228
2025-05-19 14:01:08,536 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 14:01:08,805 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 14:01:08,806 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 14:01:08,947 - aiogram.event - INFO - Update id=142690944 is handled. Duration 419 ms by bot id=7498826228
2025-05-19 14:01:12,283 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 14:01:12,543 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 1}]}
2025-05-19 14:01:12,544 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 14:01:12,877 - aiogram.event - INFO - Update id=142690945 is handled. Duration 604 ms by bot id=7498826228
2025-05-19 14:01:18,405 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 14:01:18,667 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 1}]}
2025-05-19 14:01:18,669 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 14:01:19,009 - aiogram.event - INFO - Update id=142690946 is handled. Duration 611 ms by bot id=7498826228
2025-05-19 14:01:20,938 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 14:01:21,207 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 1}]}
2025-05-19 14:01:21,209 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 14:01:21,565 - aiogram.event - INFO - Update id=142690947 is handled. Duration 635 ms by bot id=7498826228
2025-05-19 14:01:23,249 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 14:01:23,529 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 1}]}
2025-05-19 14:01:23,530 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 14:01:23,872 - aiogram.event - INFO - Update id=142690948 is handled. Duration 630 ms by bot id=7498826228
2025-05-19 14:01:26,907 - aiogram.event - INFO - Update id=142690949 is handled. Duration 305 ms by bot id=7498826228
2025-05-19 14:01:29,316 - aiogram.event - INFO - Update id=142690950 is handled. Duration 624 ms by bot id=7498826228
2025-05-19 14:01:30,324 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 6829e44c0f02ee7e5e9c4003
2025-05-19 14:01:30,596 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('6829e44c0f02ee7e5e9c4003'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '5000 ���', 'photo': 'AgACAgIAAxkBAAIJBmgp5EwyGq7fyKoVYhbwCMiN43rRAAIg9zEb3RBRSeXZ-s3kz_p5AQADAgADbQADNgQ', 'available': True, 'flavors_data': {}, 'flavors': ['����', 'pfkege', 'cdcd', 'd', '���� �������']}
2025-05-19 14:01:30,597 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 6829e44c0f02ee7e5e9c4003
2025-05-19 14:01:31,254 - aiogram.event - INFO - Update id=142690951 is handled. Duration 937 ms by bot id=7498826228
2025-05-19 14:01:38,350 - aiogram.event - INFO - Update id=142690952 is handled. Duration 319 ms by bot id=7498826228
2025-05-19 14:01:39,886 - aiogram.event - INFO - Update id=142690953 is handled. Duration 671 ms by bot id=7498826228
2025-05-19 14:01:41,503 - aiogram.event - INFO - Update id=142690954 is handled. Duration 562 ms by bot id=7498826228
2025-05-19 14:01:43,558 - aiogram.event - INFO - Update id=142690955 is handled. Duration 657 ms by bot id=7498826228
2025-05-19 14:01:44,917 - aiogram.event - INFO - Update id=142690956 is handled. Duration 332 ms by bot id=7498826228
2025-05-19 14:03:44,683 - aiogram.event - INFO - Update id=142690957 is handled. Duration 762 ms by bot id=7498826228
2025-05-19 14:03:46,812 - aiogram.event - INFO - Update id=142690958 is handled. Duration 345 ms by bot id=7498826228
2025-05-19 14:04:03,908 - aiogram.event - INFO - Update id=142690959 is handled. Duration 321 ms by bot id=7498826228
2025-05-19 14:04:06,346 - aiogram.event - INFO - Update id=142690960 is handled. Duration 348 ms by bot id=7498826228
2025-05-19 14:04:12,371 - aiogram.event - INFO - Update id=142690961 is handled. Duration 163 ms by bot id=7498826228
2025-05-19 14:04:14,907 - aiogram.event - INFO - Update id=142690962 is handled. Duration 186 ms by bot id=7498826228
2025-05-19 14:04:18,143 - aiogram.event - INFO - Update id=142690963 is handled. Duration 197 ms by bot id=7498826228
2025-05-19 14:04:32,909 - aiogram.event - INFO - Update id=142690964 is handled. Duration 464 ms by bot id=7498826228
2025-05-19 14:04:36,720 - aiogram.event - INFO - Update id=142690965 is handled. Duration 609 ms by bot id=7498826228
2025-05-19 14:04:38,788 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:04:39,044 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 14:04:39,045 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:04:39,361 - aiogram.event - INFO - Update id=142690966 is handled. Duration 580 ms by bot id=7498826228
2025-05-19 14:04:40,238 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:04:40,485 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 14:04:40,486 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:04:40,858 - aiogram.event - INFO - Update id=142690967 is handled. Duration 629 ms by bot id=7498826228
2025-05-19 14:04:48,316 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:04:48,583 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True}
2025-05-19 14:04:48,585 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:04:48,999 - aiogram.event - INFO - Update id=142690968 is handled. Duration 690 ms by bot id=7498826228
2025-05-19 14:04:53,261 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:04:53,523 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 0}]}
2025-05-19 14:04:53,523 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:04:53,930 - aiogram.event - INFO - Update id=142690969 is handled. Duration 679 ms by bot id=7498826228
2025-05-19 14:04:59,234 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:04:59,502 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 0}]}
2025-05-19 14:04:59,503 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:05:00,050 - aiogram.event - INFO - Update id=142690970 is handled. Duration 824 ms by bot id=7498826228
2025-05-19 14:05:02,613 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:05:02,873 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 25}]}
2025-05-19 14:05:02,874 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:05:03,171 - aiogram.event - INFO - Update id=142690971 is handled. Duration 564 ms by bot id=7498826228
2025-05-19 14:05:12,875 - aiogram.event - INFO - Update id=142690972 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 14:05:20,414 - aiogram.event - INFO - Update id=142690973 is handled. Duration 424 ms by bot id=7498826228
2025-05-19 14:05:23,936 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:05:27,041 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:05:27,042 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:05:27,042 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:05:27,213 - aiogram.event - INFO - Update id=142690974 is handled. Duration 3278 ms by bot id=7498826228
2025-05-19 14:05:28,514 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 14:05:28,779 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 14:05:29,107 - aiogram.event - INFO - Update id=142690975 is handled. Duration 593 ms by bot id=7498826228
2025-05-19 14:13:43,012 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 14:13:43,272 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 14:13:43,274 - root - INFO - Bot stopped
2025-05-19 14:13:50,839 - __main__ - INFO - Starting bot...
2025-05-19 14:13:50,841 - aiogram.dispatcher - INFO - Start polling
2025-05-19 14:13:51,303 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 14:14:07,891 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:14:11,251 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:14:11,252 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:14:11,253 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:14:11,711 - aiogram.event - INFO - Update id=142690976 is handled. Duration 3821 ms by bot id=7498826228
2025-05-19 14:14:15,921 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 14:14:16,210 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 14:14:16,552 - aiogram.event - INFO - Update id=142690977 is handled. Duration 632 ms by bot id=7498826228
2025-05-19 14:14:21,257 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 14:14:21,257 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:14:21,549 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 25}]}
2025-05-19 14:14:21,550 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:14:22,504 - aiogram.event - INFO - Update id=142690978 is handled. Duration 1248 ms by bot id=7498826228
2025-05-19 14:46:26,463 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:46:29,635 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:46:29,635 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:46:29,636 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:46:30,535 - aiogram.event - INFO - Update id=142690979 is handled. Duration 4072 ms by bot id=7498826228
2025-05-19 14:46:32,721 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:46:35,625 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:46:35,626 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:46:35,626 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:46:36,110 - aiogram.event - INFO - Update id=142690980 is handled. Duration 3390 ms by bot id=7498826228
2025-05-19 14:46:41,613 - aiogram.event - INFO - Update id=142690981 is handled. Duration 2540 ms by bot id=7498826228
2025-05-19 14:46:43,513 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:46:46,391 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:46:46,391 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:46:46,392 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:46:46,582 - aiogram.event - INFO - Update id=142690982 is handled. Duration 3069 ms by bot id=7498826228
2025-05-19 14:46:48,459 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 14:46:48,757 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 14:46:49,120 - aiogram.event - INFO - Update id=142690983 is handled. Duration 662 ms by bot id=7498826228
2025-05-19 14:46:50,080 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 14:46:50,081 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:46:50,378 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 25}]}
2025-05-19 14:46:50,379 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:46:51,402 - aiogram.event - INFO - Update id=142690984 is handled. Duration 1323 ms by bot id=7498826228
2025-05-19 14:47:03,287 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 14:47:03,552 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 14:47:03,554 - root - INFO - Bot stopped
2025-05-19 14:47:09,514 - __main__ - INFO - Starting bot...
2025-05-19 14:47:09,516 - aiogram.dispatcher - INFO - Start polling
2025-05-19 14:47:09,951 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 14:47:38,192 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:47:41,519 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:47:41,520 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:47:41,521 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:47:42,435 - aiogram.event - INFO - Update id=142690985 is handled. Duration 4243 ms by bot id=7498826228
2025-05-19 14:47:45,200 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:47:48,063 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:47:48,064 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:47:48,065 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:47:48,267 - aiogram.event - INFO - Update id=142690986 is handled. Duration 3067 ms by bot id=7498826228
2025-05-19 14:47:49,654 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 14:47:49,915 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 14:47:50,234 - aiogram.event - INFO - Update id=142690987 is handled. Duration 580 ms by bot id=7498826228
2025-05-19 14:47:51,605 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 14:47:51,606 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:47:51,871 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 25}]}
2025-05-19 14:47:51,872 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:47:52,797 - aiogram.event - INFO - Update id=142690988 is handled. Duration 1193 ms by bot id=7498826228
2025-05-19 14:47:56,534 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:47:56,792 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 25}]}
2025-05-19 14:47:56,793 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:47:57,499 - aiogram.event - INFO - Update id=142690989 is handled. Duration 1231 ms by bot id=7498826228
2025-05-19 14:47:59,714 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:48:02,536 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:48:02,537 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:48:02,537 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:48:02,703 - aiogram.event - INFO - Update id=142690990 is handled. Duration 2989 ms by bot id=7498826228
2025-05-19 14:48:04,606 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 14:48:04,875 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 14:48:05,214 - aiogram.event - INFO - Update id=142690991 is handled. Duration 609 ms by bot id=7498826228
2025-05-19 14:48:14,486 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 14:48:14,486 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 14:48:14,768 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 1}]}
2025-05-19 14:48:14,770 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 14:48:15,871 - aiogram.event - INFO - Update id=142690992 is handled. Duration 1386 ms by bot id=7498826228
2025-05-19 14:48:21,780 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 14:48:22,049 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 1}]}
2025-05-19 14:48:22,051 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 14:48:22,274 - aiogram.event - INFO - Update id=142690993 is handled. Duration 781 ms by bot id=7498826228
2025-05-19 14:48:27,044 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:48:29,912 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:48:29,913 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:48:29,913 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:48:30,092 - aiogram.event - INFO - Update id=142690994 is handled. Duration 3050 ms by bot id=7498826228
2025-05-19 14:48:31,493 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 14:48:31,780 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 14:48:32,124 - aiogram.event - INFO - Update id=142690995 is handled. Duration 631 ms by bot id=7498826228
2025-05-19 14:48:38,656 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:48:41,809 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:48:41,809 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:48:41,810 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:48:42,084 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:48:42,363 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 25}]}
2025-05-19 14:48:42,364 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:48:42,365 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 14:48:42,640 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 1}]}
2025-05-19 14:48:42,641 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 14:48:42,970 - aiogram.event - INFO - Update id=142690996 is handled. Duration 4317 ms by bot id=7498826228
2025-05-19 14:48:52,964 - aiogram.event - INFO - Update id=142690997 is handled. Duration 198 ms by bot id=7498826228
2025-05-19 14:49:00,961 - aiogram.event - INFO - Update id=142690998 is handled. Duration 569 ms by bot id=7498826228
2025-05-19 14:49:14,444 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 14:49:14,733 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 25}]}
2025-05-19 14:49:14,735 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 14:49:15,015 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 14:49:15,301 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 1}]}
2025-05-19 14:49:15,303 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 14:49:16,379 - aiogram.event - INFO - Update id=142690999 is handled. Duration 2507 ms by bot id=7498826228
2025-05-19 14:49:20,941 - aiogram.event - INFO - Update id=142691000 is handled. Duration 1263 ms by bot id=7498826228
2025-05-19 14:49:25,457 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:49:28,300 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:49:28,301 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:49:28,302 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:49:28,460 - aiogram.event - INFO - Update id=142691001 is handled. Duration 3003 ms by bot id=7498826228
2025-05-19 14:49:30,685 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 14:49:30,958 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 14:49:31,289 - aiogram.event - INFO - Update id=142691002 is handled. Duration 605 ms by bot id=7498826228
2025-05-19 14:49:48,226 - aiogram.event - INFO - Update id=142691003 is not handled. Duration 15 ms by bot id=7498826228
2025-05-19 14:49:57,720 - aiogram.event - INFO - Update id=142691004 is handled. Duration 166 ms by bot id=7498826228
2025-05-19 14:50:00,935 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 14:50:01,100 - aiogram.event - INFO - Update id=142691005 is handled. Duration 172 ms by bot id=7498826228
2025-05-19 14:50:16,022 - aiogram.event - INFO - Update id=142691006 is handled. Duration 204 ms by bot id=7498826228
2025-05-19 14:50:19,876 - aiogram.event - INFO - Update id=142691007 is handled. Duration 1334 ms by bot id=7498826228
2025-05-19 14:55:05,376 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 14:55:05,636 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 14:55:05,638 - root - INFO - Bot stopped
2025-05-19 14:55:12,899 - __main__ - INFO - Starting bot...
2025-05-19 14:55:12,901 - aiogram.dispatcher - INFO - Start polling
2025-05-19 14:55:13,474 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 14:55:18,608 - handlers.admin_handlers - WARNING - Admin access denied for user 1088067370
2025-05-19 14:55:19,050 - aiogram.event - INFO - Update id=142691008 is handled. Duration 455 ms by bot id=7498826228
2025-05-19 14:55:29,121 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 14:55:32,366 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:55:32,367 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:55:32,368 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 14:55:32,963 - aiogram.event - INFO - Update id=142691009 is handled. Duration 3843 ms by bot id=7498826228
2025-05-19 14:55:45,653 - aiogram.event - INFO - Update id=142691010 is handled. Duration 201 ms by bot id=7498826228
2025-05-19 14:55:50,162 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 14:55:50,342 - aiogram.event - INFO - Update id=142691011 is handled. Duration 184 ms by bot id=7498826228
2025-05-19 14:55:54,408 - aiogram.event - INFO - Update id=142691012 is handled. Duration 1063 ms by bot id=7498826228
2025-05-19 14:59:21,732 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 14:59:21,992 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 14:59:22,015 - root - INFO - Bot stopped
2025-05-19 15:00:22,682 - __main__ - INFO - Starting bot...
2025-05-19 15:00:22,683 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:00:23,268 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:00:23,425 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:00:23,437 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:00:26,794 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:00:26,795 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:00:26,796 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:00:26,894 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:00:26,895 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:00:26,895 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:00:27,595 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:00:27,964 - aiogram.event - INFO - Update id=142691014 is handled. Duration 4526 ms by bot id=7498826228
2025-05-19 15:00:29,048 - aiogram.event - INFO - Update id=142691013 is handled. Duration 5623 ms by bot id=7498826228
2025-05-19 15:00:30,552 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:00:30,553 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:00:30,554 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:00:31,207 - aiogram.event - INFO - Update id=142691015 is handled. Duration 3611 ms by bot id=7498826228
2025-05-19 15:00:37,189 - aiogram.event - INFO - Update id=142691016 is handled. Duration 157 ms by bot id=7498826228
2025-05-19 15:00:41,307 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 15:00:41,486 - aiogram.event - INFO - Update id=142691017 is handled. Duration 239 ms by bot id=7498826228
2025-05-19 15:00:48,574 - aiogram.event - INFO - Update id=142691018 is handled. Duration 1141 ms by bot id=7498826228
2025-05-19 15:02:21,297 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 15:02:21,560 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:02:21,562 - root - INFO - Bot stopped
2025-05-19 15:02:28,698 - __main__ - INFO - Starting bot...
2025-05-19 15:02:28,700 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:02:29,167 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:02:34,199 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:02:37,481 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:02:37,482 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:02:37,482 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:02:38,486 - aiogram.event - INFO - Update id=142691019 is handled. Duration 4287 ms by bot id=7498826228
2025-05-19 15:02:55,580 - aiogram.event - INFO - Update id=142691020 is handled. Duration 161 ms by bot id=7498826228
2025-05-19 15:02:58,028 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 15:02:58,243 - aiogram.event - INFO - Update id=142691021 is handled. Duration 221 ms by bot id=7498826228
2025-05-19 15:03:02,288 - aiogram.event - INFO - Update id=142691022 is handled. Duration 1064 ms by bot id=7498826228
2025-05-19 15:06:21,433 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 15:06:21,702 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:06:21,704 - root - INFO - Bot stopped
2025-05-19 15:06:28,904 - __main__ - INFO - Starting bot...
2025-05-19 15:06:28,906 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:06:29,418 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:06:44,074 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:06:47,349 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:06:47,350 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:06:47,351 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:06:48,277 - aiogram.event - INFO - Update id=142691023 is handled. Duration 4203 ms by bot id=7498826228
2025-05-19 15:07:04,318 - aiogram.event - INFO - Update id=142691024 is handled. Duration 156 ms by bot id=7498826228
2025-05-19 15:07:08,434 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 15:07:08,592 - aiogram.event - INFO - Update id=142691025 is handled. Duration 166 ms by bot id=7498826228
2025-05-19 15:07:12,292 - aiogram.event - INFO - Update id=142691026 is handled. Duration 1063 ms by bot id=7498826228
2025-05-19 15:12:58,965 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 15:12:59,232 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:12:59,234 - root - INFO - Bot stopped
2025-05-19 15:13:06,951 - __main__ - INFO - Starting bot...
2025-05-19 15:13:06,952 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:13:07,378 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:13:13,100 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:13:16,501 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:13:16,502 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:13:16,502 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:13:17,365 - aiogram.event - INFO - Update id=142691027 is handled. Duration 4265 ms by bot id=7498826228
2025-05-19 15:13:30,751 - aiogram.event - INFO - Update id=142691028 is handled. Duration 169 ms by bot id=7498826228
2025-05-19 15:13:34,197 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 15:13:34,388 - aiogram.event - INFO - Update id=142691029 is handled. Duration 195 ms by bot id=7498826228
2025-05-19 15:13:45,706 - aiogram.event - INFO - Update id=142691030 is handled. Duration 1091 ms by bot id=7498826228
2025-05-19 15:14:12,534 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:14:15,412 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:14:15,413 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:14:15,414 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:14:16,020 - aiogram.event - INFO - Update id=142691031 is handled. Duration 3486 ms by bot id=7498826228
2025-05-19 15:14:22,898 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:14:26,964 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:14:26,965 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:14:26,965 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:14:27,120 - aiogram.event - INFO - Update id=142691032 is handled. Duration 4222 ms by bot id=7498826228
2025-05-19 15:14:28,679 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 15:14:29,024 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 15:14:29,370 - aiogram.event - INFO - Update id=142691033 is handled. Duration 691 ms by bot id=7498826228
2025-05-19 15:14:32,088 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 15:14:32,089 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:14:32,359 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:14:32,360 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:14:33,193 - aiogram.event - INFO - Update id=142691034 is handled. Duration 1105 ms by bot id=7498826228
2025-05-19 15:14:46,387 - aiogram.event - INFO - Update id=142691035 is handled. Duration 3235 ms by bot id=7498826228
2025-05-19 15:14:47,107 - aiogram.event - INFO - Update id=142691036 is handled. Duration 2957 ms by bot id=7498826228
2025-05-19 15:14:50,561 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:14:53,317 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:14:53,318 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:14:53,319 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:14:53,481 - aiogram.event - INFO - Update id=142691037 is handled. Duration 2921 ms by bot id=7498826228
2025-05-19 15:14:55,057 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 15:14:55,324 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 15:14:55,656 - aiogram.event - INFO - Update id=142691038 is handled. Duration 599 ms by bot id=7498826228
2025-05-19 15:14:56,886 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 15:14:56,886 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:14:57,161 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:14:57,162 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:14:58,055 - aiogram.event - INFO - Update id=142691039 is handled. Duration 1170 ms by bot id=7498826228
2025-05-19 15:15:13,877 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:15:16,771 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:15:16,772 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:15:16,773 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:15:17,108 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:15:17,378 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:15:17,379 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:15:17,705 - aiogram.event - INFO - Update id=142691040 is handled. Duration 3831 ms by bot id=7498826228
2025-05-19 15:15:27,368 - aiogram.event - INFO - Update id=142691041 is handled. Duration 237 ms by bot id=7498826228
2025-05-19 15:15:32,291 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:15:32,571 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:15:32,572 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:15:33,212 - aiogram.event - INFO - Update id=142691042 is handled. Duration 1194 ms by bot id=7498826228
2025-05-19 15:15:36,209 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:15:39,416 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:15:39,417 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:15:39,417 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:15:39,688 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:15:39,961 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:15:39,962 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:15:40,280 - aiogram.event - INFO - Update id=142691043 is handled. Duration 4074 ms by bot id=7498826228
2025-05-19 15:15:50,445 - aiogram.event - INFO - Update id=142691044 is handled. Duration 195 ms by bot id=7498826228
2025-05-19 15:16:05,428 - aiogram.event - INFO - Update id=142691045 is handled. Duration 463 ms by bot id=7498826228
2025-05-19 15:16:12,880 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:16:13,225 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 40}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:16:13,226 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:16:14,317 - aiogram.event - INFO - Update id=142691046 is handled. Duration 2018 ms by bot id=7498826228
2025-05-19 15:16:22,074 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:16:25,027 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:16:25,027 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:16:25,028 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:16:25,739 - aiogram.event - INFO - Update id=142691047 is handled. Duration 3665 ms by bot id=7498826228
2025-05-19 15:16:33,344 - handlers.admin_handlers - INFO - Admin session active for user 1088067370
2025-05-19 15:16:33,508 - aiogram.event - INFO - Update id=142691048 is handled. Duration 166 ms by bot id=7498826228
2025-05-19 15:16:41,354 - aiogram.event - INFO - Update id=142691049 is handled. Duration 1324 ms by bot id=7498826228
2025-05-19 15:17:01,742 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:17:04,880 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:17:04,881 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:17:04,882 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:17:05,050 - aiogram.event - INFO - Update id=142691050 is handled. Duration 3308 ms by bot id=7498826228
2025-05-19 15:17:06,941 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 15:17:07,214 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 15:17:07,581 - aiogram.event - INFO - Update id=142691051 is handled. Duration 641 ms by bot id=7498826228
2025-05-19 15:17:09,202 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 15:17:09,202 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:17:09,468 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 38}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:17:09,469 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:17:10,339 - aiogram.event - INFO - Update id=142691052 is handled. Duration 1138 ms by bot id=7498826228
2025-05-19 15:17:12,864 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:17:15,646 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:17:15,647 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:17:15,648 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:17:15,947 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:17:16,223 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 38}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:17:16,225 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:17:16,542 - aiogram.event - INFO - Update id=142691053 is handled. Duration 3681 ms by bot id=7498826228
2025-05-19 15:17:26,496 - aiogram.event - INFO - Update id=142691054 is handled. Duration 208 ms by bot id=7498826228
2025-05-19 15:17:35,349 - aiogram.event - INFO - Update id=142691055 is handled. Duration 172 ms by bot id=7498826228
2025-05-19 15:17:44,707 - aiogram.event - INFO - Update id=142691056 is handled. Duration 508 ms by bot id=7498826228
2025-05-19 15:17:53,210 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:17:53,475 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 38}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:17:53,476 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:17:54,814 - aiogram.event - INFO - Update id=142691057 is handled. Duration 2143 ms by bot id=7498826228
2025-05-19 15:18:02,957 - aiogram.event - INFO - Update id=142691058 is handled. Duration 1208 ms by bot id=7498826228
2025-05-19 15:18:08,312 - aiogram.event - INFO - Update id=142691059 is handled. Duration 1542 ms by bot id=7498826228
2025-05-19 15:18:30,188 - aiogram.event - INFO - Update id=142691060 is handled. Duration 1717 ms by bot id=7498826228
2025-05-19 15:21:45,436 - aiogram.event - INFO - Update id=142691061 is handled. Duration 1652 ms by bot id=7498826228
2025-05-19 15:21:49,053 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 15:21:49,320 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:21:49,322 - root - INFO - Bot stopped
2025-05-19 15:22:02,972 - __main__ - INFO - Starting bot...
2025-05-19 15:22:02,974 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:22:03,441 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:22:03,593 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:22:06,927 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:22:06,927 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:22:06,928 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:22:07,909 - aiogram.event - INFO - Update id=142691062 is handled. Duration 4316 ms by bot id=7498826228
2025-05-19 15:22:16,324 - aiogram.event - INFO - Update id=142691063 is handled. Duration 173 ms by bot id=7498826228
2025-05-19 15:22:19,616 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 15:22:19,779 - aiogram.event - INFO - Update id=142691064 is handled. Duration 166 ms by bot id=7498826228
2025-05-19 15:22:22,606 - aiogram.event - INFO - Update id=142691065 is handled. Duration 1493 ms by bot id=7498826228
2025-05-19 15:23:10,273 - aiogram.event - INFO - Update id=142691066 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:23:13,556 - aiogram.event - INFO - Update id=142691067 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:23:18,528 - aiogram.event - INFO - Update id=142691068 is not handled. Duration 10 ms by bot id=7498826228
2025-05-19 15:23:19,756 - aiogram.event - INFO - Update id=142691070 is not handled. Duration 16 ms by bot id=7498826228
2025-05-19 15:23:19,757 - aiogram.event - INFO - Update id=142691069 is not handled. Duration 17 ms by bot id=7498826228
2025-05-19 15:23:19,894 - aiogram.event - INFO - Update id=142691071 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:23:20,052 - aiogram.event - INFO - Update id=142691072 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:23:24,483 - aiogram.event - INFO - Update id=142691073 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:23:27,187 - aiogram.event - INFO - Update id=142691074 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:23:28,706 - aiogram.event - INFO - Update id=142691075 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:23:30,261 - aiogram.event - INFO - Update id=142691076 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:29:29,160 - aiogram.event - INFO - Update id=142691077 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:29:29,593 - aiogram.event - INFO - Update id=142691078 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:29:29,732 - aiogram.event - INFO - Update id=142691079 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:29:30,154 - aiogram.event - INFO - Update id=142691080 is not handled. Duration 16 ms by bot id=7498826228
2025-05-19 15:29:30,154 - aiogram.event - INFO - Update id=142691081 is not handled. Duration 16 ms by bot id=7498826228
2025-05-19 15:29:35,900 - aiogram.event - INFO - Update id=142691082 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 15:36:57,866 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 15:36:58,123 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:36:58,125 - root - INFO - Bot stopped
2025-05-19 15:37:03,459 - __main__ - INFO - Starting bot...
2025-05-19 15:37:03,460 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:37:03,919 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:37:09,528 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:37:12,744 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:37:12,745 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:37:12,745 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:37:13,163 - aiogram.event - INFO - Update id=142691083 is handled. Duration 3635 ms by bot id=7498826228
2025-05-19 15:37:14,374 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 15:37:14,646 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 15:37:14,966 - aiogram.event - INFO - Update id=142691084 is handled. Duration 593 ms by bot id=7498826228
2025-05-19 15:37:16,196 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 15:37:16,196 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:37:16,480 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:37:16,481 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:37:17,319 - aiogram.event - INFO - Update id=142691085 is handled. Duration 1123 ms by bot id=7498826228
2025-05-19 15:37:31,831 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:37:34,686 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:37:34,686 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:37:34,692 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:37:34,901 - aiogram.event - INFO - Update id=142691086 is handled. Duration 3069 ms by bot id=7498826228
2025-05-19 15:37:36,622 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 15:37:36,907 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 15:37:37,313 - aiogram.event - INFO - Update id=142691087 is handled. Duration 691 ms by bot id=7498826228
2025-05-19 15:37:45,284 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 15:37:45,284 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:37:45,569 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:37:45,571 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:37:46,497 - aiogram.event - INFO - Update id=142691088 is handled. Duration 1214 ms by bot id=7498826228
2025-05-19 15:37:48,861 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:37:49,150 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:37:49,151 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:37:50,100 - aiogram.event - INFO - Update id=142691089 is handled. Duration 1524 ms by bot id=7498826228
2025-05-19 15:37:51,418 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:37:54,149 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:37:54,150 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:37:54,151 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:37:54,423 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:37:54,688 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:37:54,690 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:37:54,991 - aiogram.event - INFO - Update id=142691090 is handled. Duration 3576 ms by bot id=7498826228
2025-05-19 15:38:07,559 - aiogram.event - INFO - Update id=142691091 is handled. Duration 170 ms by bot id=7498826228
2025-05-19 15:38:14,605 - aiogram.event - INFO - Update id=142691092 is handled. Duration 443 ms by bot id=7498826228
2025-05-19 15:38:25,694 - aiogram.event - INFO - Update id=142691093 is handled. Duration 203 ms by bot id=7498826228
2025-05-19 15:38:59,393 - aiogram.event - INFO - Update id=142691094 is handled. Duration 184 ms by bot id=7498826228
2025-05-19 15:41:08,093 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 15:41:08,350 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:41:08,353 - root - INFO - Bot stopped
2025-05-19 15:41:14,806 - __main__ - INFO - Starting bot...
2025-05-19 15:41:14,807 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:41:15,373 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:41:15,544 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:41:18,888 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:41:18,888 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:41:18,889 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:41:19,768 - aiogram.event - INFO - Update id=142691095 is handled. Duration 4225 ms by bot id=7498826228
2025-05-19 15:41:27,763 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:41:30,635 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:41:30,636 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:41:30,636 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:41:30,931 - aiogram.event - INFO - Update id=142691096 is handled. Duration 3169 ms by bot id=7498826228
2025-05-19 15:41:36,546 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 15:41:36,830 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 15:41:37,129 - aiogram.event - INFO - Update id=142691097 is handled. Duration 583 ms by bot id=7498826228
2025-05-19 15:41:38,542 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 15:41:38,543 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 15:41:38,836 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 15:41:38,837 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 15:41:39,713 - aiogram.event - INFO - Update id=142691098 is handled. Duration 1171 ms by bot id=7498826228
2025-05-19 15:41:47,530 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:41:50,248 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:41:50,249 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:41:50,250 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:41:50,515 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:41:50,802 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:41:50,804 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:41:50,804 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 15:41:51,077 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 15:41:51,079 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 15:41:51,409 - aiogram.event - INFO - Update id=142691099 is handled. Duration 3881 ms by bot id=7498826228
2025-05-19 15:42:01,053 - aiogram.event - INFO - Update id=142691100 is handled. Duration 194 ms by bot id=7498826228
2025-05-19 15:42:06,845 - aiogram.event - INFO - Update id=142691101 is handled. Duration 437 ms by bot id=7498826228
2025-05-19 15:42:19,238 - aiogram.event - INFO - Update id=142691102 is handled. Duration 170 ms by bot id=7498826228
2025-05-19 15:44:19,039 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 15:44:19,298 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:44:19,301 - root - INFO - Bot stopped
2025-05-19 15:44:27,026 - __main__ - INFO - Starting bot...
2025-05-19 15:44:27,027 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:44:27,419 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:44:33,206 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:44:36,425 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:36,426 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:36,426 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:37,299 - aiogram.event - INFO - Update id=142691103 is handled. Duration 4093 ms by bot id=7498826228
2025-05-19 15:44:41,510 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:44:44,316 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:44:44,322 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:44,323 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:44,324 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:44,503 - aiogram.event - INFO - Update id=142691104 is handled. Duration 2993 ms by bot id=7498826228
2025-05-19 15:44:47,083 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:47,084 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:47,084 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:47,524 - aiogram.event - INFO - Update id=142691105 is handled. Duration 3209 ms by bot id=7498826228
2025-05-19 15:44:50,331 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:44:53,065 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:53,066 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:53,066 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:53,340 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:44:53,608 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:44:53,609 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:44:53,610 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 15:44:53,705 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:44:53,901 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 15:44:53,902 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 15:44:54,432 - aiogram.event - INFO - Update id=142691106 is handled. Duration 4104 ms by bot id=7498826228
2025-05-19 15:44:56,478 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:56,479 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:56,479 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:44:56,766 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:44:57,053 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:44:57,054 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:44:57,054 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 15:44:57,337 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 15:44:57,338 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 15:44:57,678 - aiogram.event - INFO - Update id=142691107 is handled. Duration 3976 ms by bot id=7498826228
2025-05-19 15:44:59,079 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:45:01,902 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:45:01,903 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:45:01,904 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:45:02,098 - aiogram.event - INFO - Update id=142691108 is handled. Duration 3019 ms by bot id=7498826228
2025-05-19 15:45:03,295 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:45:05,907 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:45:05,908 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:45:05,908 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:45:06,356 - aiogram.event - INFO - Update id=142691109 is handled. Duration 3062 ms by bot id=7498826228
2025-05-19 15:45:08,170 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:45:10,985 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:45:10,986 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:45:10,987 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:45:11,269 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:45:11,550 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:45:11,552 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:45:11,552 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 15:45:11,837 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 15:45:11,838 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 15:45:12,134 - aiogram.event - INFO - Update id=142691110 is handled. Duration 3966 ms by bot id=7498826228
2025-05-19 15:45:26,082 - aiogram.event - INFO - Update id=142691111 is handled. Duration 184 ms by bot id=7498826228
2025-05-19 15:45:33,102 - aiogram.event - INFO - Update id=142691112 is handled. Duration 448 ms by bot id=7498826228
2025-05-19 15:45:57,525 - aiogram.event - INFO - Update id=142691113 is handled. Duration 155 ms by bot id=7498826228
2025-05-19 15:46:52,110 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 15:46:52,368 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:46:52,370 - root - INFO - Bot stopped
2025-05-19 15:47:12,243 - __main__ - INFO - Starting bot...
2025-05-19 15:47:12,245 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:47:12,815 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:47:12,961 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:47:16,155 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:47:16,155 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:47:16,156 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:47:17,034 - aiogram.event - INFO - Update id=142691114 is handled. Duration 4073 ms by bot id=7498826228
2025-05-19 15:47:20,597 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:47:23,335 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:47:23,336 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:47:23,336 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:47:23,786 - aiogram.event - INFO - Update id=142691115 is handled. Duration 3190 ms by bot id=7498826228
2025-05-19 15:47:25,005 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:47:28,024 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:47:28,025 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:47:28,026 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:47:28,323 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 15:47:28,623 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 15:47:28,624 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 15:47:28,624 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 15:47:28,927 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 15:47:28,928 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 15:47:29,348 - aiogram.event - INFO - Update id=142691116 is handled. Duration 4346 ms by bot id=7498826228
2025-05-19 15:58:59,292 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 15:58:59,553 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:58:59,555 - root - INFO - Bot stopped
2025-05-19 15:59:05,642 - __main__ - INFO - Starting bot...
2025-05-19 15:59:05,643 - aiogram.dispatcher - INFO - Start polling
2025-05-19 15:59:06,094 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 15:59:23,482 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 15:59:26,767 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:59:26,768 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:59:26,769 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 15:59:27,655 - aiogram.event - INFO - Update id=142691117 is handled. Duration 4173 ms by bot id=7498826228
2025-05-19 16:00:59,153 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:01:02,342 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:01:02,343 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:01:02,343 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:01:02,597 - aiogram.event - INFO - Update id=142691118 is handled. Duration 3444 ms by bot id=7498826228
2025-05-19 16:02:31,651 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 16:02:31,945 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 16:02:32,343 - aiogram.event - INFO - Update id=142691119 is handled. Duration 692 ms by bot id=7498826228
2025-05-19 16:02:33,343 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 16:02:33,344 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 16:02:33,651 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 16:02:33,652 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 16:02:34,583 - aiogram.event - INFO - Update id=142691120 is handled. Duration 1240 ms by bot id=7498826228
2025-05-19 16:02:36,489 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:02:39,811 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:02:39,811 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:02:39,812 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:02:40,106 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 16:02:41,036 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 16:02:41,038 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 16:02:41,038 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 16:02:41,328 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 16:02:41,329 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 16:02:41,774 - aiogram.event - INFO - Update id=142691121 is handled. Duration 5288 ms by bot id=7498826228
2025-05-19 16:02:53,155 - aiogram.event - INFO - Update id=142691122 is handled. Duration 198 ms by bot id=7498826228
2025-05-19 16:03:02,977 - aiogram.event - INFO - Update id=142691123 is handled. Duration 562 ms by bot id=7498826228
2025-05-19 16:03:30,959 - aiogram.event - INFO - Update id=142691124 is handled. Duration 186 ms by bot id=7498826228
2025-05-19 16:04:28,700 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 16:04:28,962 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 16:04:28,965 - root - INFO - Bot stopped
2025-05-19 16:04:45,654 - __main__ - INFO - Starting bot...
2025-05-19 16:04:45,656 - aiogram.dispatcher - INFO - Start polling
2025-05-19 16:04:46,175 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 16:05:34,180 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:05:37,388 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:37,389 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:37,390 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:38,284 - aiogram.event - INFO - Update id=142691125 is handled. Duration 4105 ms by bot id=7498826228
2025-05-19 16:05:43,130 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:05:44,485 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:05:46,117 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:46,118 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:46,119 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:46,319 - aiogram.event - INFO - Update id=142691126 is handled. Duration 3190 ms by bot id=7498826228
2025-05-19 16:05:47,374 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:47,375 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:47,375 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:47,871 - aiogram.event - INFO - Update id=142691127 is handled. Duration 3386 ms by bot id=7498826228
2025-05-19 16:05:52,837 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:05:55,726 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:55,727 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:55,727 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:05:56,020 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 16:05:56,319 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 16:05:56,320 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 16:05:56,320 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 16:05:56,599 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 16:05:56,600 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 16:05:56,925 - aiogram.event - INFO - Update id=142691128 is handled. Duration 4091 ms by bot id=7498826228
2025-05-19 16:06:07,791 - aiogram.event - INFO - Update id=142691129 is handled. Duration 160 ms by bot id=7498826228
2025-05-19 16:06:14,915 - aiogram.event - INFO - Update id=142691130 is handled. Duration 473 ms by bot id=7498826228
2025-05-19 16:06:31,527 - aiogram.event - INFO - Update id=142691131 is handled. Duration 158 ms by bot id=7498826228
2025-05-19 16:06:49,398 - aiogram.event - INFO - Update id=142691132 is handled. Duration 157 ms by bot id=7498826228
2025-05-19 16:08:04,398 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 16:08:04,662 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 16:08:04,664 - root - INFO - Bot stopped
2025-05-19 16:08:10,841 - __main__ - INFO - Starting bot...
2025-05-19 16:08:10,843 - aiogram.dispatcher - INFO - Start polling
2025-05-19 16:08:11,245 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 16:08:35,660 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:08:38,894 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:08:38,894 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:08:38,895 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:08:39,820 - aiogram.event - INFO - Update id=142691133 is handled. Duration 4160 ms by bot id=7498826228
2025-05-19 16:08:56,520 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:08:59,258 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:08:59,259 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:08:59,260 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:08:59,424 - aiogram.event - INFO - Update id=142691134 is handled. Duration 2903 ms by bot id=7498826228
2025-05-19 16:09:01,549 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:09:04,454 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:09:04,455 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:09:04,455 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:09:04,911 - aiogram.event - INFO - Update id=142691135 is handled. Duration 3363 ms by bot id=7498826228
2025-05-19 16:09:17,045 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:09:19,769 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:09:19,770 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:09:19,771 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:09:20,028 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 16:09:20,284 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 16:09:20,285 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 16:09:20,286 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 16:09:20,543 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 16:09:20,544 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 16:09:21,028 - aiogram.event - INFO - Update id=142691136 is handled. Duration 3986 ms by bot id=7498826228
2025-05-19 16:09:33,347 - aiogram.event - INFO - Update id=142691137 is handled. Duration 209 ms by bot id=7498826228
2025-05-19 16:09:44,742 - aiogram.event - INFO - Update id=142691138 is handled. Duration 421 ms by bot id=7498826228
2025-05-19 16:09:56,858 - aiogram.event - INFO - Update id=142691139 is not handled. Duration 10 ms by bot id=7498826228
2025-05-19 16:09:56,859 - aiogram.event - ERROR - Cause exception while process update id=142691139 by bot id=7498826228
AttributeError: 'Bot' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 827, in handle_payment_proof
    await process_payment(message, message.bot.get('state'))
                                   ^^^^^^^^^^^^^^^
AttributeError: 'Bot' object has no attribute 'get'
2025-05-19 16:11:50,903 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 16:11:51,165 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 16:11:51,167 - root - INFO - Bot stopped
2025-05-19 16:12:19,735 - __main__ - INFO - Starting bot...
2025-05-19 16:12:19,737 - aiogram.dispatcher - INFO - Start polling
2025-05-19 16:12:20,188 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 16:12:20,349 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:12:23,590 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:12:23,591 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:12:23,592 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:12:24,476 - aiogram.event - INFO - Update id=142691140 is handled. Duration 4127 ms by bot id=7498826228
2025-05-19 16:12:38,090 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:12:40,842 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:12:40,843 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:12:40,844 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:12:41,273 - aiogram.event - INFO - Update id=142691141 is handled. Duration 3184 ms by bot id=7498826228
2025-05-19 16:12:43,668 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 16:12:46,447 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:12:46,448 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:12:46,449 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 16:12:46,717 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 16:12:46,983 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 16:12:46,985 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 16:12:46,985 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 16:12:47,252 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 16:12:47,253 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 16:12:47,619 - aiogram.event - INFO - Update id=142691142 is handled. Duration 3954 ms by bot id=7498826228
2025-05-19 16:12:58,854 - aiogram.event - INFO - Update id=142691143 is handled. Duration 227 ms by bot id=7498826228
2025-05-19 16:13:04,577 - aiogram.event - INFO - Update id=142691144 is handled. Duration 443 ms by bot id=7498826228
2025-05-19 16:13:20,247 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 16:13:20,580 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 37}, {'name': '�����', 'quantity': 0}]}
2025-05-19 16:13:20,581 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 16:13:20,854 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 16:13:21,136 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 22}]}
2025-05-19 16:13:21,138 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 16:13:22,221 - aiogram.event - INFO - Update id=142691145 is handled. Duration 2523 ms by bot id=7498826228
2025-05-19 16:14:12,917 - aiogram.event - INFO - Update id=142691146 is handled. Duration 1224 ms by bot id=7498826228
2025-05-19 17:06:16,719 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:06:16,881 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:06:19,997 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:06:19,998 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:06:19,999 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:06:20,116 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:06:20,117 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:06:20,118 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:06:20,892 - aiogram.event - INFO - Update id=142691148 is handled. Duration 4011 ms by bot id=7498826228
2025-05-19 17:06:22,263 - aiogram.event - INFO - Update id=142691147 is handled. Duration 5544 ms by bot id=7498826228
2025-05-19 17:06:26,559 - aiogram.event - INFO - Update id=142691149 is handled. Duration 167 ms by bot id=7498826228
2025-05-19 17:06:30,896 - aiogram.event - INFO - Update id=142691150 is handled. Duration 329 ms by bot id=7498826228
2025-05-19 17:08:16,061 - aiogram.event - INFO - Update id=142691151 is not handled. Duration 153 ms by bot id=7498826228
2025-05-19 17:08:16,062 - aiogram.event - ERROR - Cause exception while process update id=142691151 by bot id=7498826228
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 1013, in show_delivery_info
    await callback.message.edit_text(text, reply_markup=help_menu())
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
2025-05-19 17:08:20,001 - aiogram.event - INFO - Update id=142691152 is not handled. Duration 160 ms by bot id=7498826228
2025-05-19 17:08:20,002 - aiogram.event - ERROR - Cause exception while process update id=142691152 by bot id=7498826228
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 1013, in show_delivery_info
    await callback.message.edit_text(text, reply_markup=help_menu())
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
2025-05-19 17:08:22,404 - aiogram.event - INFO - Update id=142691153 is handled. Duration 397 ms by bot id=7498826228
2025-05-19 17:08:23,946 - aiogram.event - INFO - Update id=142691154 is handled. Duration 307 ms by bot id=7498826228
2025-05-19 17:08:29,382 - aiogram.event - INFO - Update id=142691155 is handled. Duration 294 ms by bot id=7498826228
2025-05-19 17:09:04,444 - aiogram.event - INFO - Update id=142691156 is handled. Duration 479 ms by bot id=7498826228
2025-05-19 17:09:07,852 - aiogram.event - INFO - Update id=142691157 is not handled. Duration 249 ms by bot id=7498826228
2025-05-19 17:09:07,853 - aiogram.event - ERROR - Cause exception while process update id=142691157 by bot id=7498826228
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 988, in show_how_to_order
    await callback.message.edit_text(text, reply_markup=help_menu())
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
2025-05-19 17:09:08,640 - aiogram.event - INFO - Update id=142691158 is handled. Duration 310 ms by bot id=7498826228
2025-05-19 17:09:12,305 - aiogram.event - INFO - Update id=142691159 is handled. Duration 522 ms by bot id=7498826228
2025-05-19 17:10:15,825 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:10:19,012 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:10:19,013 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:10:19,013 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:10:19,213 - aiogram.event - INFO - Update id=142691160 is handled. Duration 3388 ms by bot id=7498826228
2025-05-19 17:10:19,908 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:10:22,658 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:10:22,659 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:10:22,659 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:10:23,139 - aiogram.event - INFO - Update id=142691161 is handled. Duration 3231 ms by bot id=7498826228
2025-05-19 17:10:30,170 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:10:33,027 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:10:33,028 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:10:33,029 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:10:33,191 - aiogram.event - INFO - Update id=142691162 is handled. Duration 3020 ms by bot id=7498826228
2025-05-19 17:11:00,761 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������
2025-05-19 17:11:01,036 - database.mongodb - INFO - [DEBUG] Found 0 products in category ����������
2025-05-19 17:11:01,216 - aiogram.event - INFO - Update id=142691163 is handled. Duration 459 ms by bot id=7498826228
2025-05-19 17:11:03,394 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 17:11:03,696 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 17:11:04,053 - aiogram.event - INFO - Update id=142691164 is handled. Duration 659 ms by bot id=7498826228
2025-05-19 17:11:07,019 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 17:11:07,020 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 17:11:07,303 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 33}, {'name': '�����', 'quantity': 0}]}
2025-05-19 17:11:07,304 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 17:11:08,309 - aiogram.event - INFO - Update id=142691165 is handled. Duration 1290 ms by bot id=7498826228
2025-05-19 17:11:16,616 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 17:11:16,892 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 33}, {'name': '�����', 'quantity': 0}]}
2025-05-19 17:11:16,893 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 17:11:17,556 - aiogram.event - INFO - Update id=142691166 is handled. Duration 1236 ms by bot id=7498826228
2025-05-19 17:11:19,310 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:11:22,595 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:11:22,596 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:11:22,597 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:11:22,882 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 17:11:23,166 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 33}, {'name': '�����', 'quantity': 0}]}
2025-05-19 17:11:23,168 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 17:11:23,515 - aiogram.event - INFO - Update id=142691167 is handled. Duration 4207 ms by bot id=7498826228
2025-05-19 17:11:40,313 - aiogram.event - INFO - Update id=142691168 is handled. Duration 162 ms by bot id=7498826228
2025-05-19 17:11:48,151 - aiogram.event - INFO - Update id=142691169 is handled. Duration 465 ms by bot id=7498826228
2025-05-19 17:12:00,955 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 17:12:01,242 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 33}, {'name': '�����', 'quantity': 0}]}
2025-05-19 17:12:01,243 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 17:12:02,478 - aiogram.event - INFO - Update id=142691170 is handled. Duration 2111 ms by bot id=7498826228
2025-05-19 17:12:09,830 - aiogram.event - INFO - Update id=142691171 is handled. Duration 1207 ms by bot id=7498826228
2025-05-19 17:12:25,774 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:12:28,842 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:12:28,843 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:12:28,844 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:12:29,019 - aiogram.event - INFO - Update id=142691172 is handled. Duration 3245 ms by bot id=7498826228
2025-05-19 17:12:30,608 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 17:12:30,872 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 17:12:31,189 - aiogram.event - INFO - Update id=142691173 is handled. Duration 581 ms by bot id=7498826228
2025-05-19 17:12:33,763 - aiogram.event - INFO - Update id=142691174 is handled. Duration 486 ms by bot id=7498826228
2025-05-19 17:12:35,194 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 17:12:35,472 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 17:12:35,855 - aiogram.event - INFO - Update id=142691175 is handled. Duration 661 ms by bot id=7498826228
2025-05-19 17:12:38,670 - aiogram.event - INFO - Update id=142691176 is handled. Duration 850 ms by bot id=7498826228
2025-05-19 17:12:39,233 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������� ����������
2025-05-19 17:12:39,495 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������� ����������
2025-05-19 17:12:39,856 - aiogram.event - INFO - Update id=142691177 is handled. Duration 623 ms by bot id=7498826228
2025-05-19 17:12:41,196 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 17:12:41,197 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 17:12:41,457 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 21}]}
2025-05-19 17:12:41,458 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 17:12:42,332 - aiogram.event - INFO - Update id=142691178 is handled. Duration 1136 ms by bot id=7498826228
2025-05-19 17:12:45,637 - aiogram.event - INFO - Update id=142691179 is handled. Duration 569 ms by bot id=7498826228
2025-05-19 17:12:48,129 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 17:12:48,393 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 17:12:48,683 - aiogram.event - INFO - Update id=142691180 is handled. Duration 554 ms by bot id=7498826228
2025-05-19 17:12:49,846 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-19 17:12:49,846 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 17:12:50,112 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 31}, {'name': '�����', 'quantity': 0}]}
2025-05-19 17:12:50,113 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 17:12:50,954 - aiogram.event - INFO - Update id=142691181 is handled. Duration 1108 ms by bot id=7498826228
2025-05-19 17:13:04,386 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:13:07,089 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:13:07,090 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:13:07,091 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:13:07,363 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 17:13:07,622 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 21}]}
2025-05-19 17:13:07,624 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 17:13:07,624 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 17:13:07,884 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 31}, {'name': '�����', 'quantity': 0}]}
2025-05-19 17:13:07,885 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 17:13:08,243 - aiogram.event - INFO - Update id=142691182 is handled. Duration 3859 ms by bot id=7498826228
2025-05-19 17:13:28,618 - aiogram.event - INFO - Update id=142691183 is handled. Duration 184 ms by bot id=7498826228
2025-05-19 17:13:58,716 - aiogram.event - INFO - Update id=142691184 is handled. Duration 424 ms by bot id=7498826228
2025-05-19 17:14:23,026 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 17:14:23,282 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 21}]}
2025-05-19 17:14:23,283 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 17:14:23,546 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ae610079382b8d51432cf
2025-05-19 17:14:23,804 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ae610079382b8d51432cf'), 'name': '�����', 'category': '����', 'price': 5000, 'description': '���', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�������', 'quantity': 31}, {'name': '�����', 'quantity': 0}]}
2025-05-19 17:14:23,805 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ae610079382b8d51432cf
2025-05-19 17:14:25,082 - aiogram.event - INFO - Update id=142691185 is handled. Duration 2627 ms by bot id=7498826228
2025-05-19 17:14:52,075 - aiogram.event - INFO - Update id=142691186 is handled. Duration 431 ms by bot id=7498826228
2025-05-19 17:15:09,279 - aiogram.event - INFO - Update id=142691187 is handled. Duration 1180 ms by bot id=7498826228
2025-05-19 17:15:14,687 - aiogram.event - INFO - Update id=142691188 is handled. Duration 219 ms by bot id=7498826228
2025-05-19 17:15:16,370 - aiogram.event - INFO - Update id=142691189 is handled. Duration 473 ms by bot id=7498826228
2025-05-19 17:15:28,150 - aiogram.event - INFO - Update id=142691190 is not handled. Duration 6 ms by bot id=7498826228
2025-05-19 17:15:54,365 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:15:57,596 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:15:57,597 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:15:57,597 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:15:58,392 - aiogram.event - INFO - Update id=142691191 is handled. Duration 4028 ms by bot id=7498826228
2025-05-19 17:16:01,101 - aiogram.event - INFO - Update id=142691192 is handled. Duration 229 ms by bot id=7498826228
2025-05-19 17:16:06,647 - handlers.admin_handlers - WARNING - Failed admin login attempt from user 1088067370
2025-05-19 17:16:06,648 - aiogram.event - INFO - Update id=142691193 is not handled. Duration 3 ms by bot id=7498826228
2025-05-19 17:16:06,649 - aiogram.event - ERROR - Cause exception while process update id=142691193 by bot id=7498826228
AttributeError: 'SecurityManager' object has no attribute 'failed_attempts'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 125, in check_admin_password
    attempts_left = security_manager.max_attempts - security_manager.failed_attempts.get(user_id, 0)
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'SecurityManager' object has no attribute 'failed_attempts'. Did you mean: 'add_failed_attempt'?
2025-05-19 17:16:11,513 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 17:16:11,679 - aiogram.event - INFO - Update id=142691194 is handled. Duration 169 ms by bot id=7498826228
2025-05-19 17:16:15,853 - aiogram.event - INFO - Update id=142691195 is handled. Duration 1986 ms by bot id=7498826228
2025-05-19 17:16:34,807 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-05-19 17:16:35,094 - aiogram.event - INFO - Update id=142691196 is handled. Duration 291 ms by bot id=7498826228
2025-05-19 17:16:53,186 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:16:56,525 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:16:56,525 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:16:56,526 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:16:57,160 - aiogram.event - INFO - Update id=142691197 is handled. Duration 3973 ms by bot id=7498826228
2025-05-19 17:17:02,141 - aiogram.event - INFO - Update id=142691198 is handled. Duration 2741 ms by bot id=7498826228
2025-05-19 17:17:37,066 - handlers.admin_handlers - INFO - Admin session active for user 1088067370
2025-05-19 17:17:37,230 - aiogram.event - INFO - Update id=142691199 is handled. Duration 167 ms by bot id=7498826228
2025-05-19 17:17:56,758 - aiogram.event - INFO - Update id=142691200 is handled. Duration 2292 ms by bot id=7498826228
2025-05-19 17:18:00,462 - aiogram.event - INFO - Update id=142691201 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:18:12,715 - aiogram.event - INFO - Update id=142691202 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:18:19,673 - handlers.admin_handlers - WARNING - Unauthorized admin access attempt from user 531632690
2025-05-19 17:18:20,222 - aiogram.event - INFO - Update id=142691203 is handled. Duration 551 ms by bot id=7498826228
2025-05-19 17:19:10,171 - aiogram.event - INFO - Update id=142691204 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:19:12,356 - aiogram.event - INFO - Update id=142691205 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:19:13,563 - aiogram.event - INFO - Update id=142691206 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:19:15,085 - aiogram.event - INFO - Update id=142691207 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:19:16,588 - aiogram.event - INFO - Update id=142691208 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:19:18,587 - aiogram.event - INFO - Update id=142691209 is not handled. Duration 10 ms by bot id=7498826228
2025-05-19 17:19:19,336 - aiogram.event - INFO - Update id=142691210 is not handled. Duration 11 ms by bot id=7498826228
2025-05-19 17:19:20,865 - aiogram.event - INFO - Update id=142691211 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:19:22,356 - aiogram.event - INFO - Update id=142691212 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:20:29,587 - aiogram.event - INFO - Update id=142691213 is handled. Duration 2133 ms by bot id=7498826228
2025-05-19 17:21:28,479 - aiogram.event - INFO - Update id=142691214 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:21:33,698 - aiogram.event - INFO - Update id=142691215 is not handled. Duration 11 ms by bot id=7498826228
2025-05-19 17:22:21,115 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:22:24,074 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:22:24,075 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:22:24,075 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:22:24,644 - aiogram.event - INFO - Update id=142691216 is handled. Duration 3528 ms by bot id=7498826228
2025-05-19 17:22:34,735 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 17:22:35,003 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:22:35,005 - root - INFO - Bot stopped
2025-05-19 17:22:41,518 - __main__ - INFO - Starting bot...
2025-05-19 17:22:41,526 - aiogram.dispatcher - INFO - Start polling
2025-05-19 17:22:41,985 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:23:02,113 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:23:05,109 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:23:05,110 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:23:05,111 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:23:06,222 - aiogram.event - INFO - Update id=142691217 is handled. Duration 4109 ms by bot id=7498826228
2025-05-19 17:23:18,837 - aiogram.event - INFO - Update id=142691218 is handled. Duration 193 ms by bot id=7498826228
2025-05-19 17:23:22,315 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 17:23:22,583 - aiogram.event - INFO - Update id=142691219 is handled. Duration 271 ms by bot id=7498826228
2025-05-19 17:23:26,599 - aiogram.event - INFO - Update id=142691220 is handled. Duration 2026 ms by bot id=7498826228
2025-05-19 17:23:28,576 - aiogram.event - INFO - Update id=142691221 is handled. Duration 931 ms by bot id=7498826228
2025-05-19 17:23:30,893 - aiogram.event - INFO - Update id=142691222 is handled. Duration 979 ms by bot id=7498826228
2025-05-19 17:23:32,910 - aiogram.event - INFO - Update id=142691223 is handled. Duration 921 ms by bot id=7498826228
2025-05-19 17:23:35,072 - aiogram.event - INFO - Update id=142691224 is handled. Duration 876 ms by bot id=7498826228
2025-05-19 17:23:36,986 - aiogram.event - INFO - Update id=142691225 is handled. Duration 874 ms by bot id=7498826228
2025-05-19 17:23:38,918 - aiogram.event - INFO - Update id=142691226 is handled. Duration 896 ms by bot id=7498826228
2025-05-19 17:23:40,431 - aiogram.event - INFO - Update id=142691227 is handled. Duration 325 ms by bot id=7498826228
2025-05-19 17:23:46,291 - aiogram.event - INFO - Update id=142691228 is handled. Duration 1294 ms by bot id=7498826228
2025-05-19 17:23:50,858 - aiogram.event - INFO - Update id=142691229 is handled. Duration 954 ms by bot id=7498826228
2025-05-19 17:23:52,809 - aiogram.event - INFO - Update id=142691230 is handled. Duration 916 ms by bot id=7498826228
2025-05-19 17:23:57,535 - aiogram.event - INFO - Update id=142691231 is handled. Duration 753 ms by bot id=7498826228
2025-05-19 17:24:21,069 - aiogram.event - INFO - Update id=142691232 is handled. Duration 184 ms by bot id=7498826228
2025-05-19 17:27:56,182 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 17:27:56,442 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:27:56,444 - root - INFO - Bot stopped
2025-05-19 17:28:02,411 - __main__ - INFO - Starting bot...
2025-05-19 17:28:02,413 - aiogram.dispatcher - INFO - Start polling
2025-05-19 17:28:02,866 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:28:16,366 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:28:19,441 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:28:19,442 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:28:19,443 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:28:20,387 - aiogram.event - INFO - Update id=142691233 is handled. Duration 4020 ms by bot id=7498826228
2025-05-19 17:28:22,012 - aiogram.event - INFO - Update id=142691234 is handled. Duration 169 ms by bot id=7498826228
2025-05-19 17:29:05,184 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 17:29:05,422 - aiogram.event - INFO - Update id=142691235 is handled. Duration 242 ms by bot id=7498826228
2025-05-19 17:29:33,636 - aiogram.event - INFO - Update id=142691236 is handled. Duration 179 ms by bot id=7498826228
2025-05-19 17:30:57,428 - aiogram.event - INFO - Update id=142691237 is handled. Duration 183 ms by bot id=7498826228
2025-05-19 17:31:06,306 - aiogram.event - INFO - Update id=142691238 is handled. Duration 162 ms by bot id=7498826228
2025-05-19 17:31:09,221 - aiogram.event - INFO - Update id=142691239 is handled. Duration 1107 ms by bot id=7498826228
2025-05-19 17:31:17,047 - aiogram.event - INFO - Update id=142691240 is handled. Duration 208 ms by bot id=7498826228
2025-05-19 17:31:22,710 - aiogram.event - INFO - Update id=142691241 is handled. Duration 284 ms by bot id=7498826228
2025-05-19 17:31:25,951 - aiogram.event - INFO - Update id=142691242 is handled. Duration 1071 ms by bot id=7498826228
2025-05-19 17:31:38,398 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:31:41,678 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:31:41,679 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:31:41,680 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:31:41,840 - aiogram.event - INFO - Update id=142691243 is handled. Duration 3452 ms by bot id=7498826228
2025-05-19 17:31:51,320 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:31:54,013 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:31:54,014 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:31:54,015 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:31:54,343 - aiogram.event - INFO - Update id=142691244 is handled. Duration 3031 ms by bot id=7498826228
2025-05-19 17:34:09,935 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:34:13,141 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:34:13,142 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:34:13,142 - database.mongodb - ERROR - Error setting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:34:13,317 - aiogram.event - INFO - Update id=142691245 is handled. Duration 3391 ms by bot id=7498826228
2025-05-19 17:34:17,071 - aiogram.event - INFO - Update id=142691246 is not handled. Duration 7 ms by bot id=7498826228
2025-05-19 17:34:18,633 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:34:21,416 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:34:21,417 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:34:21,418 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:34:21,637 - aiogram.event - INFO - Update id=142691247 is handled. Duration 3003 ms by bot id=7498826228
2025-05-19 17:34:35,094 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:34:38,084 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:34:38,085 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:34:38,085 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:34:38,694 - aiogram.event - INFO - Update id=142691248 is handled. Duration 3600 ms by bot id=7498826228
2025-05-19 17:40:37,269 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 17:40:37,538 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:40:37,540 - root - INFO - Bot stopped
2025-05-19 17:40:45,531 - __main__ - INFO - Starting bot...
2025-05-19 17:40:45,532 - aiogram.dispatcher - INFO - Start polling
2025-05-19 17:40:45,976 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:40:56,336 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:40:59,584 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:40:59,584 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:40:59,585 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:41:00,085 - aiogram.event - INFO - Update id=142691249 is handled. Duration 3749 ms by bot id=7498826228
2025-05-19 17:41:12,026 - aiogram.event - INFO - Update id=142691250 is handled. Duration 192 ms by bot id=7498826228
2025-05-19 17:41:48,805 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:41:51,740 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:41:51,741 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:41:51,741 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:41:51,958 - aiogram.event - INFO - Update id=142691251 is handled. Duration 3153 ms by bot id=7498826228
2025-05-19 17:42:21,363 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 17:42:21,628 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:42:21,630 - root - INFO - Bot stopped
2025-05-19 17:42:27,023 - __main__ - INFO - Starting bot...
2025-05-19 17:42:27,025 - aiogram.dispatcher - INFO - Start polling
2025-05-19 17:42:27,437 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:42:45,518 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:42:48,761 - database.mongodb - ERROR - Failed to create indexes: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:42:48,762 - database.mongodb - ERROR - Unexpected error connecting to MongoDB: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:42:48,763 - database.mongodb - ERROR - Error getting sleep mode: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-19 17:42:49,238 - aiogram.event - INFO - Update id=142691252 is handled. Duration 3719 ms by bot id=7498826228
2025-05-19 17:44:06,027 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 17:44:06,290 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:44:06,292 - root - INFO - Bot stopped
2025-05-19 17:44:11,812 - __main__ - INFO - Starting bot...
2025-05-19 17:44:11,814 - aiogram.dispatcher - INFO - Start polling
2025-05-19 17:44:12,254 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:44:21,626 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:44:25,832 - database.mongodb - INFO - Database indexes created successfully
2025-05-19 17:44:26,110 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-19 17:44:26,827 - aiogram.event - INFO - Update id=142691253 is handled. Duration 5200 ms by bot id=7498826228
2025-05-19 17:44:35,905 - aiogram.event - INFO - Update id=142691254 is handled. Duration 199 ms by bot id=7498826228
2025-05-19 17:44:39,001 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 17:44:39,173 - aiogram.event - INFO - Update id=142691255 is handled. Duration 175 ms by bot id=7498826228
2025-05-19 17:44:41,258 - aiogram.event - INFO - Update id=142691256 is handled. Duration 436 ms by bot id=7498826228
2025-05-19 17:44:43,226 - aiogram.event - INFO - Update id=142691257 is handled. Duration 708 ms by bot id=7498826228
2025-05-19 17:44:44,701 - aiogram.event - INFO - Update id=142691258 is handled. Duration 252 ms by bot id=7498826228
2025-05-19 17:44:50,434 - aiogram.event - INFO - Update id=142691259 is handled. Duration 482 ms by bot id=7498826228
2025-05-19 17:44:52,199 - aiogram.event - INFO - Update id=142691260 is handled. Duration 445 ms by bot id=7498826228
2025-05-19 17:44:56,045 - aiogram.event - INFO - Update id=142691261 is handled. Duration 795 ms by bot id=7498826228
2025-05-19 17:45:00,841 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-19 17:45:01,034 - aiogram.event - INFO - Update id=142691262 is handled. Duration 488 ms by bot id=7498826228
2025-05-19 17:45:09,408 - aiogram.event - INFO - Update id=142691263 is handled. Duration 525 ms by bot id=7498826228
2025-05-19 17:45:15,823 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-19 17:45:16,137 - aiogram.event - INFO - Update id=142691264 is handled. Duration 875 ms by bot id=7498826228
2025-05-19 17:45:19,396 - aiogram.event - INFO - Update id=142691265 is handled. Duration 455 ms by bot id=7498826228
2025-05-19 17:45:26,706 - aiogram.event - INFO - Update id=142691266 is handled. Duration 192 ms by bot id=7498826228
2025-05-19 17:45:30,867 - aiogram.event - INFO - Update id=142691267 is handled. Duration 424 ms by bot id=7498826228
2025-05-19 17:45:32,906 - aiogram.event - INFO - Update id=142691268 is handled. Duration 450 ms by bot id=7498826228
2025-05-19 17:45:50,554 - aiogram.event - INFO - Update id=142691269 is handled. Duration 179 ms by bot id=7498826228
2025-05-19 17:45:55,069 - aiogram.event - INFO - Update id=142691270 is handled. Duration 184 ms by bot id=7498826228
2025-05-19 17:46:00,701 - aiogram.event - INFO - Update id=142691271 is handled. Duration 225 ms by bot id=7498826228
2025-05-19 17:46:15,619 - aiogram.event - INFO - Update id=142691272 is handled. Duration 505 ms by bot id=7498826228
2025-05-19 17:46:21,195 - aiogram.event - INFO - Update id=142691273 is handled. Duration 613 ms by bot id=7498826228
2025-05-19 17:46:23,915 - aiogram.event - INFO - Update id=142691274 is handled. Duration 653 ms by bot id=7498826228
2025-05-19 17:46:26,389 - aiogram.event - INFO - Update id=142691275 is handled. Duration 791 ms by bot id=7498826228
2025-05-19 17:46:57,631 - aiogram.event - INFO - Update id=142691276 is handled. Duration 351 ms by bot id=7498826228
2025-05-19 17:47:00,159 - aiogram.event - INFO - Update id=142691277 is handled. Duration 627 ms by bot id=7498826228
2025-05-19 17:47:05,608 - aiogram.event - INFO - Update id=142691278 is handled. Duration 575 ms by bot id=7498826228
2025-05-19 17:47:07,237 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:07,521 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '�������', 'category': '����������', 'price': 6700, 'description': '������', 'photo': 'AgACAgIAAxkBAAIOhmgrKBfJN76I4PGBF_l7SKspyvisAAL_9DEb3RBZSdxd96OyAwkfAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:47:07,522 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:07,842 - aiogram.event - INFO - Update id=142691279 is handled. Duration 611 ms by bot id=7498826228
2025-05-19 17:47:09,472 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:09,748 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '�������', 'category': '����������', 'price': 6700, 'description': '������', 'photo': 'AgACAgIAAxkBAAIOhmgrKBfJN76I4PGBF_l7SKspyvisAAL_9DEb3RBZSdxd96OyAwkfAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:47:09,749 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:10,053 - aiogram.event - INFO - Update id=142691280 is handled. Duration 587 ms by bot id=7498826228
2025-05-19 17:47:18,745 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:19,026 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6700, 'description': '������', 'photo': 'AgACAgIAAxkBAAIOhmgrKBfJN76I4PGBF_l7SKspyvisAAL_9DEb3RBZSdxd96OyAwkfAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:47:19,027 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:19,237 - aiogram.event - INFO - Update id=142691281 is handled. Duration 784 ms by bot id=7498826228
2025-05-19 17:47:21,422 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:21,695 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6700, 'description': '������', 'photo': 'AgACAgIAAxkBAAIOhmgrKBfJN76I4PGBF_l7SKspyvisAAL_9DEb3RBZSdxd96OyAwkfAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:47:21,696 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:22,025 - aiogram.event - INFO - Update id=142691282 is handled. Duration 610 ms by bot id=7498826228
2025-05-19 17:47:25,139 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:25,412 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '������', 'photo': 'AgACAgIAAxkBAAIOhmgrKBfJN76I4PGBF_l7SKspyvisAAL_9DEb3RBZSdxd96OyAwkfAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:47:25,413 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:25,574 - aiogram.event - INFO - Update id=142691283 is handled. Duration 724 ms by bot id=7498826228
2025-05-19 17:47:27,518 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:27,790 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '������', 'photo': 'AgACAgIAAxkBAAIOhmgrKBfJN76I4PGBF_l7SKspyvisAAL_9DEb3RBZSdxd96OyAwkfAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:47:27,791 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:28,120 - aiogram.event - INFO - Update id=142691284 is handled. Duration 609 ms by bot id=7498826228
2025-05-19 17:47:31,308 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:31,583 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOhmgrKBfJN76I4PGBF_l7SKspyvisAAL_9DEb3RBZSdxd96OyAwkfAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:47:31,584 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:31,771 - aiogram.event - INFO - Update id=142691285 is handled. Duration 751 ms by bot id=7498826228
2025-05-19 17:47:33,646 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:33,920 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOhmgrKBfJN76I4PGBF_l7SKspyvisAAL_9DEb3RBZSdxd96OyAwkfAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:47:33,921 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:34,437 - aiogram.event - INFO - Update id=142691286 is handled. Duration 798 ms by bot id=7498826228
2025-05-19 17:47:47,948 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:48,222 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True}
2025-05-19 17:47:48,223 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:48,428 - aiogram.event - INFO - Update id=142691287 is handled. Duration 767 ms by bot id=7498826228
2025-05-19 17:47:53,120 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:47:53,394 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True}
2025-05-19 17:47:53,395 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:47:53,678 - aiogram.event - INFO - Update id=142691288 is handled. Duration 565 ms by bot id=7498826228
2025-05-19 17:47:55,105 - aiogram.event - INFO - Update id=142691289 is handled. Duration 426 ms by bot id=7498826228
2025-05-19 17:47:56,593 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������
2025-05-19 17:47:56,875 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������
2025-05-19 17:47:57,198 - aiogram.event - INFO - Update id=142691290 is handled. Duration 606 ms by bot id=7498826228
2025-05-19 17:48:02,483 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:48:02,761 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True}
2025-05-19 17:48:02,762 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:48:03,419 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:48:03,667 - aiogram.event - INFO - Update id=142691291 is handled. Duration 1185 ms by bot id=7498826228
2025-05-19 17:48:03,693 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True}
2025-05-19 17:48:03,694 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:48:03,966 - aiogram.event - INFO - Update id=142691292 is handled. Duration 554 ms by bot id=7498826228
2025-05-19 17:48:10,572 - aiogram.event - INFO - Update id=142691293 is handled. Duration 2502 ms by bot id=7498826228
2025-05-19 17:48:11,702 - aiogram.event - INFO - Update id=142691294 is not handled. Duration 141 ms by bot id=7498826228
2025-05-19 17:48:11,702 - aiogram.event - ERROR - Cause exception while process update id=142691294 by bot id=7498826228
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-19 17:48:14,513 - aiogram.event - INFO - Update id=142691295 is handled. Duration 462 ms by bot id=7498826228
2025-05-19 17:48:15,647 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 17:48:15,919 - database.mongodb - INFO - [DEBUG] Found 0 products in category ����
2025-05-19 17:48:16,129 - aiogram.event - INFO - Update id=142691296 is handled. Duration 482 ms by bot id=7498826228
2025-05-19 17:48:17,743 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������
2025-05-19 17:48:18,015 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������
2025-05-19 17:48:18,403 - aiogram.event - INFO - Update id=142691297 is handled. Duration 660 ms by bot id=7498826228
2025-05-19 17:48:19,539 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:48:19,811 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True}
2025-05-19 17:48:19,812 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:48:20,662 - aiogram.event - INFO - Update id=142691298 is handled. Duration 1123 ms by bot id=7498826228
2025-05-19 17:48:27,492 - aiogram.event - INFO - Update id=142691299 is handled. Duration 2261 ms by bot id=7498826228
2025-05-19 17:48:29,838 - aiogram.event - INFO - Update id=142691300 is handled. Duration 201 ms by bot id=7498826228
2025-05-19 17:48:31,557 - aiogram.event - INFO - Update id=142691301 is handled. Duration 610 ms by bot id=7498826228
2025-05-19 17:48:32,906 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:48:33,179 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True}
2025-05-19 17:48:33,180 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:48:33,550 - aiogram.event - INFO - Update id=142691302 is handled. Duration 654 ms by bot id=7498826228
2025-05-19 17:48:34,371 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:48:34,647 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True}
2025-05-19 17:48:34,648 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:48:35,054 - aiogram.event - INFO - Update id=142691303 is handled. Duration 692 ms by bot id=7498826228
2025-05-19 17:48:41,647 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:48:41,916 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True}
2025-05-19 17:48:41,917 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:48:42,363 - aiogram.event - INFO - Update id=142691304 is handled. Duration 725 ms by bot id=7498826228
2025-05-19 17:48:44,940 - aiogram.event - INFO - Update id=142691305 is not handled. Duration 9 ms by bot id=7498826228
2025-05-19 17:48:47,570 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:48:47,846 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 0}]}
2025-05-19 17:48:47,847 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:48:48,157 - aiogram.event - INFO - Update id=142691306 is handled. Duration 595 ms by bot id=7498826228
2025-05-19 17:48:50,221 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:48:50,500 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 0}]}
2025-05-19 17:48:50,501 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:48:50,946 - aiogram.event - INFO - Update id=142691307 is handled. Duration 733 ms by bot id=7498826228
2025-05-19 17:48:55,743 - aiogram.event - INFO - Update id=142691308 is handled. Duration 443 ms by bot id=7498826228
2025-05-19 17:48:56,941 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 17:48:57,218 - database.mongodb - INFO - [DEBUG] Found 0 products in category ����
2025-05-19 17:48:57,441 - aiogram.event - INFO - Update id=142691309 is handled. Duration 500 ms by bot id=7498826228
2025-05-19 17:48:58,766 - aiogram.event - INFO - Update id=142691310 is handled. Duration 435 ms by bot id=7498826228
2025-05-19 17:48:59,090 - aiogram.event - INFO - Update id=142691311 is handled. Duration 445 ms by bot id=7498826228
2025-05-19 17:48:59,855 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������
2025-05-19 17:49:00,150 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������
2025-05-19 17:49:00,459 - aiogram.event - INFO - Update id=142691312 is handled. Duration 603 ms by bot id=7498826228
2025-05-19 17:49:02,710 - aiogram.event - INFO - Update id=142691313 is handled. Duration 603 ms by bot id=7498826228
2025-05-19 17:49:06,290 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:49:06,651 - aiogram.event - INFO - Update id=142691314 is handled. Duration 767 ms by bot id=7498826228
2025-05-19 17:49:07,948 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}]}
2025-05-19 17:49:07,949 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:49:08,268 - aiogram.event - INFO - Update id=142691315 is handled. Duration 1985 ms by bot id=7498826228
2025-05-19 17:49:38,475 - aiogram.event - INFO - Update id=142691316 is handled. Duration 228 ms by bot id=7498826228
2025-05-19 17:49:51,668 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:49:51,941 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}]}
2025-05-19 17:49:51,953 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:49:52,261 - aiogram.event - INFO - Update id=142691317 is handled. Duration 608 ms by bot id=7498826228
2025-05-19 17:49:58,249 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:49:58,518 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}]}
2025-05-19 17:49:58,519 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:49:58,836 - aiogram.event - INFO - Update id=142691318 is handled. Duration 595 ms by bot id=7498826228
2025-05-19 17:50:04,096 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:50:04,368 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}]}
2025-05-19 17:50:04,370 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:50:04,828 - aiogram.event - INFO - Update id=142691319 is handled. Duration 741 ms by bot id=7498826228
2025-05-19 17:50:09,178 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:50:09,463 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:50:09,465 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:50:09,769 - aiogram.event - INFO - Update id=142691320 is handled. Duration 599 ms by bot id=7498826228
2025-05-19 17:50:11,493 - aiogram.event - INFO - Update id=142691321 is handled. Duration 312 ms by bot id=7498826228
2025-05-19 17:50:13,364 - aiogram.event - INFO - Update id=142691322 is handled. Duration 173 ms by bot id=7498826228
2025-05-19 17:50:20,184 - aiogram.event - INFO - Update id=142691323 is handled. Duration 593 ms by bot id=7498826228
2025-05-19 17:50:23,719 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:50:23,991 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:50:23,992 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:50:24,340 - aiogram.event - INFO - Update id=142691324 is handled. Duration 629 ms by bot id=7498826228
2025-05-19 17:50:25,374 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:50:25,653 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:50:25,704 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:50:26,231 - aiogram.event - INFO - Update id=142691325 is handled. Duration 872 ms by bot id=7498826228
2025-05-19 17:50:28,702 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:50:28,968 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:50:28,970 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:50:29,444 - aiogram.event - INFO - Update id=142691326 is handled. Duration 749 ms by bot id=7498826228
2025-05-19 17:50:38,577 - aiogram.event - INFO - Update id=142691327 is handled. Duration 186 ms by bot id=7498826228
2025-05-19 17:50:41,308 - aiogram.event - INFO - Update id=142691328 is handled. Duration 847 ms by bot id=7498826228
2025-05-19 17:50:43,095 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:50:43,371 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:50:43,372 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:50:43,683 - aiogram.event - INFO - Update id=142691329 is handled. Duration 594 ms by bot id=7498826228
2025-05-19 17:50:44,748 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:50:45,017 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:50:45,018 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:50:45,353 - aiogram.event - INFO - Update id=142691330 is handled. Duration 614 ms by bot id=7498826228
2025-05-19 17:50:48,088 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:50:48,359 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:50:48,360 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:50:48,722 - aiogram.event - INFO - Update id=142691331 is handled. Duration 641 ms by bot id=7498826228
2025-05-19 17:50:51,588 - aiogram.event - INFO - Update id=142691332 is handled. Duration 331 ms by bot id=7498826228
2025-05-19 17:50:52,740 - aiogram.event - INFO - Update id=142691333 is handled. Duration 314 ms by bot id=7498826228
2025-05-19 17:50:54,319 - aiogram.event - INFO - Update id=142691334 is handled. Duration 300 ms by bot id=7498826228
2025-05-19 17:50:59,858 - aiogram.event - INFO - Update id=142691335 is handled. Duration 177 ms by bot id=7498826228
2025-05-19 17:51:03,126 - aiogram.event - INFO - Update id=142691336 is handled. Duration 169 ms by bot id=7498826228
2025-05-19 17:51:04,877 - aiogram.event - INFO - Update id=142691337 is handled. Duration 171 ms by bot id=7498826228
2025-05-19 17:51:15,841 - aiogram.event - INFO - Update id=142691338 is handled. Duration 451 ms by bot id=7498826228
2025-05-19 17:51:19,463 - aiogram.event - INFO - Update id=142691339 is handled. Duration 692 ms by bot id=7498826228
2025-05-19 17:51:20,638 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2943ca68159e633a7338
2025-05-19 17:51:20,912 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2943ca68159e633a7338'), 'name': '����', 'category': '����', 'price': 55, 'description': '(:', 'photo': 'AgACAgIAAxkBAAIOvGgrKUODrOlzjBV2Qoz_56bTnxcLAAIF9TEb3RBZSRj53OsERNyFAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:51:20,912 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2943ca68159e633a7338
2025-05-19 17:51:21,392 - aiogram.event - INFO - Update id=142691340 is handled. Duration 763 ms by bot id=7498826228
2025-05-19 17:51:22,180 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2943ca68159e633a7338
2025-05-19 17:51:22,448 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2943ca68159e633a7338'), 'name': '����', 'category': '����', 'price': 55, 'description': '(:', 'photo': 'AgACAgIAAxkBAAIOvGgrKUODrOlzjBV2Qoz_56bTnxcLAAIF9TEb3RBZSRj53OsERNyFAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:51:22,449 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2943ca68159e633a7338
2025-05-19 17:51:23,162 - aiogram.event - INFO - Update id=142691341 is handled. Duration 992 ms by bot id=7498826228
2025-05-19 17:51:30,256 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2943ca68159e633a7338
2025-05-19 17:51:30,536 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2943ca68159e633a7338'), 'name': '����', 'category': '����', 'price': 55, 'description': '(:', 'photo': 'AgACAgIAAxkBAAIOvGgrKUODrOlzjBV2Qoz_56bTnxcLAAIF9TEb3RBZSRj53OsERNyFAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:51:30,537 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2943ca68159e633a7338
2025-05-19 17:51:30,842 - aiogram.event - INFO - Update id=142691342 is handled. Duration 594 ms by bot id=7498826228
2025-05-19 17:51:33,442 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2943ca68159e633a7338
2025-05-19 17:51:33,720 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2943ca68159e633a7338'), 'name': '����', 'category': '����', 'price': 55, 'description': '(:', 'photo': 'AgACAgIAAxkBAAIOvGgrKUODrOlzjBV2Qoz_56bTnxcLAAIF9TEb3RBZSRj53OsERNyFAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:51:33,721 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2943ca68159e633a7338
2025-05-19 17:51:34,048 - aiogram.event - INFO - Update id=142691343 is handled. Duration 616 ms by bot id=7498826228
2025-05-19 17:51:43,808 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2943ca68159e633a7338
2025-05-19 17:51:44,099 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2943ca68159e633a7338'), 'name': '����', 'category': '����', 'price': 55, 'description': '(:', 'photo': 'AgACAgIAAxkBAAIOvGgrKUODrOlzjBV2Qoz_56bTnxcLAAIF9TEb3RBZSRj53OsERNyFAQADAgADeQADNgQ', 'available': True}
2025-05-19 17:51:44,100 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2943ca68159e633a7338
2025-05-19 17:51:44,440 - aiogram.event - INFO - Update id=142691344 is handled. Duration 641 ms by bot id=7498826228
2025-05-19 17:51:45,140 - aiogram.event - INFO - Update id=142691345 is handled. Duration 512 ms by bot id=7498826228
2025-05-19 17:51:46,930 - database.mongodb - INFO - [DEBUG] Getting products for category: ����
2025-05-19 17:51:47,199 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����
2025-05-19 17:51:47,548 - aiogram.event - INFO - Update id=142691346 is handled. Duration 618 ms by bot id=7498826228
2025-05-19 17:51:49,225 - aiogram.event - INFO - Update id=142691347 is handled. Duration 340 ms by bot id=7498826228
2025-05-19 17:51:49,812 - aiogram.event - INFO - Update id=142691348 is handled. Duration 746 ms by bot id=7498826228
2025-05-19 17:51:51,190 - database.mongodb - INFO - [DEBUG] Getting products for category: ����������
2025-05-19 17:51:51,463 - database.mongodb - INFO - [DEBUG] Found 1 products in category ����������
2025-05-19 17:51:51,765 - aiogram.event - INFO - Update id=142691349 is handled. Duration 576 ms by bot id=7498826228
2025-05-19 17:52:05,586 - aiogram.event - INFO - Update id=142691350 is handled. Duration 728 ms by bot id=7498826228
2025-05-19 17:52:10,274 - aiogram.event - INFO - Update id=142691351 is handled. Duration 915 ms by bot id=7498826228
2025-05-19 17:52:10,747 - aiogram.event - INFO - Update id=142691352 is handled. Duration 766 ms by bot id=7498826228
2025-05-19 17:52:13,835 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:52:14,103 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:52:14,104 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:52:14,427 - aiogram.event - INFO - Update id=142691353 is handled. Duration 599 ms by bot id=7498826228
2025-05-19 17:52:41,212 - aiogram.event - INFO - Update id=142691354 is handled. Duration 234 ms by bot id=7498826228
2025-05-19 17:52:44,164 - aiogram.event - INFO - Update id=142691355 is handled. Duration 581 ms by bot id=7498826228
2025-05-19 17:52:45,224 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:52:45,496 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:52:45,497 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:52:45,867 - aiogram.event - INFO - Update id=142691356 is handled. Duration 653 ms by bot id=7498826228
2025-05-19 17:52:47,193 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:52:47,463 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:52:47,464 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:52:47,772 - aiogram.event - INFO - Update id=142691357 is handled. Duration 586 ms by bot id=7498826228
2025-05-19 17:52:48,692 - aiogram.event - INFO - Update id=142691358 is handled. Duration 183 ms by bot id=7498826228
2025-05-19 17:52:50,656 - aiogram.event - INFO - Update id=142691359 is handled. Duration 804 ms by bot id=7498826228
2025-05-19 17:52:52,196 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682af42033472bc085f40fb5
2025-05-19 17:52:52,498 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682af42033472bc085f40fb5'), 'name': 'Waka', 'category': '����������� ����������', 'price': 5000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIMF2gq3Ei4ZvKfyh6t03kmumxMVVYWAAKc8jEb3RBZSWmny-lKhEwpAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '������', 'quantity': 20}]}
2025-05-19 17:52:52,499 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682af42033472bc085f40fb5
2025-05-19 17:52:52,965 - aiogram.event - INFO - Update id=142691360 is handled. Duration 776 ms by bot id=7498826228
2025-05-19 17:58:16,215 - aiogram.dispatcher - INFO - Polling stopped
2025-05-19 17:58:16,477 - aiogram.dispatcher - INFO - Polling stopped for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:58:16,479 - root - INFO - Bot stopped
2025-05-19 17:58:24,325 - __main__ - INFO - Starting bot...
2025-05-19 17:58:24,326 - aiogram.dispatcher - INFO - Start polling
2025-05-19 17:58:24,790 - aiogram.dispatcher - INFO - Run polling for bot @pvl_smoke_shop_snus_bot id=7498826228 - 'pvl_smoke_snus'
2025-05-19 17:58:24,938 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-19 17:58:29,185 - database.mongodb - INFO - Database indexes created successfully
2025-05-19 17:58:29,465 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-19 17:58:30,239 - aiogram.event - INFO - Update id=142691361 is handled. Duration 5301 ms by bot id=7498826228
2025-05-19 17:58:40,546 - aiogram.event - INFO - Update id=142691362 is not handled. Duration 10 ms by bot id=7498826228
2025-05-19 17:58:45,639 - aiogram.event - INFO - Update id=142691363 is not handled. Duration 12 ms by bot id=7498826228
2025-05-19 17:58:50,447 - aiogram.event - INFO - Update id=142691364 is handled. Duration 171 ms by bot id=7498826228
2025-05-19 17:58:53,730 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-19 17:58:53,940 - aiogram.event - INFO - Update id=142691365 is handled. Duration 216 ms by bot id=7498826228
2025-05-19 17:58:55,852 - aiogram.event - INFO - Update id=142691366 is handled. Duration 251 ms by bot id=7498826228
2025-05-19 17:59:01,289 - aiogram.event - INFO - Update id=142691367 is handled. Duration 774 ms by bot id=7498826228
2025-05-19 17:59:02,239 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:59:02,523 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:59:02,525 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:59:02,912 - aiogram.event - INFO - Update id=142691368 is handled. Duration 681 ms by bot id=7498826228
2025-05-19 17:59:06,840 - aiogram.event - INFO - Update id=142691369 is handled. Duration 319 ms by bot id=7498826228
2025-05-19 17:59:08,386 - aiogram.event - INFO - Update id=142691370 is handled. Duration 590 ms by bot id=7498826228
2025-05-19 17:59:09,548 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682b2817ca68159e633a7337
2025-05-19 17:59:09,825 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682b2817ca68159e633a7337'), 'name': '������', 'category': '����������', 'price': 6000, 'description': '0', 'photo': 'AgACAgIAAxkBAAIOkGgrKHPpq4-0zVObBsZSp6kdNdDuAAIB9TEb3RBZSRmZdL796nziAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '�����', 'quantity': 5}, {'name': '5', 'quantity': 0}]}
2025-05-19 17:59:09,826 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682b2817ca68159e633a7337
2025-05-19 17:59:10,146 - aiogram.event - INFO - Update id=142691371 is handled. Duration 609 ms by bot id=7498826228
2025-05-20 13:23:19,870 - __main__ - INFO - Starting bot...
2025-05-20 13:23:19,873 - aiogram.dispatcher - INFO - Start polling
2025-05-20 13:23:23,400 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:23:52,532 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:80GzjNw6M5QNrmZU@tgbot.wxvogfb.mongodb.net/?retryWrites=true&w=majority&appName=tgbot
2025-05-20 13:23:57,490 - database.mongodb - INFO - Database indexes created successfully
2025-05-20 13:23:57,778 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-20 13:23:58,618 - aiogram.event - INFO - Update id=762233613 is handled. Duration 6087 ms by bot id=7849840849
2025-05-20 13:24:02,123 - aiogram.event - INFO - Update id=762233614 is handled. Duration 450 ms by bot id=7849840849
2025-05-20 13:24:03,864 - aiogram.event - INFO - Update id=762233615 is handled. Duration 565 ms by bot id=7849840849
2025-05-20 13:24:04,936 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:24:05,230 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-20 13:24:06,189 - aiogram.event - INFO - Update id=762233616 is handled. Duration 1255 ms by bot id=7849840849
2025-05-20 13:24:16,668 - aiogram.event - INFO - Update id=762233617 is handled. Duration 440 ms by bot id=7849840849
2025-05-20 13:24:29,257 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:24:29,545 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-20 13:24:30,309 - aiogram.event - INFO - Update id=762233618 is handled. Duration 1052 ms by bot id=7849840849
2025-05-20 13:24:44,033 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-20 13:24:44,325 - database.mongodb - INFO - [DEBUG] Found 4 products in category 
2025-05-20 13:24:46,163 - aiogram.event - INFO - Update id=762233619 is handled. Duration 2130 ms by bot id=7849840849
2025-05-20 13:25:27,895 - aiogram.dispatcher - INFO - Polling stopped
2025-05-20 13:25:28,157 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:25:28,159 - root - INFO - Bot stopped
2025-05-20 13:25:35,008 - __main__ - INFO - Starting bot...
2025-05-20 13:25:35,010 - aiogram.dispatcher - INFO - Start polling
2025-05-20 13:25:35,425 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:25:35,566 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-20 13:25:39,177 - database.mongodb - INFO - Database indexes created successfully
2025-05-20 13:25:39,619 - database.mongodb - INFO - Initialized default sleep mode settings
2025-05-20 13:25:39,620 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-20 13:25:40,292 - aiogram.event - INFO - Update id=762233620 is handled. Duration 4726 ms by bot id=7849840849
2025-05-20 13:25:40,674 - aiogram.event - INFO - Update id=762233621 is handled. Duration 396 ms by bot id=7849840849
2025-05-20 13:25:43,587 - aiogram.event - INFO - Update id=762233622 is handled. Duration 395 ms by bot id=7849840849
2025-05-20 13:25:44,128 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:25:44,353 - database.mongodb - INFO - [DEBUG] Found 0 products in category  
2025-05-20 13:25:44,515 - aiogram.event - INFO - Update id=762233623 is handled. Duration 388 ms by bot id=7849840849
2025-05-20 13:25:44,607 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:25:44,825 - database.mongodb - INFO - [DEBUG] Found 0 products in category  
2025-05-20 13:25:44,993 - aiogram.event - INFO - Update id=762233624 is handled. Duration 387 ms by bot id=7849840849
2025-05-20 13:25:46,364 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-20 13:25:46,576 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-20 13:25:46,777 - aiogram.event - INFO - Update id=762233625 is handled. Duration 412 ms by bot id=7849840849
2025-05-20 13:25:46,992 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-20 13:25:47,208 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-20 13:25:47,454 - aiogram.event - INFO - Update id=762233626 is handled. Duration 462 ms by bot id=7849840849
2025-05-20 13:25:47,705 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-20 13:25:47,924 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-20 13:25:48,167 - aiogram.event - INFO - Update id=762233627 is handled. Duration 462 ms by bot id=7849840849
2025-05-20 13:26:02,081 - aiogram.event - INFO - Update id=762233628 is handled. Duration 230 ms by bot id=7849840849
2025-05-20 13:26:08,823 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-20 13:26:09,025 - aiogram.event - INFO - Update id=762233629 is handled. Duration 206 ms by bot id=7849840849
2025-05-20 13:26:11,713 - aiogram.event - INFO - Update id=762233630 is handled. Duration 236 ms by bot id=7849840849
2025-05-20 13:26:13,324 - aiogram.event - INFO - Update id=762233631 is handled. Duration 416 ms by bot id=7849840849
2025-05-20 13:26:14,549 - aiogram.event - INFO - Update id=762233632 is handled. Duration 463 ms by bot id=7849840849
2025-05-20 13:26:22,452 - aiogram.event - INFO - Update id=762233633 is handled. Duration 174 ms by bot id=7849840849
2025-05-20 13:26:27,569 - aiogram.event - INFO - Update id=762233634 is handled. Duration 189 ms by bot id=7849840849
2025-05-20 13:26:29,280 - aiogram.event - INFO - Update id=762233635 is handled. Duration 417 ms by bot id=7849840849
2025-05-20 13:26:30,774 - aiogram.event - INFO - Update id=762233636 is handled. Duration 391 ms by bot id=7849840849
2025-05-20 13:26:35,538 - aiogram.event - INFO - Update id=762233637 is handled. Duration 164 ms by bot id=7849840849
2025-05-20 13:26:39,945 - aiogram.event - INFO - Update id=762233638 is handled. Duration 166 ms by bot id=7849840849
2025-05-20 13:26:42,658 - aiogram.event - INFO - Update id=762233639 is handled. Duration 187 ms by bot id=7849840849
2025-05-20 13:26:55,477 - aiogram.event - INFO - Update id=762233640 is handled. Duration 395 ms by bot id=7849840849
2025-05-20 13:27:04,774 - aiogram.event - INFO - Update id=762233641 is handled. Duration 559 ms by bot id=7849840849
2025-05-20 13:27:06,259 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:06,472 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True}
2025-05-20 13:27:06,473 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:06,768 - aiogram.event - INFO - Update id=762233642 is handled. Duration 520 ms by bot id=7849840849
2025-05-20 13:27:07,429 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:07,644 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True}
2025-05-20 13:27:07,645 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:08,084 - aiogram.event - INFO - Update id=762233643 is handled. Duration 665 ms by bot id=7849840849
2025-05-20 13:27:32,181 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:32,392 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True}
2025-05-20 13:27:32,393 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:32,756 - aiogram.event - INFO - Update id=762233644 is handled. Duration 607 ms by bot id=7849840849
2025-05-20 13:27:34,479 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:34,684 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-20 13:27:34,686 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:35,207 - aiogram.event - INFO - Update id=762233645 is handled. Duration 735 ms by bot id=7849840849
2025-05-20 13:27:39,710 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:39,923 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': []}
2025-05-20 13:27:39,924 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:40,259 - aiogram.event - INFO - Update id=762233646 is handled. Duration 557 ms by bot id=7849840849
2025-05-20 13:27:45,775 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:45,989 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': []}
2025-05-20 13:27:45,990 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:46,406 - aiogram.event - INFO - Update id=762233647 is handled. Duration 638 ms by bot id=7849840849
2025-05-20 13:27:48,161 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:48,403 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-20 13:27:48,404 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:48,705 - aiogram.event - INFO - Update id=762233648 is handled. Duration 551 ms by bot id=7849840849
2025-05-20 13:27:53,599 - aiogram.event - INFO - Update id=762233649 is handled. Duration 180 ms by bot id=7849840849
2025-05-20 13:27:59,253 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:59,465 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-20 13:27:59,466 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:27:59,872 - aiogram.event - INFO - Update id=762233650 is handled. Duration 629 ms by bot id=7849840849
2025-05-20 13:28:02,233 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:02,447 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-20 13:28:02,448 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:02,760 - aiogram.event - INFO - Update id=762233651 is handled. Duration 537 ms by bot id=7849840849
2025-05-20 13:28:09,003 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:28:09,154 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:09,225 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:28:09,706 - aiogram.event - INFO - Update id=762233652 is handled. Duration 703 ms by bot id=7849840849
2025-05-20 13:28:10,602 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-20 13:28:10,603 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:11,057 - aiogram.event - INFO - Update id=762233653 is handled. Duration 1910 ms by bot id=7849840849
2025-05-20 13:28:12,484 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:12,717 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:28:12,718 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:13,276 - aiogram.event - INFO - Update id=762233654 is handled. Duration 802 ms by bot id=7849840849
2025-05-20 13:28:14,558 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:14,790 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:28:14,791 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:15,218 - aiogram.event - INFO - Update id=762233655 is handled. Duration 670 ms by bot id=7849840849
2025-05-20 13:28:17,070 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:17,295 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '1', 'quantity': 0}]}
2025-05-20 13:28:17,297 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:17,676 - aiogram.event - INFO - Update id=762233656 is handled. Duration 618 ms by bot id=7849840849
2025-05-20 13:28:18,708 - aiogram.event - INFO - Update id=762233657 is handled. Duration 492 ms by bot id=7849840849
2025-05-20 13:28:19,867 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:28:20,096 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:28:20,415 - aiogram.event - INFO - Update id=762233658 is handled. Duration 548 ms by bot id=7849840849
2025-05-20 13:28:25,268 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:25,505 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '1', 'quantity': 0}]}
2025-05-20 13:28:25,506 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:25,953 - aiogram.event - INFO - Update id=762233659 is handled. Duration 696 ms by bot id=7849840849
2025-05-20 13:28:27,642 - aiogram.event - INFO - Update id=762233660 is handled. Duration 404 ms by bot id=7849840849
2025-05-20 13:28:27,731 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:27,964 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '1', 'quantity': 0}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:28:27,965 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:28,316 - aiogram.event - INFO - Update id=762233661 is handled. Duration 595 ms by bot id=7849840849
2025-05-20 13:28:29,237 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:28:29,473 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:28:29,769 - aiogram.event - INFO - Update id=762233662 is handled. Duration 532 ms by bot id=7849840849
2025-05-20 13:28:30,080 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:30,312 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '1', 'quantity': 0}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:28:30,314 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:30,474 - aiogram.event - INFO - Update id=762233663 is handled. Duration 405 ms by bot id=7849840849
2025-05-20 13:28:32,033 - aiogram.event - INFO - Update id=762233664 is handled. Duration 492 ms by bot id=7849840849
2025-05-20 13:28:39,094 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:39,333 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '1', 'quantity': 0}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:28:39,335 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:39,752 - aiogram.event - INFO - Update id=762233665 is handled. Duration 667 ms by bot id=7849840849
2025-05-20 13:28:51,783 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:52,013 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '1', 'quantity': 0}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:28:52,015 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:52,561 - aiogram.event - INFO - Update id=762233666 is handled. Duration 786 ms by bot id=7849840849
2025-05-20 13:28:57,790 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:58,023 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:28:58,024 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:28:58,484 - aiogram.event - INFO - Update id=762233667 is handled. Duration 704 ms by bot id=7849840849
2025-05-20 13:29:00,511 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:00,746 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:29:00,747 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:01,259 - aiogram.event - INFO - Update id=762233668 is handled. Duration 764 ms by bot id=7849840849
2025-05-20 13:29:04,125 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:04,354 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:29:04,356 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:04,716 - aiogram.event - INFO - Update id=762233669 is handled. Duration 601 ms by bot id=7849840849
2025-05-20 13:29:05,860 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:06,094 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:29:06,095 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:06,569 - aiogram.event - INFO - Update id=762233670 is handled. Duration 720 ms by bot id=7849840849
2025-05-20 13:29:09,128 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:09,363 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:29:09,364 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:09,682 - aiogram.event - INFO - Update id=762233671 is handled. Duration 562 ms by bot id=7849840849
2025-05-20 13:29:17,525 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:17,763 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:29:17,765 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:18,189 - aiogram.event - INFO - Update id=762233672 is handled. Duration 675 ms by bot id=7849840849
2025-05-20 13:29:20,557 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:20,794 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:29:20,796 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:21,164 - aiogram.event - INFO - Update id=762233673 is handled. Duration 616 ms by bot id=7849840849
2025-05-20 13:29:22,325 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:22,555 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:29:22,557 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:23,111 - aiogram.event - INFO - Update id=762233674 is handled. Duration 792 ms by bot id=7849840849
2025-05-20 13:29:24,381 - aiogram.event - INFO - Update id=762233675 is handled. Duration 396 ms by bot id=7849840849
2025-05-20 13:29:24,394 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:24,630 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:29:24,632 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:24,933 - aiogram.event - INFO - Update id=762233676 is handled. Duration 547 ms by bot id=7849840849
2025-05-20 13:29:25,838 - aiogram.event - INFO - Update id=762233677 is handled. Duration 383 ms by bot id=7849840849
2025-05-20 13:29:26,954 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:29:27,198 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:29:27,656 - aiogram.event - INFO - Update id=762233678 is handled. Duration 702 ms by bot id=7849840849
2025-05-20 13:29:45,894 - aiogram.event - INFO - Update id=762233679 is handled. Duration 312 ms by bot id=7849840849
2025-05-20 13:29:48,604 - aiogram.event - INFO - Update id=762233680 is handled. Duration 539 ms by bot id=7849840849
2025-05-20 13:29:49,824 - aiogram.event - INFO - Update id=762233681 is handled. Duration 363 ms by bot id=7849840849
2025-05-20 13:29:50,929 - aiogram.event - INFO - Update id=762233682 is handled. Duration 632 ms by bot id=7849840849
2025-05-20 13:29:52,058 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:52,292 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:29:52,294 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:52,758 - aiogram.event - INFO - Update id=762233683 is handled. Duration 708 ms by bot id=7849840849
2025-05-20 13:29:53,836 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:54,066 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:29:54,068 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:29:54,613 - aiogram.event - INFO - Update id=762233684 is handled. Duration 786 ms by bot id=7849840849
2025-05-20 13:29:56,807 - aiogram.event - INFO - Update id=762233685 is handled. Duration 390 ms by bot id=7849840849
2025-05-20 13:29:58,675 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:29:58,912 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:29:59,490 - aiogram.event - INFO - Update id=762233686 is handled. Duration 814 ms by bot id=7849840849
2025-05-20 13:30:06,993 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:07,232 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:30:07,234 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:07,785 - aiogram.event - INFO - Update id=762233687 is handled. Duration 800 ms by bot id=7849840849
2025-05-20 13:30:10,758 - aiogram.event - INFO - Update id=762233688 is handled. Duration 396 ms by bot id=7849840849
2025-05-20 13:30:11,881 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:30:12,117 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:30:12,904 - aiogram.event - INFO - Update id=762233689 is handled. Duration 1023 ms by bot id=7849840849
2025-05-20 13:30:17,114 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:17,344 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:30:17,345 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:17,929 - aiogram.event - INFO - Update id=762233690 is handled. Duration 825 ms by bot id=7849840849
2025-05-20 13:30:22,475 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:22,706 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': ' ', 'quantity': 1}]}
2025-05-20 13:30:22,707 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:23,456 - aiogram.event - INFO - Update id=762233691 is handled. Duration 990 ms by bot id=7849840849
2025-05-20 13:30:31,034 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:31,272 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': []}
2025-05-20 13:30:31,273 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:31,624 - aiogram.event - INFO - Update id=762233692 is handled. Duration 599 ms by bot id=7849840849
2025-05-20 13:30:36,736 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:36,973 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': []}
2025-05-20 13:30:36,974 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:37,388 - aiogram.event - INFO - Update id=762233693 is handled. Duration 658 ms by bot id=7849840849
2025-05-20 13:30:40,584 - aiogram.event - INFO - Update id=762233694 is handled. Duration 462 ms by bot id=7849840849
2025-05-20 13:30:41,822 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:30:42,056 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:30:42,656 - aiogram.event - INFO - Update id=762233695 is handled. Duration 834 ms by bot id=7849840849
2025-05-20 13:30:44,342 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:44,575 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-20 13:30:44,576 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:45,197 - aiogram.event - INFO - Update id=762233696 is handled. Duration 864 ms by bot id=7849840849
2025-05-20 13:30:46,894 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:47,126 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-20 13:30:47,128 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:47,428 - aiogram.event - INFO - Update id=762233698 is handled. Duration 409 ms by bot id=7849840849
2025-05-20 13:30:47,795 - aiogram.event - INFO - Update id=762233697 is handled. Duration 911 ms by bot id=7849840849
2025-05-20 13:30:48,548 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:30:48,782 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:30:49,164 - aiogram.event - INFO - Update id=762233699 is handled. Duration 617 ms by bot id=7849840849
2025-05-20 13:30:52,310 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:52,543 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-20 13:30:52,545 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:30:52,863 - aiogram.event - INFO - Update id=762233701 is handled. Duration 430 ms by bot id=7849840849
2025-05-20 13:30:52,955 - aiogram.event - INFO - Update id=762233700 is handled. Duration 654 ms by bot id=7849840849
2025-05-20 13:31:05,327 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:31:05,541 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:31:05,912 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:31:06,027 - aiogram.event - INFO - Update id=762233702 is handled. Duration 700 ms by bot id=7849840849
2025-05-20 13:31:06,127 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-20 13:31:06,129 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:31:06,575 - aiogram.event - INFO - Update id=762233703 is handled. Duration 671 ms by bot id=7849840849
2025-05-20 13:31:06,692 - aiogram.event - INFO - Update id=762233704 is handled. Duration 420 ms by bot id=7849840849
2025-05-20 13:31:08,024 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:31:08,262 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:31:08,565 - aiogram.event - INFO - Update id=762233705 is handled. Duration 541 ms by bot id=7849840849
2025-05-20 13:31:09,387 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:31:09,621 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:31:09,622 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:31:09,968 - aiogram.event - INFO - Update id=762233706 is handled. Duration 592 ms by bot id=7849840849
2025-05-20 13:31:10,782 - aiogram.event - INFO - Update id=762233707 is handled. Duration 446 ms by bot id=7849840849
2025-05-20 13:31:11,443 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:31:11,670 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:31:11,671 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:31:12,104 - aiogram.event - INFO - Update id=762233708 is handled. Duration 670 ms by bot id=7849840849
2025-05-20 13:31:12,184 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:31:12,431 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:31:12,790 - aiogram.event - INFO - Update id=762233709 is handled. Duration 606 ms by bot id=7849840849
2025-05-20 13:31:17,044 - aiogram.event - INFO - Update id=762233710 is handled. Duration 447 ms by bot id=7849840849
2025-05-20 13:31:18,376 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:31:18,611 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:31:19,086 - aiogram.event - INFO - Update id=762233711 is handled. Duration 711 ms by bot id=7849840849
2025-05-20 13:31:52,151 - aiogram.event - INFO - Update id=762233712 is handled. Duration 439 ms by bot id=7849840849
2025-05-20 13:32:28,326 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:28,561 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:32:28,562 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:28,847 - aiogram.event - INFO - Update id=762233713 is handled. Duration 531 ms by bot id=7849840849
2025-05-20 13:32:31,384 - aiogram.event - INFO - Update id=762233714 is handled. Duration 403 ms by bot id=7849840849
2025-05-20 13:32:32,337 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:32:32,570 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:32:32,962 - aiogram.event - INFO - Update id=762233715 is handled. Duration 625 ms by bot id=7849840849
2025-05-20 13:32:34,428 - aiogram.event - INFO - Update id=762233716 is handled. Duration 435 ms by bot id=7849840849
2025-05-20 13:32:35,049 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:35,284 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:32:35,286 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:35,599 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:32:35,704 - aiogram.event - INFO - Update id=762233717 is handled. Duration 663 ms by bot id=7849840849
2025-05-20 13:32:35,828 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:32:36,154 - aiogram.event - INFO - Update id=762233718 is handled. Duration 555 ms by bot id=7849840849
2025-05-20 13:32:37,326 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:37,553 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:32:37,554 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:37,632 - aiogram.event - INFO - Update id=762233719 is handled. Duration 458 ms by bot id=7849840849
2025-05-20 13:32:38,096 - aiogram.event - INFO - Update id=762233720 is handled. Duration 782 ms by bot id=7849840849
2025-05-20 13:32:38,763 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:32:38,977 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:32:39,317 - aiogram.event - INFO - Update id=762233721 is handled. Duration 555 ms by bot id=7849840849
2025-05-20 13:32:40,524 - aiogram.event - INFO - Update id=762233722 is handled. Duration 213 ms by bot id=7849840849
2025-05-20 13:32:42,044 - aiogram.event - INFO - Update id=762233723 is handled. Duration 620 ms by bot id=7849840849
2025-05-20 13:32:42,899 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:43,108 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:32:43,110 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:43,399 - aiogram.event - INFO - Update id=762233724 is handled. Duration 507 ms by bot id=7849840849
2025-05-20 13:32:44,168 - aiogram.event - INFO - Update id=762233725 is handled. Duration 449 ms by bot id=7849840849
2025-05-20 13:32:45,305 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:32:45,526 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:32:45,887 - aiogram.event - INFO - Update id=762233726 is handled. Duration 583 ms by bot id=7849840849
2025-05-20 13:32:46,573 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:46,786 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:32:46,788 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:47,111 - aiogram.event - INFO - Update id=762233727 is handled. Duration 549 ms by bot id=7849840849
2025-05-20 13:32:47,764 - aiogram.event - INFO - Update id=762233728 is handled. Duration 379 ms by bot id=7849840849
2025-05-20 13:32:48,824 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:32:48,961 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:49,040 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:32:49,195 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:32:49,196 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:32:49,458 - aiogram.event - INFO - Update id=762233729 is handled. Duration 635 ms by bot id=7849840849
2025-05-20 13:32:49,691 - aiogram.event - INFO - Update id=762233730 is handled. Duration 737 ms by bot id=7849840849
2025-05-20 13:32:50,814 - aiogram.event - INFO - Update id=762233731 is handled. Duration 390 ms by bot id=7849840849
2025-05-20 13:32:51,925 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:32:52,155 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:32:52,596 - aiogram.event - INFO - Update id=762233732 is handled. Duration 672 ms by bot id=7849840849
2025-05-20 13:33:16,475 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:33:16,721 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:33:17,192 - aiogram.event - INFO - Update id=762233733 is handled. Duration 718 ms by bot id=7849840849
2025-05-20 13:33:27,880 - aiogram.event - INFO - Update id=762233734 is handled. Duration 429 ms by bot id=7849840849
2025-05-20 13:34:13,504 - aiogram.event - INFO - Update id=762233735 is handled. Duration 398 ms by bot id=7849840849
2025-05-20 13:34:56,326 - aiogram.event - INFO - Update id=762233736 is handled. Duration 388 ms by bot id=7849840849
2025-05-20 13:34:58,354 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:34:58,589 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:34:59,022 - aiogram.event - INFO - Update id=762233737 is handled. Duration 667 ms by bot id=7849840849
2025-05-20 13:38:26,475 - aiogram.dispatcher - INFO - Polling stopped
2025-05-20 13:38:26,741 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:38:26,743 - root - INFO - Bot stopped
2025-05-20 13:38:34,194 - __main__ - INFO - Starting bot...
2025-05-20 13:38:34,199 - aiogram.dispatcher - INFO - Start polling
2025-05-20 13:38:34,632 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:39:04,189 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-20 13:39:07,767 - database.mongodb - INFO - Database indexes created successfully
2025-05-20 13:39:07,967 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-20 13:39:08,639 - aiogram.event - INFO - Update id=762233738 is handled. Duration 4451 ms by bot id=7849840849
2025-05-20 13:39:10,304 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:39:10,510 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:39:10,924 - aiogram.event - INFO - Update id=762233739 is handled. Duration 620 ms by bot id=7849840849
2025-05-20 13:39:15,985 - aiogram.event - INFO - Update id=762233740 is handled. Duration 460 ms by bot id=7849840849
2025-05-20 13:39:17,449 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-20 13:39:17,648 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-20 13:39:17,801 - aiogram.event - INFO - Update id=762233741 is handled. Duration 352 ms by bot id=7849840849
2025-05-20 13:39:20,660 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:39:20,861 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:39:21,185 - aiogram.event - INFO - Update id=762233742 is handled. Duration 525 ms by bot id=7849840849
2025-05-20 13:39:22,158 - handlers.admin_handlers - WARNING - Admin access denied for user 1088067370
2025-05-20 13:39:22,294 - aiogram.event - INFO - Update id=762233743 is handled. Duration 145 ms by bot id=7849840849
2025-05-20 13:39:30,171 - handlers.admin_handlers - WARNING - Admin access denied for user 1088067370
2025-05-20 13:39:30,375 - aiogram.event - INFO - Update id=762233744 is handled. Duration 214 ms by bot id=7849840849
2025-05-20 13:39:41,426 - aiogram.event - INFO - Update id=762233745 is handled. Duration 225 ms by bot id=7849840849
2025-05-20 13:39:45,400 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-20 13:39:45,573 - aiogram.event - INFO - Update id=762233746 is handled. Duration 176 ms by bot id=7849840849
2025-05-20 13:39:48,666 - aiogram.event - INFO - Update id=762233747 is handled. Duration 201 ms by bot id=7849840849
2025-05-20 13:39:50,814 - aiogram.event - INFO - Update id=762233748 is handled. Duration 574 ms by bot id=7849840849
2025-05-20 13:39:51,887 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:39:52,087 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:39:52,088 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:39:52,477 - aiogram.event - INFO - Update id=762233749 is handled. Duration 599 ms by bot id=7849840849
2025-05-20 13:40:16,571 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:16,770 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:40:16,772 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:17,112 - aiogram.event - INFO - Update id=762233750 is handled. Duration 555 ms by bot id=7849840849
2025-05-20 13:40:19,604 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:19,804 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:40:19,806 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:20,252 - aiogram.event - INFO - Update id=762233751 is handled. Duration 676 ms by bot id=7849840849
2025-05-20 13:40:21,582 - aiogram.event - INFO - Update id=762233752 is handled. Duration 425 ms by bot id=7849840849
2025-05-20 13:40:22,901 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:40:23,100 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:40:23,448 - aiogram.event - INFO - Update id=762233753 is handled. Duration 547 ms by bot id=7849840849
2025-05-20 13:40:23,589 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:23,787 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:40:23,789 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:24,176 - aiogram.event - INFO - Update id=762233754 is handled. Duration 597 ms by bot id=7849840849
2025-05-20 13:40:24,922 - aiogram.event - INFO - Update id=762233755 is handled. Duration 362 ms by bot id=7849840849
2025-05-20 13:40:25,864 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:26,075 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:40:26,077 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:26,115 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:40:26,493 - aiogram.event - INFO - Update id=762233756 is handled. Duration 646 ms by bot id=7849840849
2025-05-20 13:40:27,524 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:40:27,912 - aiogram.event - INFO - Update id=762233757 is handled. Duration 1798 ms by bot id=7849840849
2025-05-20 13:40:54,810 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:55,028 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:40:55,030 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:55,358 - aiogram.event - INFO - Update id=762233758 is handled. Duration 559 ms by bot id=7849840849
2025-05-20 13:40:57,217 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:57,448 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:40:57,449 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:40:57,864 - aiogram.event - INFO - Update id=762233759 is handled. Duration 661 ms by bot id=7849840849
2025-05-20 13:40:59,096 - aiogram.event - INFO - Update id=762233760 is handled. Duration 1231 ms by bot id=7849840849
2025-05-20 13:41:00,012 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:41:00,246 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:41:00,545 - aiogram.event - INFO - Update id=762233761 is handled. Duration 532 ms by bot id=7849840849
2025-05-20 13:41:00,572 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:00,792 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 0}]}
2025-05-20 13:41:00,797 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:01,162 - aiogram.event - INFO - Update id=762233762 is handled. Duration 601 ms by bot id=7849840849
2025-05-20 13:41:03,294 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:03,516 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 0}]}
2025-05-20 13:41:03,517 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:03,976 - aiogram.event - INFO - Update id=762233763 is handled. Duration 732 ms by bot id=7849840849
2025-05-20 13:41:05,837 - aiogram.event - INFO - Update id=762233764 is handled. Duration 435 ms by bot id=7849840849
2025-05-20 13:41:08,033 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:41:08,254 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:41:08,687 - aiogram.event - INFO - Update id=762233765 is handled. Duration 655 ms by bot id=7849840849
2025-05-20 13:41:32,891 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:33,113 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}]}
2025-05-20 13:41:33,115 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:33,467 - aiogram.event - INFO - Update id=762233766 is handled. Duration 584 ms by bot id=7849840849
2025-05-20 13:41:35,641 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:35,865 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}]}
2025-05-20 13:41:35,867 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:36,274 - aiogram.event - INFO - Update id=762233767 is handled. Duration 640 ms by bot id=7849840849
2025-05-20 13:41:39,207 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:39,440 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:41:39,442 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:39,799 - aiogram.event - INFO - Update id=762233768 is handled. Duration 599 ms by bot id=7849840849
2025-05-20 13:41:41,404 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:41,621 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 0}]}
2025-05-20 13:41:41,623 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:41:42,035 - aiogram.event - INFO - Update id=762233769 is handled. Duration 642 ms by bot id=7849840849
2025-05-20 13:41:56,552 - aiogram.event - INFO - Update id=762233770 is handled. Duration 369 ms by bot id=7849840849
2025-05-20 13:41:57,669 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:41:57,899 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:41:58,301 - aiogram.event - INFO - Update id=762233771 is handled. Duration 632 ms by bot id=7849840849
2025-05-20 13:42:08,728 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:08,943 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:42:08,945 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:09,280 - aiogram.event - INFO - Update id=762233772 is handled. Duration 562 ms by bot id=7849840849
2025-05-20 13:42:30,925 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:31,145 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}]}
2025-05-20 13:42:31,147 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:31,537 - aiogram.event - INFO - Update id=762233773 is handled. Duration 621 ms by bot id=7849840849
2025-05-20 13:42:33,719 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:33,942 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 0}]}
2025-05-20 13:42:33,943 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:34,302 - aiogram.event - INFO - Update id=762233774 is handled. Duration 591 ms by bot id=7849840849
2025-05-20 13:42:35,570 - aiogram.event - INFO - Update id=762233775 is handled. Duration 421 ms by bot id=7849840849
2025-05-20 13:42:35,820 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:36,046 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 0}]}
2025-05-20 13:42:36,048 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:36,490 - aiogram.event - INFO - Update id=762233776 is handled. Duration 689 ms by bot id=7849840849
2025-05-20 13:42:37,209 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:42:37,435 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:42:37,745 - aiogram.event - INFO - Update id=762233777 is handled. Duration 536 ms by bot id=7849840849
2025-05-20 13:42:40,508 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:40,729 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}]}
2025-05-20 13:42:40,731 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:41,105 - aiogram.event - INFO - Update id=762233778 is handled. Duration 607 ms by bot id=7849840849
2025-05-20 13:42:44,736 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:44,965 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}]}
2025-05-20 13:42:44,966 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:45,398 - aiogram.event - INFO - Update id=762233779 is handled. Duration 679 ms by bot id=7849840849
2025-05-20 13:42:49,329 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:49,551 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 0}]}
2025-05-20 13:42:49,555 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:49,920 - aiogram.event - INFO - Update id=762233780 is handled. Duration 599 ms by bot id=7849840849
2025-05-20 13:42:52,563 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:52,793 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 0}]}
2025-05-20 13:42:52,795 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:42:53,288 - aiogram.event - INFO - Update id=762233781 is handled. Duration 733 ms by bot id=7849840849
2025-05-20 13:42:54,362 - aiogram.event - INFO - Update id=762233782 is handled. Duration 399 ms by bot id=7849840849
2025-05-20 13:42:55,358 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:42:55,606 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:42:55,977 - aiogram.event - INFO - Update id=762233783 is handled. Duration 619 ms by bot id=7849840849
2025-05-20 13:43:00,578 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-20 13:43:00,578 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:00,805 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:43:00,807 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:01,251 - handlers.user_handlers - INFO - Created new user: 531632690
2025-05-20 13:43:01,913 - aiogram.event - INFO - Update id=762233784 is handled. Duration 1336 ms by bot id=7849840849
2025-05-20 13:43:05,660 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:05,892 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:43:05,894 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:06,087 - aiogram.event - INFO - Update id=762233785 is handled. Duration 660 ms by bot id=7849840849
2025-05-20 13:43:08,304 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:08,525 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:43:08,527 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:08,718 - aiogram.event - INFO - Update id=762233786 is handled. Duration 641 ms by bot id=7849840849
2025-05-20 13:43:10,010 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:10,235 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:43:10,237 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:10,574 - aiogram.event - INFO - Update id=762233787 is handled. Duration 1015 ms by bot id=7849840849
2025-05-20 13:43:19,435 - aiogram.event - INFO - Update id=762233788 is handled. Duration 159 ms by bot id=7849840849
2025-05-20 13:43:40,262 - aiogram.event - INFO - Update id=762233789 is handled. Duration 305 ms by bot id=7849840849
2025-05-20 13:43:42,858 - aiogram.event - INFO - Update id=762233790 is handled. Duration 501 ms by bot id=7849840849
2025-05-20 13:43:49,386 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:49,605 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:43:49,607 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:43:50,617 - aiogram.event - INFO - Update id=762233791 is handled. Duration 1693 ms by bot id=7849840849
2025-05-20 13:43:55,843 - aiogram.event - INFO - Update id=762233792 is handled. Duration 429 ms by bot id=7849840849
2025-05-20 13:44:02,597 - aiogram.event - INFO - Update id=762233793 is handled. Duration 1102 ms by bot id=7849840849
2025-05-20 13:44:05,332 - aiogram.event - INFO - Update id=762233794 is handled. Duration 430 ms by bot id=7849840849
2025-05-20 13:44:06,776 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:44:07,004 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:44:07,540 - aiogram.event - INFO - Update id=762233795 is handled. Duration 764 ms by bot id=7849840849
2025-05-20 13:44:57,400 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-20 13:44:57,400 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:44:57,624 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:44:57,626 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:44:58,392 - aiogram.event - INFO - Update id=762233796 is handled. Duration 993 ms by bot id=7849840849
2025-05-20 13:45:06,059 - aiogram.event - INFO - Update id=762233797 is handled. Duration 764 ms by bot id=7849840849
2025-05-20 13:45:09,306 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-20 13:45:09,307 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:45:09,526 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:45:09,528 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:45:10,485 - aiogram.event - INFO - Update id=762233798 is handled. Duration 1179 ms by bot id=7849840849
2025-05-20 13:45:17,324 - aiogram.event - INFO - Update id=762233799 is handled. Duration 637 ms by bot id=7849840849
2025-05-20 13:45:21,844 - aiogram.event - INFO - Update id=762233800 is handled. Duration 2499 ms by bot id=7849840849
2025-05-20 13:48:24,112 - aiogram.event - INFO - Update id=762233801 is handled. Duration 382 ms by bot id=7849840849
2025-05-20 13:48:25,477 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:48:25,696 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:48:26,279 - aiogram.event - INFO - Update id=762233802 is handled. Duration 803 ms by bot id=7849840849
2025-05-20 13:48:46,544 - aiogram.event - INFO - Update id=762233803 is handled. Duration 172 ms by bot id=7849840849
2025-05-20 13:48:50,718 - aiogram.event - INFO - Update id=762233804 is handled. Duration 188 ms by bot id=7849840849
2025-05-20 13:48:54,757 - aiogram.event - INFO - Update id=762233805 is handled. Duration 777 ms by bot id=7849840849
2025-05-20 13:48:58,456 - aiogram.event - INFO - Update id=762233806 is handled. Duration 194 ms by bot id=7849840849
2025-05-20 13:49:15,024 - aiogram.event - INFO - Update id=762233807 is handled. Duration 275 ms by bot id=7849840849
2025-05-20 13:49:17,134 - aiogram.event - INFO - Update id=762233808 is handled. Duration 765 ms by bot id=7849840849
2025-05-20 13:49:17,775 - aiogram.dispatcher - INFO - Polling stopped
2025-05-20 13:49:18,033 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:49:18,036 - root - INFO - Bot stopped
2025-05-20 13:49:24,825 - __main__ - INFO - Starting bot...
2025-05-20 13:49:24,826 - aiogram.dispatcher - INFO - Start polling
2025-05-20 13:49:25,266 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:50:04,503 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-20 13:50:07,905 - database.mongodb - INFO - Database indexes created successfully
2025-05-20 13:50:08,144 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-20 13:50:08,829 - aiogram.event - INFO - Update id=762233809 is handled. Duration 4326 ms by bot id=7849840849
2025-05-20 13:50:10,149 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:50:10,379 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:50:10,705 - aiogram.event - INFO - Update id=762233810 is handled. Duration 557 ms by bot id=7849840849
2025-05-20 13:50:13,234 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-20 13:50:13,234 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:50:13,471 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:50:13,473 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:50:14,460 - aiogram.event - INFO - Update id=762233811 is handled. Duration 1227 ms by bot id=7849840849
2025-05-20 13:50:18,963 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:50:19,190 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:50:19,193 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:50:19,355 - aiogram.event - INFO - Update id=762233812 is handled. Duration 620 ms by bot id=7849840849
2025-05-20 13:50:23,681 - aiogram.event - INFO - Update id=762233813 is handled. Duration 859 ms by bot id=7849840849
2025-05-20 13:50:26,564 - aiogram.event - INFO - Update id=762233814 is handled. Duration 377 ms by bot id=7849840849
2025-05-20 13:50:27,707 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:50:27,935 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:50:28,402 - aiogram.event - INFO - Update id=762233815 is handled. Duration 696 ms by bot id=7849840849
2025-05-20 13:50:30,194 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-20 13:50:30,195 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:50:30,423 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:50:30,425 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:50:31,231 - aiogram.event - INFO - Update id=762233816 is handled. Duration 1038 ms by bot id=7849840849
2025-05-20 13:50:33,509 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:50:33,738 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:50:33,741 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:50:34,062 - aiogram.event - INFO - Update id=762233817 is handled. Duration 1020 ms by bot id=7849840849
2025-05-20 13:50:37,833 - aiogram.event - INFO - Update id=762233818 is handled. Duration 199 ms by bot id=7849840849
2025-05-20 13:50:44,872 - aiogram.event - INFO - Update id=762233819 is handled. Duration 190 ms by bot id=7849840849
2025-05-20 13:50:47,214 - aiogram.event - INFO - Update id=762233820 is handled. Duration 440 ms by bot id=7849840849
2025-05-20 13:50:53,453 - aiogram.event - INFO - Update id=762233821 is handled. Duration 1418 ms by bot id=7849840849
2025-05-20 13:51:13,722 - aiogram.event - INFO - Update id=762233822 is handled. Duration 314 ms by bot id=7849840849
2025-05-20 13:51:15,671 - aiogram.event - INFO - Update id=762233823 is handled. Duration 949 ms by bot id=7849840849
2025-05-20 13:51:22,659 - aiogram.event - INFO - Update id=762233824 is handled. Duration 387 ms by bot id=7849840849
2025-05-20 13:51:23,828 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 13:51:24,058 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 13:51:24,430 - aiogram.event - INFO - Update id=762233825 is handled. Duration 602 ms by bot id=7849840849
2025-05-20 13:51:30,321 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-20 13:51:30,322 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:51:30,549 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:51:30,551 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:51:31,435 - aiogram.event - INFO - Update id=762233826 is handled. Duration 1114 ms by bot id=7849840849
2025-05-20 13:51:33,460 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 13:51:33,735 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 13:51:33,738 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 13:51:34,153 - aiogram.event - INFO - Update id=762233827 is handled. Duration 1147 ms by bot id=7849840849
2025-05-20 13:51:39,133 - aiogram.event - INFO - Update id=762233828 is handled. Duration 266 ms by bot id=7849840849
2025-05-20 13:51:41,600 - aiogram.event - INFO - Update id=762233829 is handled. Duration 472 ms by bot id=7849840849
2025-05-20 13:51:46,531 - aiogram.event - INFO - Update id=762233830 is handled. Duration 1319 ms by bot id=7849840849
2025-05-20 13:51:55,348 - aiogram.event - INFO - Update id=762233831 is handled. Duration 1204 ms by bot id=7849840849
2025-05-20 13:52:03,104 - aiogram.event - INFO - Update id=762233832 is handled. Duration 208 ms by bot id=7849840849
2025-05-20 13:52:10,581 - handlers.admin_handlers - WARNING - Admin access denied for user 1088067370
2025-05-20 13:52:10,767 - aiogram.event - INFO - Update id=762233833 is handled. Duration 190 ms by bot id=7849840849
2025-05-20 13:52:11,749 - aiogram.event - INFO - Update id=762233834 is handled. Duration 334 ms by bot id=7849840849
2025-05-20 13:52:13,252 - aiogram.event - INFO - Update id=762233835 is handled. Duration 407 ms by bot id=7849840849
2025-05-20 13:52:14,187 - aiogram.event - INFO - Update id=762233836 is handled. Duration 216 ms by bot id=7849840849
2025-05-20 13:52:14,731 - aiogram.event - INFO - Update id=762233837 is handled. Duration 427 ms by bot id=7849840849
2025-05-20 13:52:15,725 - aiogram.event - INFO - Update id=762233838 is handled. Duration 359 ms by bot id=7849840849
2025-05-20 13:52:17,600 - aiogram.event - INFO - Update id=762233839 is handled. Duration 689 ms by bot id=7849840849
2025-05-20 13:52:21,239 - aiogram.event - INFO - Update id=762233840 is handled. Duration 218 ms by bot id=7849840849
2025-05-20 13:52:38,357 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-20 13:52:38,517 - aiogram.event - INFO - Update id=762233841 is handled. Duration 163 ms by bot id=7849840849
2025-05-20 13:52:41,223 - aiogram.event - INFO - Update id=762233842 is handled. Duration 215 ms by bot id=7849840849
2025-05-20 13:54:02,473 - aiogram.dispatcher - INFO - Polling stopped
2025-05-20 13:54:02,728 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:54:02,730 - root - INFO - Bot stopped
2025-05-20 13:54:08,961 - __main__ - INFO - Starting bot...
2025-05-20 13:54:08,962 - aiogram.dispatcher - INFO - Start polling
2025-05-20 13:54:09,603 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:54:10,281 - aiogram.event - INFO - Update id=762233843 is handled. Duration 445 ms by bot id=7849840849
2025-05-20 13:54:16,969 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-20 13:54:17,235 - aiogram.event - INFO - Update id=762233844 is handled. Duration 270 ms by bot id=7849840849
2025-05-20 13:54:19,708 - aiogram.event - INFO - Update id=762233845 is handled. Duration 250 ms by bot id=7849840849
2025-05-20 13:54:55,846 - aiogram.dispatcher - INFO - Polling stopped
2025-05-20 13:54:56,112 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:54:56,114 - root - INFO - Bot stopped
2025-05-20 13:55:02,808 - __main__ - INFO - Starting bot...
2025-05-20 13:55:02,810 - aiogram.dispatcher - INFO - Start polling
2025-05-20 13:55:03,255 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 13:56:29,130 - aiogram.event - INFO - Update id=762233846 is handled. Duration 447 ms by bot id=7849840849
2025-05-20 13:56:30,808 - aiogram.event - INFO - Update id=762233847 is handled. Duration 229 ms by bot id=7849840849
2025-05-20 13:56:37,456 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-20 13:56:37,677 - aiogram.event - INFO - Update id=762233848 is handled. Duration 224 ms by bot id=7849840849
2025-05-20 13:56:39,660 - aiogram.event - INFO - Update id=762233849 is handled. Duration 360 ms by bot id=7849840849
2025-05-20 14:00:03,761 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-20 14:00:07,238 - database.mongodb - INFO - Database indexes created successfully
2025-05-20 14:00:07,445 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-20 14:00:08,020 - aiogram.event - INFO - Update id=762233850 is handled. Duration 4260 ms by bot id=7849840849
2025-05-20 14:00:09,340 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 14:00:09,549 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 14:00:09,863 - aiogram.event - INFO - Update id=762233851 is handled. Duration 523 ms by bot id=7849840849
2025-05-20 14:06:01,945 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-05-20 14:06:01,945 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7849840849)
2025-05-20 14:06:07,092 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-05-20 14:06:07,092 - aiogram.dispatcher - WARNING - Sleep for 1.101240 seconds and try again... (tryings = 1, bot id = 7849840849)
2025-05-20 14:06:12,642 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-05-20 14:06:12,643 - aiogram.dispatcher - WARNING - Sleep for 1.508865 seconds and try again... (tryings = 2, bot id = 7849840849)
2025-05-20 14:06:18,864 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-05-20 14:06:18,865 - aiogram.dispatcher - WARNING - Sleep for 2.063938 seconds and try again... (tryings = 3, bot id = 7849840849)
2025-05-20 14:06:26,247 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-05-20 14:06:26,248 - aiogram.dispatcher - WARNING - Sleep for 2.777432 seconds and try again... (tryings = 4, bot id = 7849840849)
2025-05-20 14:06:39,163 - aiogram.dispatcher - INFO - Connection established (tryings = 5, bot id = 7849840849)
2025-05-20 14:07:04,256 - aiogram.event - INFO - Update id=762233852 is handled. Duration 362 ms by bot id=7849840849
2025-05-20 14:07:12,277 - aiogram.dispatcher - INFO - Polling stopped
2025-05-20 14:07:12,542 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 14:07:12,544 - root - INFO - Bot stopped
2025-05-20 18:44:37,165 - __main__ - INFO - Starting bot...
2025-05-20 18:44:37,169 - aiogram.dispatcher - INFO - Start polling
2025-05-20 18:44:37,665 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 18:44:37,827 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-20 18:44:38,300 - aiogram.event - INFO - Update id=762233856 is handled. Duration 474 ms by bot id=7849840849
2025-05-20 18:44:41,486 - database.mongodb - INFO - Database indexes created successfully
2025-05-20 18:44:41,745 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-20 18:44:42,139 - aiogram.event - INFO - Update id=762233857 is handled. Duration 4312 ms by bot id=7849840849
2025-05-20 18:45:21,224 - aiogram.event - INFO - Update id=762233858 is handled. Duration 3539 ms by bot id=7849840849
2025-05-20 18:45:40,100 - aiogram.event - INFO - Update id=762233859 is handled. Duration 520 ms by bot id=7849840849
2025-05-20 18:45:41,327 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 18:45:41,550 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 18:45:42,062 - aiogram.event - INFO - Update id=762233860 is handled. Duration 736 ms by bot id=7849840849
2025-05-20 18:46:04,365 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-20 18:46:04,367 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 18:46:05,655 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 18:46:05,658 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 18:46:06,148 - aiogram.event - INFO - Update id=762233863 is handled. Duration 1652 ms by bot id=7849840849
2025-05-20 18:46:06,730 - aiogram.event - INFO - Update id=762233862 is handled. Duration 2365 ms by bot id=7849840849
2025-05-20 18:46:08,324 - aiogram.event - INFO - Update id=762233861 is handled. Duration 15394 ms by bot id=7849840849
2025-05-20 18:46:13,042 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 18:46:13,261 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 18:46:13,262 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 18:46:13,631 - aiogram.event - INFO - Update id=762233864 is handled. Duration 1044 ms by bot id=7849840849
2025-05-20 18:46:22,530 - aiogram.event - INFO - Update id=762233865 is handled. Duration 239 ms by bot id=7849840849
2025-05-20 18:46:29,147 - aiogram.event - INFO - Update id=762233866 is handled. Duration 444 ms by bot id=7849840849
2025-05-20 18:46:35,261 - aiogram.event - INFO - Update id=762233867 is handled. Duration 1571 ms by bot id=7849840849
2025-05-20 18:46:41,669 - aiogram.event - INFO - Update id=762233868 is handled. Duration 308 ms by bot id=7849840849
2025-05-20 18:46:48,548 - aiogram.event - INFO - Update id=762233869 is handled. Duration 1043 ms by bot id=7849840849
2025-05-20 18:54:25,109 - aiogram.dispatcher - INFO - Polling stopped
2025-05-20 18:54:25,378 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 18:54:25,380 - root - INFO - Bot stopped
2025-05-20 18:54:30,777 - __main__ - INFO - Starting bot...
2025-05-20 18:54:30,779 - aiogram.dispatcher - INFO - Start polling
2025-05-20 18:54:31,207 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 18:54:51,801 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-20 18:54:55,454 - database.mongodb - INFO - Database indexes created successfully
2025-05-20 18:54:55,687 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-20 18:54:56,401 - aiogram.event - INFO - Update id=762233870 is handled. Duration 4600 ms by bot id=7849840849
2025-05-20 18:55:00,494 - aiogram.event - INFO - Update id=762233871 is handled. Duration 478 ms by bot id=7849840849
2025-05-20 18:55:02,014 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-20 18:55:02,249 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-20 18:55:02,787 - aiogram.event - INFO - Update id=762233872 is handled. Duration 774 ms by bot id=7849840849
2025-05-20 18:55:03,915 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-20 18:55:03,915 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 18:55:04,151 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 18:55:04,153 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 18:55:04,951 - aiogram.event - INFO - Update id=762233873 is handled. Duration 1037 ms by bot id=7849840849
2025-05-20 18:55:07,209 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-20 18:55:07,444 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-20 18:55:07,445 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-20 18:55:07,753 - aiogram.event - INFO - Update id=762233874 is handled. Duration 1010 ms by bot id=7849840849
2025-05-20 18:55:16,294 - aiogram.event - INFO - Update id=762233875 is handled. Duration 211 ms by bot id=7849840849
2025-05-20 18:55:17,396 - aiogram.event - INFO - Update id=762233876 is handled. Duration 531 ms by bot id=7849840849
2025-05-20 18:55:21,692 - aiogram.event - INFO - Update id=762233877 is handled. Duration 402 ms by bot id=7849840849
2025-05-20 18:55:27,471 - aiogram.event - INFO - Update id=762233878 is handled. Duration 1234 ms by bot id=7849840849
2025-05-20 18:55:31,244 - aiogram.event - INFO - Update id=762233879 is handled. Duration 1227 ms by bot id=7849840849
2025-05-20 18:59:24,179 - aiogram.dispatcher - INFO - Polling stopped
2025-05-20 18:59:24,434 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-20 18:59:24,435 - root - INFO - Bot stopped
2025-05-21 01:03:29,876 - __main__ - INFO - Starting bot...
2025-05-21 01:03:29,878 - aiogram.dispatcher - INFO - Start polling
2025-05-21 01:03:30,336 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:03:30,484 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:03:33,714 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:03:33,918 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:03:34,550 - aiogram.event - INFO - Update id=762234248 is handled. Duration 4066 ms by bot id=7849840849
2025-05-21 01:03:37,362 - aiogram.event - INFO - Update id=762234249 is handled. Duration 404 ms by bot id=7849840849
2025-05-21 01:03:38,292 - aiogram.event - INFO - Update id=762234250 is handled. Duration 437 ms by bot id=7849840849
2025-05-21 01:03:38,570 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:03:38,781 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:03:39,358 - aiogram.event - INFO - Update id=762234251 is handled. Duration 788 ms by bot id=7849840849
2025-05-21 01:03:40,246 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:03:40,246 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:03:40,461 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:03:40,462 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:03:41,282 - aiogram.event - INFO - Update id=762234252 is handled. Duration 1037 ms by bot id=7849840849
2025-05-21 01:03:47,381 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:03:47,591 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:03:47,592 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:03:47,950 - aiogram.event - INFO - Update id=762234253 is handled. Duration 986 ms by bot id=7849840849
2025-05-21 01:03:55,174 - aiogram.event - INFO - Update id=762234254 is handled. Duration 154 ms by bot id=7849840849
2025-05-21 01:03:57,833 - aiogram.event - INFO - Update id=762234255 is handled. Duration 400 ms by bot id=7849840849
2025-05-21 01:04:02,495 - aiogram.event - INFO - Update id=762234256 is handled. Duration 1135 ms by bot id=7849840849
2025-05-21 01:04:04,313 - aiogram.event - INFO - Update id=762234257 is handled. Duration 369 ms by bot id=7849840849
2025-05-21 01:04:05,920 - aiogram.event - INFO - Update id=762234258 is handled. Duration 1066 ms by bot id=7849840849
2025-05-21 01:04:07,280 - aiogram.event - INFO - Update id=762234259 is handled. Duration 374 ms by bot id=7849840849
2025-05-21 01:04:08,433 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:04:08,652 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:04:09,222 - aiogram.event - INFO - Update id=762234260 is handled. Duration 789 ms by bot id=7849840849
2025-05-21 01:04:21,403 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:04:21,404 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:04:21,613 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:04:21,614 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:04:22,402 - aiogram.event - INFO - Update id=762234261 is handled. Duration 999 ms by bot id=7849840849
2025-05-21 01:04:24,281 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:04:24,485 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:04:24,486 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:04:24,923 - aiogram.event - INFO - Update id=762234262 is handled. Duration 1059 ms by bot id=7849840849
2025-05-21 01:04:30,993 - aiogram.event - INFO - Update id=762234263 is handled. Duration 208 ms by bot id=7849840849
2025-05-21 01:04:33,366 - aiogram.event - INFO - Update id=762234264 is handled. Duration 363 ms by bot id=7849840849
2025-05-21 01:04:40,034 - aiogram.event - INFO - Update id=762234265 is handled. Duration 1120 ms by bot id=7849840849
2025-05-21 01:04:42,038 - aiogram.event - INFO - Update id=762234266 is handled. Duration 305 ms by bot id=7849840849
2025-05-21 01:04:49,775 - aiogram.event - INFO - Update id=762234267 is handled. Duration 882 ms by bot id=7849840849
2025-05-21 01:04:51,698 - aiogram.event - INFO - Update id=762234268 is handled. Duration 358 ms by bot id=7849840849
2025-05-21 01:04:52,824 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:04:53,034 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:04:53,515 - aiogram.event - INFO - Update id=762234269 is handled. Duration 690 ms by bot id=7849840849
2025-05-21 01:07:23,705 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:07:23,706 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:23,914 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:23,915 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:24,682 - aiogram.event - INFO - Update id=762234270 is handled. Duration 977 ms by bot id=7849840849
2025-05-21 01:07:28,030 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:07:28,031 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:28,249 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:28,250 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:28,980 - aiogram.event - INFO - Update id=762234271 is handled. Duration 950 ms by bot id=7849840849
2025-05-21 01:07:30,548 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:07:30,549 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:30,752 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:30,754 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:31,521 - aiogram.event - INFO - Update id=762234272 is handled. Duration 973 ms by bot id=7849840849
2025-05-21 01:07:32,902 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:07:32,903 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:33,112 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:33,113 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:33,971 - aiogram.event - INFO - Update id=762234273 is handled. Duration 1069 ms by bot id=7849840849
2025-05-21 01:07:35,412 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:07:35,412 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:35,620 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:35,621 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:36,396 - aiogram.event - INFO - Update id=762234274 is handled. Duration 984 ms by bot id=7849840849
2025-05-21 01:07:37,676 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:07:37,676 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:37,884 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:37,885 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:38,670 - aiogram.event - INFO - Update id=762234275 is handled. Duration 995 ms by bot id=7849840849
2025-05-21 01:07:40,158 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:07:40,159 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:40,366 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:40,367 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:41,209 - aiogram.event - INFO - Update id=762234276 is handled. Duration 1052 ms by bot id=7849840849
2025-05-21 01:07:47,064 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:47,272 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:47,273 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:47,274 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:47,479 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:47,481 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:47,481 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:47,700 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:47,701 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:47,702 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:47,912 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:47,913 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:47,914 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:48,118 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:48,119 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:48,120 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:48,323 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:48,325 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:48,325 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:48,530 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:07:48,532 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:07:48,828 - aiogram.event - INFO - Update id=762234277 is handled. Duration 2184 ms by bot id=7849840849
2025-05-21 01:12:00,322 - __main__ - INFO - Starting bot...
2025-05-21 01:12:00,323 - aiogram.dispatcher - INFO - Start polling
2025-05-21 01:12:00,825 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:12:00,965 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:12:00,996 - aiogram.event - INFO - Update id=762234278 is not handled. Duration 31 ms by bot id=7849840849
2025-05-21 01:12:04,428 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:12:04,656 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:12:05,313 - aiogram.event - INFO - Update id=762234279 is handled. Duration 4347 ms by bot id=7849840849
2025-05-21 01:12:06,987 - aiogram.event - INFO - Update id=762234280 is handled. Duration 414 ms by bot id=7849840849
2025-05-21 01:12:08,065 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:12:08,239 - aiogram.event - INFO - Update id=762234281 is handled. Duration 1538 ms by bot id=7849840849
2025-05-21 01:12:08,294 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:12:08,829 - aiogram.event - INFO - Update id=762234282 is handled. Duration 764 ms by bot id=7849840849
2025-05-21 01:12:09,941 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:12:09,942 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:12:10,177 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:12:10,178 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:12:10,917 - aiogram.event - INFO - Update id=762234283 is handled. Duration 976 ms by bot id=7849840849
2025-05-21 01:12:13,758 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:13,986 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:12:13,988 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:13,989 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:14,217 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:12:14,219 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:14,220 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:14,447 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:12:14,449 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:14,449 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:14,678 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:12:14,680 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:14,681 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:14,916 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:12:14,918 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:14,919 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:15,147 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:12:15,149 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:15,150 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:15,381 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:12:15,383 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:12:15,384 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:12:15,610 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:12:15,611 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:12:16,110 - aiogram.event - INFO - Update id=762234284 is handled. Duration 2808 ms by bot id=7849840849
2025-05-21 01:12:19,769 - aiogram.event - INFO - Update id=762234285 is handled. Duration 258 ms by bot id=7849840849
2025-05-21 01:12:26,828 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 01:12:27,344 - aiogram.event - INFO - Update id=762234286 is handled. Duration 519 ms by bot id=7849840849
2025-05-21 01:12:27,946 - aiogram.event - INFO - Update id=762234287 is handled. Duration 716 ms by bot id=7849840849
2025-05-21 01:12:30,064 - aiogram.event - INFO - Update id=762234288 is handled. Duration 912 ms by bot id=7849840849
2025-05-21 01:12:34,934 - aiogram.event - INFO - Update id=762234289 is handled. Duration 2157 ms by bot id=7849840849
2025-05-21 01:12:39,416 - aiogram.event - INFO - Update id=762234290 is handled. Duration 2767 ms by bot id=7849840849
2025-05-21 01:12:40,855 - aiogram.event - INFO - Update id=762234291 is handled. Duration 854 ms by bot id=7849840849
2025-05-21 01:12:42,143 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:12:42,562 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:12:43,666 - aiogram.event - INFO - Update id=762234292 is handled. Duration 1522 ms by bot id=7849840849
2025-05-21 01:16:04,110 - aiogram.event - INFO - Update id=762234293 is handled. Duration 374 ms by bot id=7849840849
2025-05-21 01:16:04,926 - aiogram.event - INFO - Update id=762234294 is handled. Duration 464 ms by bot id=7849840849
2025-05-21 01:16:22,371 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 01:16:22,628 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:16:22,630 - root - INFO - Bot stopped
2025-05-21 01:16:29,174 - __main__ - INFO - Starting bot...
2025-05-21 01:16:29,175 - aiogram.dispatcher - INFO - Start polling
2025-05-21 01:16:29,594 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:16:29,733 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:16:29,749 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:16:33,180 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:16:33,385 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:16:34,146 - aiogram.event - INFO - Update id=762234296 is handled. Duration 4414 ms by bot id=7849840849
2025-05-21 01:16:34,564 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:16:34,789 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:16:35,168 - aiogram.event - INFO - Update id=762234295 is handled. Duration 5436 ms by bot id=7849840849
2025-05-21 01:16:37,252 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:16:37,488 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:16:38,061 - aiogram.event - INFO - Update id=762234297 is handled. Duration 809 ms by bot id=7849840849
2025-05-21 01:16:39,188 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:16:39,188 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:16:39,419 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:16:39,420 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:16:40,184 - aiogram.event - INFO - Update id=762234298 is handled. Duration 997 ms by bot id=7849840849
2025-05-21 01:16:43,090 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:16:43,090 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:43,325 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:43,327 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:43,937 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:16:43,938 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:44,168 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:44,170 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:44,211 - aiogram.event - INFO - Update id=762234299 is handled. Duration 1122 ms by bot id=7849840849
2025-05-21 01:16:44,229 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:16:44,230 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:44,442 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:44,444 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:44,890 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:16:44,891 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:44,984 - aiogram.event - INFO - Update id=762234300 is handled. Duration 1047 ms by bot id=7849840849
2025-05-21 01:16:45,096 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:45,098 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:45,145 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:16:45,145 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:45,377 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:45,379 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:45,568 - aiogram.event - INFO - Update id=762234301 is handled. Duration 1340 ms by bot id=7849840849
2025-05-21 01:16:45,842 - aiogram.event - INFO - Update id=762234302 is handled. Duration 951 ms by bot id=7849840849
2025-05-21 01:16:46,270 - aiogram.event - INFO - Update id=762234303 is handled. Duration 1125 ms by bot id=7849840849
2025-05-21 01:16:49,422 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:16:49,423 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:49,649 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:49,651 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:50,446 - aiogram.event - INFO - Update id=762234304 is handled. Duration 1024 ms by bot id=7849840849
2025-05-21 01:16:53,955 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:16:54,185 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:16:54,186 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:16:54,187 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:54,414 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:54,417 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:54,417 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:54,644 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:54,646 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:54,647 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:54,875 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:54,877 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:54,877 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:55,104 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:55,106 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:55,107 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:55,334 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:55,336 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:55,336 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:55,563 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:16:55,565 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:16:55,850 - aiogram.event - INFO - Update id=762234305 is handled. Duration 2355 ms by bot id=7849840849
2025-05-21 01:17:02,618 - aiogram.event - INFO - Update id=762234306 is handled. Duration 154 ms by bot id=7849840849
2025-05-21 01:17:05,303 - aiogram.event - INFO - Update id=762234307 is handled. Duration 446 ms by bot id=7849840849
2025-05-21 01:17:09,369 - aiogram.event - INFO - Update id=762234308 is handled. Duration 1175 ms by bot id=7849840849
2025-05-21 01:17:12,890 - aiogram.event - INFO - Update id=762234309 is handled. Duration 1219 ms by bot id=7849840849
2025-05-21 01:17:14,232 - aiogram.event - INFO - Update id=762234310 is handled. Duration 383 ms by bot id=7849840849
2025-05-21 01:17:15,469 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:17:15,699 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:17:16,297 - aiogram.event - INFO - Update id=762234311 is handled. Duration 828 ms by bot id=7849840849
2025-05-21 01:17:54,325 - aiogram.event - INFO - Update id=762234312 is handled. Duration 231 ms by bot id=7849840849
2025-05-21 01:18:00,507 - handlers.admin_handlers - WARNING - Failed admin login attempt from user 1088067370
2025-05-21 01:18:00,508 - aiogram.event - INFO - Update id=762234313 is not handled. Duration 4 ms by bot id=7849840849
2025-05-21 01:18:00,508 - aiogram.event - ERROR - Cause exception while process update id=762234313 by bot id=7849840849
AttributeError: 'SecurityManager' object has no attribute 'failed_attempts'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 125, in check_admin_password
    attempts_left = security_manager.max_attempts - security_manager.failed_attempts.get(user_id, 0)
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'SecurityManager' object has no attribute 'failed_attempts'. Did you mean: 'add_failed_attempt'?
2025-05-21 01:18:06,125 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 01:18:06,374 - aiogram.event - INFO - Update id=762234314 is handled. Duration 252 ms by bot id=7849840849
2025-05-21 01:18:08,536 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:18:08,537 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:18:08,766 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:18:08,767 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:18:09,582 - aiogram.event - INFO - Update id=762234315 is handled. Duration 1046 ms by bot id=7849840849
2025-05-21 01:18:12,378 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:18:12,604 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:18:12,605 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:18:12,924 - aiogram.event - INFO - Update id=762234316 is handled. Duration 997 ms by bot id=7849840849
2025-05-21 01:18:21,205 - aiogram.event - INFO - Update id=762234317 is handled. Duration 204 ms by bot id=7849840849
2025-05-21 01:18:25,203 - aiogram.event - INFO - Update id=762234318 is handled. Duration 378 ms by bot id=7849840849
2025-05-21 01:18:31,711 - aiogram.event - INFO - Update id=762234319 is handled. Duration 1406 ms by bot id=7849840849
2025-05-21 01:18:34,537 - aiogram.event - INFO - Update id=762234320 is handled. Duration 1278 ms by bot id=7849840849
2025-05-21 01:18:36,727 - aiogram.event - INFO - Update id=762234321 is handled. Duration 490 ms by bot id=7849840849
2025-05-21 01:18:38,126 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 01:18:38,356 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 01:18:38,509 - aiogram.event - INFO - Update id=762234322 is handled. Duration 382 ms by bot id=7849840849
2025-05-21 01:18:39,686 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:18:39,917 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:18:40,490 - aiogram.event - INFO - Update id=762234323 is handled. Duration 804 ms by bot id=7849840849
2025-05-21 01:21:16,131 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 01:21:16,388 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:21:16,390 - root - INFO - Bot stopped
2025-05-21 01:21:34,061 - __main__ - INFO - Starting bot...
2025-05-21 01:21:34,063 - aiogram.dispatcher - INFO - Start polling
2025-05-21 01:21:34,494 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:21:38,462 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:21:38,612 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:21:41,942 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:21:42,152 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:21:42,807 - aiogram.event - INFO - Update id=762234325 is handled. Duration 4194 ms by bot id=7849840849
2025-05-21 01:21:43,094 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:21:43,306 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:21:43,763 - aiogram.event - INFO - Update id=762234324 is handled. Duration 5300 ms by bot id=7849840849
2025-05-21 01:21:45,918 - aiogram.event - INFO - Update id=762234326 is handled. Duration 437 ms by bot id=7849840849
2025-05-21 01:21:46,908 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:21:47,122 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:21:47,686 - aiogram.event - INFO - Update id=762234327 is handled. Duration 779 ms by bot id=7849840849
2025-05-21 01:21:49,136 - aiogram.event - INFO - Update id=762234328 is handled. Duration 535 ms by bot id=7849840849
2025-05-21 01:21:51,287 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:21:51,502 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:21:51,983 - aiogram.event - INFO - Update id=762234329 is handled. Duration 696 ms by bot id=7849840849
2025-05-21 01:21:53,045 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:21:53,046 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:21:53,264 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:21:53,266 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:21:54,104 - aiogram.event - INFO - Update id=762234330 is handled. Duration 1059 ms by bot id=7849840849
2025-05-21 01:21:56,635 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:21:56,852 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:21:56,854 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:21:57,202 - aiogram.event - INFO - Update id=762234331 is handled. Duration 994 ms by bot id=7849840849
2025-05-21 01:22:07,229 - aiogram.event - INFO - Update id=762234332 is handled. Duration 164 ms by bot id=7849840849
2025-05-21 01:22:10,128 - aiogram.event - INFO - Update id=762234333 is handled. Duration 365 ms by bot id=7849840849
2025-05-21 01:22:14,755 - aiogram.event - INFO - Update id=762234334 is handled. Duration 162 ms by bot id=7849840849
2025-05-21 01:22:21,900 - aiogram.event - INFO - Update id=762234335 is handled. Duration 1155 ms by bot id=7849840849
2025-05-21 01:22:23,484 - aiogram.event - INFO - Update id=762234336 is handled. Duration 439 ms by bot id=7849840849
2025-05-21 01:22:25,563 - aiogram.event - INFO - Update id=762234337 is handled. Duration 462 ms by bot id=7849840849
2025-05-21 01:22:28,091 - aiogram.event - INFO - Update id=762234338 is handled. Duration 1307 ms by bot id=7849840849
2025-05-21 01:22:31,408 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:22:31,624 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:22:32,193 - aiogram.event - INFO - Update id=762234339 is handled. Duration 784 ms by bot id=7849840849
2025-05-21 01:22:38,785 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:22:38,786 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:22:39,013 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:22:39,015 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:22:39,825 - aiogram.event - INFO - Update id=762234340 is handled. Duration 1042 ms by bot id=7849840849
2025-05-21 01:25:24,798 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 01:25:25,063 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:25:25,065 - root - INFO - Bot stopped
2025-05-21 01:25:30,936 - __main__ - INFO - Starting bot...
2025-05-21 01:25:30,938 - aiogram.dispatcher - INFO - Start polling
2025-05-21 01:25:31,346 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:25:31,479 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:25:32,100 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:25:35,120 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:25:35,340 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:25:35,973 - aiogram.event - INFO - Update id=762234342 is handled. Duration 3873 ms by bot id=7849840849
2025-05-21 01:25:36,054 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:25:36,271 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:25:36,641 - aiogram.event - INFO - Update id=762234341 is handled. Duration 5162 ms by bot id=7849840849
2025-05-21 01:25:40,949 - aiogram.event - INFO - Update id=762234343 is handled. Duration 362 ms by bot id=7849840849
2025-05-21 01:25:42,413 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:25:42,632 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:25:43,313 - aiogram.event - INFO - Update id=762234344 is handled. Duration 900 ms by bot id=7849840849
2025-05-21 01:25:44,149 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:25:44,150 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:25:44,371 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:25:44,377 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:25:45,144 - aiogram.event - INFO - Update id=762234345 is handled. Duration 995 ms by bot id=7849840849
2025-05-21 01:25:53,327 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:25:53,542 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:25:53,544 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:25:53,545 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:25:53,761 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:25:53,762 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:25:54,136 - aiogram.event - INFO - Update id=762234346 is handled. Duration 1241 ms by bot id=7849840849
2025-05-21 01:26:01,634 - aiogram.event - INFO - Update id=762234347 is handled. Duration 223 ms by bot id=7849840849
2025-05-21 01:26:07,767 - aiogram.event - INFO - Update id=762234348 is handled. Duration 383 ms by bot id=7849840849
2025-05-21 01:26:14,691 - aiogram.event - INFO - Update id=762234349 is handled. Duration 1149 ms by bot id=7849840849
2025-05-21 01:26:16,256 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:26:16,472 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:26:16,474 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:26:16,693 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:26:16,910 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 1}]}
2025-05-21 01:26:16,911 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:26:17,132 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:26:17,352 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:26:17,354 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:26:17,355 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682cca7f54afbc0c03d6c188
2025-05-21 01:26:17,579 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682cca7f54afbc0c03d6c188'), 'name': '[eq', 'category': ' ', 'price': 8520, 'description': 'dsf', 'photo': 'AgACAgIAAxkBAAIBgWgsyn5uR6G0mnWM9MD7NmS897HBAAKB8zEb2gxgSQ34v1TD5Ep2AQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': 'sdf', 'quantity': 0}]}
2025-05-21 01:26:17,581 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682cca7f54afbc0c03d6c188
2025-05-21 01:26:18,707 - aiogram.event - INFO - Update id=762234350 is handled. Duration 2675 ms by bot id=7849840849
2025-05-21 01:26:23,733 - aiogram.event - INFO - Update id=762234351 is handled. Duration 416 ms by bot id=7849840849
2025-05-21 01:26:24,995 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:26:25,207 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 01:26:25,538 - aiogram.event - INFO - Update id=762234352 is handled. Duration 544 ms by bot id=7849840849
2025-05-21 01:26:34,838 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:26:34,839 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:26:35,052 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:26:35,055 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:26:35,876 - aiogram.event - INFO - Update id=762234353 is handled. Duration 1038 ms by bot id=7849840849
2025-05-21 01:26:38,456 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:26:38,672 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:26:38,674 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:26:38,964 - aiogram.event - INFO - Update id=762234354 is handled. Duration 942 ms by bot id=7849840849
2025-05-21 01:26:47,000 - aiogram.event - INFO - Update id=762234355 is handled. Duration 227 ms by bot id=7849840849
2025-05-21 01:26:50,656 - aiogram.event - INFO - Update id=762234356 is handled. Duration 376 ms by bot id=7849840849
2025-05-21 01:26:54,801 - aiogram.event - INFO - Update id=762234357 is handled. Duration 1116 ms by bot id=7849840849
2025-05-21 01:26:56,412 - aiogram.event - INFO - Update id=762234358 is handled. Duration 370 ms by bot id=7849840849
2025-05-21 01:27:00,104 - aiogram.event - INFO - Update id=762234359 is handled. Duration 918 ms by bot id=7849840849
2025-05-21 01:27:02,278 - aiogram.event - INFO - Update id=762234360 is handled. Duration 373 ms by bot id=7849840849
2025-05-21 01:27:03,311 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:27:03,530 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 01:27:03,911 - aiogram.event - INFO - Update id=762234361 is handled. Duration 600 ms by bot id=7849840849
2025-05-21 01:27:10,794 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:27:10,795 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:11,021 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:27:11,023 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:11,746 - aiogram.event - INFO - Update id=762234362 is handled. Duration 952 ms by bot id=7849840849
2025-05-21 01:27:14,233 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:14,450 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:27:14,452 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:14,786 - aiogram.event - INFO - Update id=762234363 is handled. Duration 982 ms by bot id=7849840849
2025-05-21 01:27:22,362 - aiogram.event - INFO - Update id=762234364 is handled. Duration 239 ms by bot id=7849840849
2025-05-21 01:27:24,586 - aiogram.event - INFO - Update id=762234365 is handled. Duration 475 ms by bot id=7849840849
2025-05-21 01:27:29,577 - aiogram.event - INFO - Update id=762234366 is handled. Duration 1254 ms by bot id=7849840849
2025-05-21 01:27:31,641 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:31,859 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:27:31,861 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:32,080 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:32,293 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:27:32,295 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:33,177 - aiogram.event - INFO - Update id=762234367 is handled. Duration 1756 ms by bot id=7849840849
2025-05-21 01:27:35,658 - aiogram.event - INFO - Update id=762234368 is handled. Duration 367 ms by bot id=7849840849
2025-05-21 01:27:36,523 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:27:36,739 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 01:27:37,052 - aiogram.event - INFO - Update id=762234369 is handled. Duration 529 ms by bot id=7849840849
2025-05-21 01:27:46,473 - aiogram.event - INFO - Update id=762234370 is handled. Duration 592 ms by bot id=7849840849
2025-05-21 01:27:48,202 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:27:48,203 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:48,421 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:27:48,423 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:49,158 - aiogram.event - INFO - Update id=762234371 is handled. Duration 956 ms by bot id=7849840849
2025-05-21 01:27:51,132 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:27:51,132 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:51,359 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:27:51,361 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:52,209 - aiogram.event - INFO - Update id=762234372 is handled. Duration 1078 ms by bot id=7849840849
2025-05-21 01:27:52,459 - aiogram.event - INFO - Update id=762234373 is handled. Duration 240 ms by bot id=7849840849
2025-05-21 01:27:55,499 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:55,733 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:27:55,735 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:55,797 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 01:27:55,901 - aiogram.event - INFO - Update id=762234374 is handled. Duration 647 ms by bot id=7849840849
2025-05-21 01:27:56,191 - aiogram.event - INFO - Update id=762234375 is handled. Duration 396 ms by bot id=7849840849
2025-05-21 01:27:57,672 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:57,889 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:27:57,891 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:58,058 - aiogram.event - INFO - Update id=762234376 is handled. Duration 606 ms by bot id=7849840849
2025-05-21 01:27:59,082 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:59,304 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:27:59,306 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:27:59,476 - aiogram.event - INFO - Update id=762234378 is handled. Duration 613 ms by bot id=7849840849
2025-05-21 01:28:01,762 - aiogram.event - INFO - Update id=762234379 is handled. Duration 729 ms by bot id=7849840849
2025-05-21 01:28:03,642 - aiogram.event - INFO - Update id=762234380 is handled. Duration 431 ms by bot id=7849840849
2025-05-21 01:28:04,310 - aiogram.event - INFO - Update id=762234377 is handled. Duration 6632 ms by bot id=7849840849
2025-05-21 01:28:07,252 - aiogram.event - INFO - Update id=762234382 is handled. Duration 811 ms by bot id=7849840849
2025-05-21 01:28:07,953 - aiogram.event - INFO - Update id=762234381 is handled. Duration 2324 ms by bot id=7849840849
2025-05-21 01:28:09,373 - aiogram.event - INFO - Update id=762234383 is handled. Duration 912 ms by bot id=7849840849
2025-05-21 01:28:09,632 - aiogram.event - INFO - Update id=762234384 is handled. Duration 158 ms by bot id=7849840849
2025-05-21 01:28:11,349 - aiogram.event - INFO - Update id=762234385 is handled. Duration 367 ms by bot id=7849840849
2025-05-21 01:28:12,874 - aiogram.event - INFO - Update id=762234386 is handled. Duration 371 ms by bot id=7849840849
2025-05-21 01:28:16,060 - aiogram.event - INFO - Update id=762234387 is handled. Duration 166 ms by bot id=7849840849
2025-05-21 01:28:17,521 - aiogram.event - INFO - Update id=762234388 is handled. Duration 170 ms by bot id=7849840849
2025-05-21 01:28:21,565 - aiogram.event - INFO - Update id=762234390 is handled. Duration 166 ms by bot id=7849840849
2025-05-21 01:28:21,574 - aiogram.event - INFO - Update id=762234389 is handled. Duration 311 ms by bot id=7849840849
2025-05-21 01:28:22,977 - aiogram.event - INFO - Update id=762234391 is handled. Duration 165 ms by bot id=7849840849
2025-05-21 01:28:28,085 - aiogram.event - INFO - Update id=762234392 is handled. Duration 184 ms by bot id=7849840849
2025-05-21 01:28:29,515 - aiogram.event - INFO - Update id=762234393 is handled. Duration 295 ms by bot id=7849840849
2025-05-21 01:28:31,179 - aiogram.event - INFO - Update id=762234394 is handled. Duration 337 ms by bot id=7849840849
2025-05-21 01:28:34,170 - aiogram.event - INFO - Update id=762234395 is handled. Duration 161 ms by bot id=7849840849
2025-05-21 01:28:36,823 - aiogram.event - INFO - Update id=762234396 is handled. Duration 231 ms by bot id=7849840849
2025-05-21 01:28:38,494 - aiogram.event - INFO - Update id=762234397 is handled. Duration 153 ms by bot id=7849840849
2025-05-21 01:28:51,290 - aiogram.event - INFO - Update id=762234398 is handled. Duration 248 ms by bot id=7849840849
2025-05-21 01:28:54,827 - aiogram.event - INFO - Update id=762234399 is handled. Duration 155 ms by bot id=7849840849
2025-05-21 01:28:59,633 - aiogram.event - INFO - Update id=762234400 is handled. Duration 183 ms by bot id=7849840849
2025-05-21 01:29:08,143 - aiogram.event - INFO - Update id=762234401 is handled. Duration 435 ms by bot id=7849840849
2025-05-21 01:29:12,709 - aiogram.event - INFO - Update id=762234402 is handled. Duration 158 ms by bot id=7849840849
2025-05-21 01:29:15,259 - aiogram.event - INFO - Update id=762234403 is handled. Duration 199 ms by bot id=7849840849
2025-05-21 01:29:17,481 - aiogram.event - INFO - Update id=762234404 is handled. Duration 651 ms by bot id=7849840849
2025-05-21 01:29:19,070 - aiogram.event - INFO - Update id=762234405 is handled. Duration 193 ms by bot id=7849840849
2025-05-21 01:29:21,991 - aiogram.event - INFO - Update id=762234406 is handled. Duration 520 ms by bot id=7849840849
2025-05-21 01:29:23,832 - aiogram.event - INFO - Update id=762234407 is handled. Duration 549 ms by bot id=7849840849
2025-05-21 01:29:26,629 - aiogram.event - INFO - Update id=762234408 is handled. Duration 649 ms by bot id=7849840849
2025-05-21 01:29:28,398 - aiogram.event - INFO - Update id=762234409 is handled. Duration 306 ms by bot id=7849840849
2025-05-21 01:29:30,667 - aiogram.event - INFO - Update id=762234410 is handled. Duration 597 ms by bot id=7849840849
2025-05-21 01:29:31,746 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:31,968 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:29:31,970 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:32,416 - aiogram.event - INFO - Update id=762234411 is handled. Duration 675 ms by bot id=7849840849
2025-05-21 01:29:33,411 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:33,630 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'Waka 20000', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:29:33,632 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:34,060 - aiogram.event - INFO - Update id=762234412 is handled. Duration 656 ms by bot id=7849840849
2025-05-21 01:29:37,879 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:38,099 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:29:38,101 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:38,258 - aiogram.event - INFO - Update id=762234413 is handled. Duration 614 ms by bot id=7849840849
2025-05-21 01:29:45,989 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:46,208 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 10000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:29:46,210 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:46,524 - aiogram.event - INFO - Update id=762234414 is handled. Duration 542 ms by bot id=7849840849
2025-05-21 01:29:49,948 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:50,168 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:29:50,170 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:50,343 - aiogram.event - INFO - Update id=762234415 is handled. Duration 635 ms by bot id=7849840849
2025-05-21 01:29:53,927 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:54,158 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:29:54,160 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:29:54,463 - aiogram.event - INFO - Update id=762234416 is handled. Duration 543 ms by bot id=7849840849
2025-05-21 01:30:00,195 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:00,418 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:30:00,420 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:00,593 - aiogram.event - INFO - Update id=762234417 is handled. Duration 638 ms by bot id=7849840849
2025-05-21 01:30:03,833 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:04,052 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAMtaCw8zuGsirZnEsuZMHn6FFalzHsAAkDuMRvaDGBJtMnLtdyjZ50BAAMCAANtAAM2BA', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:30:04,054 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:04,598 - aiogram.event - INFO - Update id=762234418 is handled. Duration 772 ms by bot id=7849840849
2025-05-21 01:30:09,514 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:09,733 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:30:09,735 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:09,893 - aiogram.event - INFO - Update id=762234419 is handled. Duration 612 ms by bot id=7849840849
2025-05-21 01:30:13,730 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:13,979 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:30:13,981 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:14,322 - aiogram.event - INFO - Update id=762234420 is handled. Duration 599 ms by bot id=7849840849
2025-05-21 01:30:18,950 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:19,169 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:30:19,171 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:30:19,508 - aiogram.event - INFO - Update id=762234421 is handled. Duration 565 ms by bot id=7849840849
2025-05-21 01:30:22,413 - aiogram.event - INFO - Update id=762234422 is not handled. Duration 148 ms by bot id=7849840849
2025-05-21 01:30:22,413 - aiogram.event - ERROR - Cause exception while process update id=762234422 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 01:30:25,241 - aiogram.event - INFO - Update id=762234423 is not handled. Duration 140 ms by bot id=7849840849
2025-05-21 01:30:25,241 - aiogram.event - ERROR - Cause exception while process update id=762234423 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 01:30:27,754 - aiogram.event - INFO - Update id=762234424 is not handled. Duration 155 ms by bot id=7849840849
2025-05-21 01:30:27,755 - aiogram.event - ERROR - Cause exception while process update id=762234424 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 01:30:30,760 - aiogram.event - INFO - Update id=762234425 is not handled. Duration 137 ms by bot id=7849840849
2025-05-21 01:30:30,761 - aiogram.event - ERROR - Cause exception while process update id=762234425 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 01:30:32,126 - aiogram.event - INFO - Update id=762234426 is not handled. Duration 143 ms by bot id=7849840849
2025-05-21 01:30:32,126 - aiogram.event - ERROR - Cause exception while process update id=762234426 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 01:30:33,163 - aiogram.event - INFO - Update id=762234427 is not handled. Duration 140 ms by bot id=7849840849
2025-05-21 01:30:33,163 - aiogram.event - ERROR - Cause exception while process update id=762234427 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 01:31:05,115 - aiogram.event - INFO - Update id=762234428 is not handled. Duration 144 ms by bot id=7849840849
2025-05-21 01:31:05,116 - aiogram.event - ERROR - Cause exception while process update id=762234428 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 01:31:07,679 - aiogram.event - INFO - Update id=762234429 is not handled. Duration 139 ms by bot id=7849840849
2025-05-21 01:31:07,680 - aiogram.event - ERROR - Cause exception while process update id=762234429 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 01:31:08,154 - aiogram.event - INFO - Update id=762234430 is handled. Duration 174 ms by bot id=7849840849
2025-05-21 01:31:11,687 - aiogram.event - INFO - Update id=762234431 is handled. Duration 502 ms by bot id=7849840849
2025-05-21 01:32:59,415 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 01:32:59,680 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:32:59,682 - root - INFO - Bot stopped
2025-05-21 01:33:05,685 - __main__ - INFO - Starting bot...
2025-05-21 01:33:05,688 - aiogram.dispatcher - INFO - Start polling
2025-05-21 01:33:06,110 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 01:33:15,822 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:33:18,337 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 01:33:21,558 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:33:21,767 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:33:22,389 - aiogram.event - INFO - Update id=762234432 is handled. Duration 6567 ms by bot id=7849840849
2025-05-21 01:33:22,936 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 01:33:23,157 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 01:33:23,536 - aiogram.event - INFO - Update id=762234433 is handled. Duration 5200 ms by bot id=7849840849
2025-05-21 01:33:29,304 - aiogram.event - INFO - Update id=762234434 is handled. Duration 156 ms by bot id=7849840849
2025-05-21 01:33:32,228 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 01:33:32,438 - aiogram.event - INFO - Update id=762234435 is handled. Duration 212 ms by bot id=7849840849
2025-05-21 01:33:34,801 - aiogram.event - INFO - Update id=762234436 is handled. Duration 182 ms by bot id=7849840849
2025-05-21 01:33:36,290 - aiogram.event - INFO - Update id=762234437 is handled. Duration 339 ms by bot id=7849840849
2025-05-21 01:33:37,797 - aiogram.event - INFO - Update id=762234438 is handled. Duration 309 ms by bot id=7849840849
2025-05-21 01:33:39,301 - aiogram.event - INFO - Update id=762234439 is handled. Duration 541 ms by bot id=7849840849
2025-05-21 01:33:41,064 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:41,277 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:33:41,279 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:41,750 - aiogram.event - INFO - Update id=762234440 is handled. Duration 692 ms by bot id=7849840849
2025-05-21 01:33:42,768 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:42,988 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:33:42,990 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:43,319 - aiogram.event - INFO - Update id=762234441 is handled. Duration 559 ms by bot id=7849840849
2025-05-21 01:33:48,079 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:48,298 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}, {'name': '\\', 'quantity': 1}]}
2025-05-21 01:33:48,300 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:48,872 - aiogram.event - INFO - Update id=762234442 is handled. Duration 799 ms by bot id=7849840849
2025-05-21 01:33:51,346 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:51,566 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}]}
2025-05-21 01:33:51,568 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:51,869 - aiogram.event - INFO - Update id=762234443 is handled. Duration 530 ms by bot id=7849840849
2025-05-21 01:33:52,414 - aiogram.event - INFO - Update id=762234444 is handled. Duration 376 ms by bot id=7849840849
2025-05-21 01:33:53,868 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 01:33:54,086 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 01:33:54,233 - aiogram.event - INFO - Update id=762234445 is handled. Duration 365 ms by bot id=7849840849
2025-05-21 01:33:55,096 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:55,312 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 1}]}
2025-05-21 01:33:55,313 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:33:55,332 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 01:33:55,543 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 01:33:55,774 - aiogram.event - INFO - Update id=762234446 is handled. Duration 686 ms by bot id=7849840849
2025-05-21 01:33:55,946 - aiogram.event - INFO - Update id=762234447 is handled. Duration 614 ms by bot id=7849840849
2025-05-21 01:33:56,964 - aiogram.event - INFO - Update id=762234448 is handled. Duration 577 ms by bot id=7849840849
2025-05-21 01:33:58,109 - aiogram.event - INFO - Update id=762234449 is handled. Duration 180 ms by bot id=7849840849
2025-05-21 01:34:00,893 - aiogram.event - INFO - Update id=762234450 is handled. Duration 357 ms by bot id=7849840849
2025-05-21 01:34:02,007 - aiogram.event - INFO - Update id=762234451 is handled. Duration 165 ms by bot id=7849840849
2025-05-21 01:34:02,127 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:34:02,337 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 01:34:02,625 - aiogram.event - INFO - Update id=762234452 is handled. Duration 498 ms by bot id=7849840849
2025-05-21 01:34:03,750 - aiogram.event - INFO - Update id=762234453 is handled. Duration 360 ms by bot id=7849840849
2025-05-21 01:34:04,413 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:34:04,413 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:04,627 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 01:34:04,628 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:05,340 - aiogram.event - INFO - Update id=762234454 is handled. Duration 928 ms by bot id=7849840849
2025-05-21 01:34:05,842 - aiogram.event - INFO - Update id=762234455 is handled. Duration 333 ms by bot id=7849840849
2025-05-21 01:34:11,143 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:11,330 - aiogram.event - INFO - Update id=762234457 is handled. Duration 225 ms by bot id=7849840849
2025-05-21 01:34:11,353 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 01:34:11,354 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:11,665 - aiogram.event - INFO - Update id=762234456 is handled. Duration 947 ms by bot id=7849840849
2025-05-21 01:34:14,251 - aiogram.event - INFO - Update id=762234458 is handled. Duration 289 ms by bot id=7849840849
2025-05-21 01:34:17,870 - aiogram.event - INFO - Update id=762234459 is handled. Duration 149 ms by bot id=7849840849
2025-05-21 01:34:18,968 - aiogram.event - INFO - Update id=762234460 is handled. Duration 169 ms by bot id=7849840849
2025-05-21 01:34:19,950 - aiogram.event - INFO - Update id=762234461 is handled. Duration 413 ms by bot id=7849840849
2025-05-21 01:34:23,063 - aiogram.event - INFO - Update id=762234462 is handled. Duration 372 ms by bot id=7849840849
2025-05-21 01:34:24,357 - aiogram.event - INFO - Update id=762234463 is handled. Duration 1189 ms by bot id=7849840849
2025-05-21 01:34:26,447 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:26,657 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 01:34:26,659 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:26,875 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:27,086 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 01:34:27,088 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:27,952 - aiogram.event - INFO - Update id=762234464 is handled. Duration 1725 ms by bot id=7849840849
2025-05-21 01:34:28,840 - aiogram.event - INFO - Update id=762234465 is handled. Duration 363 ms by bot id=7849840849
2025-05-21 01:34:29,931 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:34:30,145 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:34:30,715 - aiogram.event - INFO - Update id=762234466 is handled. Duration 784 ms by bot id=7849840849
2025-05-21 01:34:31,863 - aiogram.event - INFO - Update id=762234467 is handled. Duration 545 ms by bot id=7849840849
2025-05-21 01:34:32,508 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 01:34:32,508 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:32,722 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 01:34:32,724 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:33,482 - aiogram.event - INFO - Update id=762234468 is handled. Duration 975 ms by bot id=7849840849
2025-05-21 01:34:35,882 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 01:34:36,013 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:36,095 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True}
2025-05-21 01:34:36,096 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 01:34:36,226 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 01:34:36,227 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 01:34:36,453 - aiogram.event - INFO - Update id=762234470 is handled. Duration 576 ms by bot id=7849840849
2025-05-21 01:34:36,520 - aiogram.event - INFO - Update id=762234469 is handled. Duration 935 ms by bot id=7849840849
2025-05-21 01:34:37,735 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 01:34:37,947 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True}
2025-05-21 01:34:37,949 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 01:34:38,261 - aiogram.event - INFO - Update id=762234471 is handled. Duration 534 ms by bot id=7849840849
2025-05-21 01:34:39,425 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 01:34:39,635 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True}
2025-05-21 01:34:39,637 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 01:34:39,946 - aiogram.event - INFO - Update id=762234472 is handled. Duration 529 ms by bot id=7849840849
2025-05-21 01:34:42,058 - aiogram.event - INFO - Update id=762234473 is handled. Duration 161 ms by bot id=7849840849
2025-05-21 01:34:43,240 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 01:34:43,462 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True}
2025-05-21 01:34:43,464 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 01:34:43,737 - aiogram.event - INFO - Update id=762234475 is handled. Duration 371 ms by bot id=7849840849
2025-05-21 01:34:43,882 - aiogram.event - INFO - Update id=762234474 is handled. Duration 650 ms by bot id=7849840849
2025-05-21 01:34:47,816 - aiogram.event - INFO - Update id=762234476 is handled. Duration 1127 ms by bot id=7849840849
2025-05-21 01:34:51,956 - aiogram.event - INFO - Update id=762234478 is handled. Duration 736 ms by bot id=7849840849
2025-05-21 01:34:54,023 - aiogram.event - INFO - Update id=762234477 is handled. Duration 6635 ms by bot id=7849840849
2025-05-21 01:34:57,865 - aiogram.event - INFO - Update id=762234479 is handled. Duration 378 ms by bot id=7849840849
2025-05-21 01:35:04,739 - aiogram.event - INFO - Update id=762234480 is handled. Duration 1007 ms by bot id=7849840849
2025-05-21 01:35:06,106 - aiogram.event - INFO - Update id=762234481 is handled. Duration 408 ms by bot id=7849840849
2025-05-21 01:35:07,217 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:35:07,437 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:35:07,965 - aiogram.event - INFO - Update id=762234482 is handled. Duration 748 ms by bot id=7849840849
2025-05-21 01:35:09,016 - aiogram.event - INFO - Update id=762234483 is handled. Duration 699 ms by bot id=7849840849
2025-05-21 01:35:10,834 - aiogram.event - INFO - Update id=762234484 is handled. Duration 744 ms by bot id=7849840849
2025-05-21 01:35:12,644 - aiogram.event - INFO - Update id=762234485 is handled. Duration 717 ms by bot id=7849840849
2025-05-21 01:35:14,462 - aiogram.event - INFO - Update id=762234486 is handled. Duration 833 ms by bot id=7849840849
2025-05-21 01:35:17,948 - aiogram.event - INFO - Update id=762234487 is handled. Duration 711 ms by bot id=7849840849
2025-05-21 01:35:23,290 - aiogram.event - INFO - Update id=762234488 is handled. Duration 691 ms by bot id=7849840849
2025-05-21 01:35:36,013 - aiogram.event - INFO - Update id=762234489 is handled. Duration 180 ms by bot id=7849840849
2025-05-21 01:35:42,203 - aiogram.event - INFO - Update id=762234490 is handled. Duration 586 ms by bot id=7849840849
2025-05-21 01:35:43,056 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 01:35:43,265 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 01:35:43,266 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 01:35:43,636 - aiogram.event - INFO - Update id=762234491 is handled. Duration 586 ms by bot id=7849840849
2025-05-21 01:35:46,885 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 01:35:47,092 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 01:35:47,093 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 01:35:47,438 - aiogram.event - INFO - Update id=762234492 is handled. Duration 560 ms by bot id=7849840849
2025-05-21 01:35:48,724 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 01:35:48,935 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 01:35:48,936 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 01:35:49,238 - aiogram.event - INFO - Update id=762234493 is handled. Duration 521 ms by bot id=7849840849
2025-05-21 01:35:52,154 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 01:35:52,368 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 01:35:52,369 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 01:35:52,376 - aiogram.event - INFO - Update id=762234494 is handled. Duration 359 ms by bot id=7849840849
2025-05-21 01:35:52,759 - aiogram.event - INFO - Update id=762234495 is handled. Duration 610 ms by bot id=7849840849
2025-05-21 01:35:53,557 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 01:35:53,778 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 01:35:54,434 - aiogram.event - INFO - Update id=762234496 is handled. Duration 877 ms by bot id=7849840849
2025-05-21 10:50:21,592 - __main__ - INFO - Starting bot...
2025-05-21 10:50:21,718 - aiogram.dispatcher - INFO - Start polling
2025-05-21 10:50:22,515 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 10:50:22,673 - handlers.admin_handlers - WARNING - Admin access denied for user 1088067370
2025-05-21 10:50:23,147 - aiogram.event - INFO - Update id=762234497 is not handled. Duration 482 ms by bot id=7849840849
2025-05-21 10:50:23,151 - aiogram.event - ERROR - Cause exception while process update id=762234497 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 66, in wrapper
    await event.answer(" ", show_alert=True)
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-05-21 10:50:24,039 - aiogram.event - INFO - Update id=762234498 is handled. Duration 206 ms by bot id=7849840849
2025-05-21 10:50:28,163 - handlers.admin_handlers - WARNING - Failed admin login attempt from user 1088067370
2025-05-21 10:50:28,168 - aiogram.event - INFO - Update id=762234499 is not handled. Duration 12 ms by bot id=7849840849
2025-05-21 10:50:28,169 - aiogram.event - ERROR - Cause exception while process update id=762234499 by bot id=7849840849
AttributeError: 'SecurityManager' object has no attribute 'failed_attempts'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 125, in check_admin_password
    attempts_left = security_manager.max_attempts - security_manager.failed_attempts.get(user_id, 0)
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'SecurityManager' object has no attribute 'failed_attempts'. Did you mean: 'add_failed_attempt'?
2025-05-21 10:50:32,659 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 10:50:32,815 - aiogram.event - INFO - Update id=762234500 is handled. Duration 227 ms by bot id=7849840849
2025-05-21 10:50:36,219 - aiogram.event - INFO - Update id=762234501 is handled. Duration 244 ms by bot id=7849840849
2025-05-21 10:50:38,420 - aiogram.event - INFO - Update id=762234502 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 10:50:38,421 - aiogram.event - ERROR - Cause exception while process update id=762234502 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:50:40,536 - aiogram.event - INFO - Update id=762234503 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 10:50:40,537 - aiogram.event - ERROR - Cause exception while process update id=762234503 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:50:41,019 - aiogram.event - INFO - Update id=762234504 is not handled. Duration 8 ms by bot id=7849840849
2025-05-21 10:50:41,021 - aiogram.event - ERROR - Cause exception while process update id=762234504 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:50:43,456 - aiogram.event - INFO - Update id=762234505 is not handled. Duration 10 ms by bot id=7849840849
2025-05-21 10:50:43,457 - aiogram.event - ERROR - Cause exception while process update id=762234505 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:50:44,716 - aiogram.event - INFO - Update id=762234506 is handled. Duration 358 ms by bot id=7849840849
2025-05-21 10:50:46,297 - aiogram.event - INFO - Update id=762234507 is handled. Duration 288 ms by bot id=7849840849
2025-05-21 10:50:49,403 - aiogram.event - INFO - Update id=762234508 is handled. Duration 250 ms by bot id=7849840849
2025-05-21 10:50:52,570 - aiogram.event - INFO - Update id=762234509 is handled. Duration 158 ms by bot id=7849840849
2025-05-21 10:50:54,326 - aiogram.event - INFO - Update id=762234510 is handled. Duration 168 ms by bot id=7849840849
2025-05-21 10:51:08,681 - database.mongodb - ERROR - Error adding product: 'NoneType' object has no attribute 'products'
2025-05-21 10:51:08,884 - aiogram.event - INFO - Update id=762234511 is handled. Duration 209 ms by bot id=7849840849
2025-05-21 10:51:11,039 - aiogram.event - INFO - Update id=762234512 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 10:51:11,040 - aiogram.event - ERROR - Cause exception while process update id=762234512 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:51:13,010 - aiogram.event - INFO - Update id=762234513 is not handled. Duration 6 ms by bot id=7849840849
2025-05-21 10:51:13,011 - aiogram.event - ERROR - Cause exception while process update id=762234513 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:51:13,318 - aiogram.event - INFO - Update id=762234514 is not handled. Duration 6 ms by bot id=7849840849
2025-05-21 10:51:13,319 - aiogram.event - ERROR - Cause exception while process update id=762234514 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:51:15,583 - aiogram.event - INFO - Update id=762234515 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 10:51:15,584 - aiogram.event - ERROR - Cause exception while process update id=762234515 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:51:16,754 - aiogram.event - INFO - Update id=762234516 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 10:51:16,755 - aiogram.event - ERROR - Cause exception while process update id=762234516 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:51:25,076 - aiogram.event - INFO - Update id=762234517 is not handled. Duration 6 ms by bot id=7849840849
2025-05-21 10:51:25,077 - aiogram.event - ERROR - Cause exception while process update id=762234517 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:51:25,269 - aiogram.event - INFO - Update id=762234518 is not handled. Duration 6 ms by bot id=7849840849
2025-05-21 10:51:25,270 - aiogram.event - ERROR - Cause exception while process update id=762234518 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 228, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 10:51:28,090 - aiogram.event - INFO - Update id=762234519 is handled. Duration 398 ms by bot id=7849840849
2025-05-21 10:51:31,621 - aiogram.event - INFO - Update id=762234520 is handled. Duration 345 ms by bot id=7849840849
2025-05-21 10:51:35,473 - aiogram.event - INFO - Update id=762234521 is handled. Duration 180 ms by bot id=7849840849
2025-05-21 10:51:46,717 - aiogram.event - INFO - Update id=762234522 is handled. Duration 221 ms by bot id=7849840849
2025-05-21 10:51:49,862 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 10:51:53,609 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 10:51:53,850 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 10:51:54,254 - aiogram.event - INFO - Update id=762234523 is handled. Duration 4393 ms by bot id=7849840849
2025-05-21 10:51:55,570 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 10:51:55,803 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 10:51:56,346 - aiogram.event - INFO - Update id=762234524 is handled. Duration 776 ms by bot id=7849840849
2025-05-21 10:52:00,011 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 10:52:00,012 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 10:52:00,252 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 2}]}
2025-05-21 10:52:00,253 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 10:52:00,722 - handlers.user_handlers - INFO - Created new user: 1088067370
2025-05-21 10:52:01,355 - aiogram.event - INFO - Update id=762234525 is handled. Duration 1344 ms by bot id=7849840849
2025-05-21 10:52:06,462 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 10:52:06,701 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 2}]}
2025-05-21 10:52:06,702 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 10:52:07,242 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 10:52:07,271 - aiogram.event - INFO - Update id=762234526 is handled. Duration 1040 ms by bot id=7849840849
2025-05-21 10:52:07,472 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 2}]}
2025-05-21 10:52:07,473 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 10:52:07,660 - aiogram.event - INFO - Update id=762234528 is handled. Duration 657 ms by bot id=7849840849
2025-05-21 10:52:08,175 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 10:52:08,399 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 2}]}
2025-05-21 10:52:08,400 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 10:52:08,570 - aiogram.event - INFO - Update id=762234527 is handled. Duration 1811 ms by bot id=7849840849
2025-05-21 10:52:08,914 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 10:52:09,143 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 2}]}
2025-05-21 10:52:09,144 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 10:52:09,461 - aiogram.event - INFO - Update id=762234529 is handled. Duration 2209 ms by bot id=7849840849
2025-05-21 10:52:17,947 - aiogram.event - INFO - Update id=762234530 is handled. Duration 172 ms by bot id=7849840849
2025-05-21 10:52:19,379 - aiogram.event - INFO - Update id=762234531 is handled. Duration 397 ms by bot id=7849840849
2025-05-21 10:52:30,165 - aiogram.event - INFO - Update id=762234532 is handled. Duration 1296 ms by bot id=7849840849
2025-05-21 10:52:34,514 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 10:52:34,744 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 2}]}
2025-05-21 10:52:34,746 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 10:52:34,986 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682ce74e4e930de2c48832c2
2025-05-21 10:52:35,224 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682ce74e4e930de2c48832c2'), 'name': '', 'category': ' ', 'price': 5000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 10:52:35,226 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682ce74e4e930de2c48832c2
2025-05-21 10:52:36,366 - aiogram.event - INFO - Update id=762234533 is handled. Duration 2086 ms by bot id=7849840849
2025-05-21 10:52:38,782 - aiogram.event - INFO - Update id=762234534 is handled. Duration 392 ms by bot id=7849840849
2025-05-21 10:52:39,869 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 10:52:40,104 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 10:52:40,460 - aiogram.event - INFO - Update id=762234535 is handled. Duration 591 ms by bot id=7849840849
2025-05-21 10:52:46,158 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 10:52:46,391 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 10:52:46,542 - aiogram.event - INFO - Update id=762234536 is handled. Duration 385 ms by bot id=7849840849
2025-05-21 10:52:49,755 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 10:52:49,992 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 10:52:50,146 - aiogram.event - INFO - Update id=762234537 is handled. Duration 392 ms by bot id=7849840849
2025-05-21 10:53:22,804 - aiogram.event - INFO - Update id=762234538 is handled. Duration 438 ms by bot id=7849840849
2025-05-21 10:53:30,266 - aiogram.event - INFO - Update id=762234539 is handled. Duration 176 ms by bot id=7849840849
2025-05-21 10:53:33,436 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 10:53:33,603 - aiogram.event - INFO - Update id=762234540 is handled. Duration 173 ms by bot id=7849840849
2025-05-21 10:53:36,872 - aiogram.event - INFO - Update id=762234541 is handled. Duration 211 ms by bot id=7849840849
2025-05-21 10:53:38,713 - aiogram.event - INFO - Update id=762234542 is handled. Duration 685 ms by bot id=7849840849
2025-05-21 10:53:43,141 - aiogram.event - INFO - Update id=762234543 is handled. Duration 568 ms by bot id=7849840849
2025-05-21 10:53:46,086 - aiogram.event - INFO - Update id=762234544 is handled. Duration 676 ms by bot id=7849840849
2025-05-21 10:53:48,054 - aiogram.event - INFO - Update id=762234545 is handled. Duration 618 ms by bot id=7849840849
2025-05-21 10:54:00,493 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=11:00
2025-05-21 10:54:00,650 - aiogram.event - INFO - Update id=762234546 is handled. Duration 410 ms by bot id=7849840849
2025-05-21 10:54:01,716 - aiogram.event - INFO - Update id=762234547 is handled. Duration 401 ms by bot id=7849840849
2025-05-21 10:54:03,714 - aiogram.event - INFO - Update id=762234548 is handled. Duration 441 ms by bot id=7849840849
2025-05-21 10:54:05,894 - aiogram.event - INFO - Update id=762234549 is handled. Duration 195 ms by bot id=7849840849
2025-05-21 10:54:07,197 - aiogram.event - INFO - Update id=762234550 is handled. Duration 329 ms by bot id=7849840849
2025-05-21 10:54:09,178 - aiogram.event - INFO - Update id=762234551 is handled. Duration 311 ms by bot id=7849840849
2025-05-21 10:54:11,426 - aiogram.event - INFO - Update id=762234552 is handled. Duration 226 ms by bot id=7849840849
2025-05-21 10:54:14,696 - aiogram.event - INFO - Update id=762234553 is handled. Duration 159 ms by bot id=7849840849
2025-05-21 10:54:16,893 - aiogram.event - INFO - Update id=762234554 is handled. Duration 170 ms by bot id=7849840849
2025-05-21 10:54:25,404 - aiogram.event - INFO - Update id=762234555 is handled. Duration 418 ms by bot id=7849840849
2025-05-21 10:54:29,368 - aiogram.event - INFO - Update id=762234556 is handled. Duration 591 ms by bot id=7849840849
2025-05-21 10:54:32,143 - aiogram.event - INFO - Update id=762234557 is handled. Duration 506 ms by bot id=7849840849
2025-05-21 10:54:34,655 - aiogram.event - INFO - Update id=762234558 is handled. Duration 176 ms by bot id=7849840849
2025-05-21 10:54:36,891 - aiogram.event - INFO - Update id=762234559 is handled. Duration 551 ms by bot id=7849840849
2025-05-21 10:54:39,018 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 10:54:39,246 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 10:54:39,247 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 10:54:39,600 - aiogram.event - INFO - Update id=762234560 is handled. Duration 588 ms by bot id=7849840849
2025-05-21 10:54:40,592 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 10:54:40,832 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 10:54:40,833 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 10:54:41,147 - aiogram.event - INFO - Update id=762234561 is handled. Duration 563 ms by bot id=7849840849
2025-05-21 10:54:48,415 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 10:54:48,647 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 10:54:48,648 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 10:54:49,035 - aiogram.event - INFO - Update id=762234562 is handled. Duration 626 ms by bot id=7849840849
2025-05-21 10:54:53,160 - aiogram.event - INFO - Update id=762234563 is handled. Duration 415 ms by bot id=7849840849
2025-05-21 10:54:55,010 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 10:54:55,316 - aiogram.event - INFO - Update id=762234564 is handled. Duration 788 ms by bot id=7849840849
2025-05-21 10:54:57,033 - aiogram.event - INFO - Update id=762234565 is handled. Duration 487 ms by bot id=7849840849
2025-05-21 10:54:57,252 - aiogram.event - INFO - Update id=762234567 is handled. Duration 384 ms by bot id=7849840849
2025-05-21 10:54:57,357 - aiogram.event - INFO - Update id=762234566 is handled. Duration 676 ms by bot id=7849840849
2025-05-21 10:54:57,553 - aiogram.event - INFO - Update id=762234569 is handled. Duration 390 ms by bot id=7849840849
2025-05-21 10:54:57,710 - aiogram.event - INFO - Update id=762234568 is handled. Duration 686 ms by bot id=7849840849
2025-05-21 10:54:57,721 - aiogram.event - INFO - Update id=762234570 is handled. Duration 419 ms by bot id=7849840849
2025-05-21 10:54:59,238 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 10:54:59,463 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-05-21 10:54:59,861 - aiogram.event - INFO - Update id=762234571 is handled. Duration 623 ms by bot id=7849840849
2025-05-21 10:55:13,273 - aiogram.event - INFO - Update id=762234572 is handled. Duration 694 ms by bot id=7849840849
2025-05-21 10:55:19,173 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-21 10:55:19,373 - aiogram.event - INFO - Update id=762234573 is handled. Duration 456 ms by bot id=7849840849
2025-05-21 11:00:59,550 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 11:00:59,808 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 11:00:59,810 - root - INFO - Bot stopped
2025-05-21 11:11:47,847 - __main__ - INFO - Starting bot...
2025-05-21 11:11:47,849 - aiogram.dispatcher - INFO - Start polling
2025-05-21 11:11:48,304 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 11:11:48,450 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 11:11:48,465 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 11:11:51,984 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 11:11:52,194 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 11:11:52,610 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 11:11:53,040 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 11:11:53,077 - aiogram.event - INFO - Update id=762234576 is handled. Duration 4611 ms by bot id=7849840849
2025-05-21 11:11:53,254 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 11:11:53,619 - aiogram.event - INFO - Update id=762234575 is handled. Duration 5170 ms by bot id=7849840849
2025-05-21 11:11:56,243 - aiogram.event - INFO - Update id=762234577 is handled. Duration 166 ms by bot id=7849840849
2025-05-21 11:11:59,799 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 11:11:59,953 - aiogram.event - INFO - Update id=762234578 is handled. Duration 157 ms by bot id=7849840849
2025-05-21 11:12:04,045 - aiogram.event - INFO - Update id=762234579 is handled. Duration 195 ms by bot id=7849840849
2025-05-21 11:12:05,529 - aiogram.event - INFO - Update id=762234580 is handled. Duration 512 ms by bot id=7849840849
2025-05-21 11:12:09,122 - aiogram.event - INFO - Update id=762234581 is handled. Duration 367 ms by bot id=7849840849
2025-05-21 11:12:10,192 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:12:10,419 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:12:10,727 - aiogram.event - INFO - Update id=762234582 is handled. Duration 535 ms by bot id=7849840849
2025-05-21 11:12:19,214 - aiogram.event - INFO - Update id=762234583 is handled. Duration 465 ms by bot id=7849840849
2025-05-21 11:12:21,544 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:12:21,755 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-05-21 11:12:22,046 - aiogram.event - INFO - Update id=762234584 is handled. Duration 501 ms by bot id=7849840849
2025-05-21 11:12:27,235 - aiogram.event - INFO - Update id=762234585 is not handled. Duration 441 ms by bot id=7849840849
2025-05-21 11:12:27,236 - aiogram.event - ERROR - Cause exception while process update id=762234585 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 215, in list_products
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
2025-05-21 11:12:29,490 - aiogram.event - INFO - Update id=762234586 is handled. Duration 596 ms by bot id=7849840849
2025-05-21 11:12:30,379 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:12:30,592 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 11:12:30,593 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:12:31,030 - aiogram.event - INFO - Update id=762234587 is handled. Duration 656 ms by bot id=7849840849
2025-05-21 11:12:31,935 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:12:32,150 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 11:12:32,151 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:12:32,519 - aiogram.event - INFO - Update id=762234588 is handled. Duration 593 ms by bot id=7849840849
2025-05-21 11:12:33,573 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:12:33,781 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 11:12:33,783 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:12:34,073 - aiogram.event - INFO - Update id=762234589 is handled. Duration 510 ms by bot id=7849840849
2025-05-21 11:12:36,575 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:12:36,785 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 11:12:36,786 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:12:37,158 - aiogram.event - INFO - Update id=762234590 is handled. Duration 617 ms by bot id=7849840849
2025-05-21 11:12:38,941 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:12:39,151 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 11:12:39,153 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:12:39,518 - aiogram.event - INFO - Update id=762234591 is handled. Duration 587 ms by bot id=7849840849
2025-05-21 11:12:40,962 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:12:41,177 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 11:12:41,178 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:12:41,577 - aiogram.event - INFO - Update id=762234592 is handled. Duration 631 ms by bot id=7849840849
2025-05-21 11:12:43,650 - aiogram.event - INFO - Update id=762234593 is handled. Duration 398 ms by bot id=7849840849
2025-05-21 11:12:45,033 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:12:45,249 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-05-21 11:12:45,542 - aiogram.event - INFO - Update id=762234594 is handled. Duration 510 ms by bot id=7849840849
2025-05-21 11:12:46,873 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:12:46,873 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:12:47,083 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 11:12:47,085 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:12:47,850 - aiogram.event - INFO - Update id=762234595 is handled. Duration 978 ms by bot id=7849840849
2025-05-21 11:12:49,964 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:12:50,179 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 11:12:50,180 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:12:50,461 - aiogram.event - INFO - Update id=762234596 is handled. Duration 923 ms by bot id=7849840849
2025-05-21 11:13:00,217 - aiogram.event - INFO - Update id=762234597 is handled. Duration 196 ms by bot id=7849840849
2025-05-21 11:13:02,235 - aiogram.event - INFO - Update id=762234598 is handled. Duration 371 ms by bot id=7849840849
2025-05-21 11:13:08,546 - aiogram.event - INFO - Update id=762234599 is handled. Duration 1309 ms by bot id=7849840849
2025-05-21 11:13:10,434 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:13:10,645 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 11:13:10,646 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:13:10,861 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6a913ffb08259c3526a3
2025-05-21 11:13:11,071 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6a913ffb08259c3526a3'), 'name': 'ddbd', 'category': '', 'price': 10000, 'description': 'sdvdv', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 11:13:11,072 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6a913ffb08259c3526a3
2025-05-21 11:13:12,257 - aiogram.event - INFO - Update id=762234600 is handled. Duration 2045 ms by bot id=7849840849
2025-05-21 11:13:14,171 - aiogram.event - INFO - Update id=762234601 is handled. Duration 358 ms by bot id=7849840849
2025-05-21 11:13:15,702 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:13:15,913 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 11:13:16,065 - aiogram.event - INFO - Update id=762234602 is handled. Duration 363 ms by bot id=7849840849
2025-05-21 11:13:18,113 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:13:18,331 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:13:18,822 - aiogram.event - INFO - Update id=762234603 is handled. Duration 709 ms by bot id=7849840849
2025-05-21 11:13:26,497 - aiogram.event - INFO - Update id=762234604 is handled. Duration 237 ms by bot id=7849840849
2025-05-21 11:13:28,124 - aiogram.event - INFO - Update id=762234605 is handled. Duration 545 ms by bot id=7849840849
2025-05-21 11:13:31,249 - aiogram.event - INFO - Update id=762234606 is handled. Duration 469 ms by bot id=7849840849
2025-05-21 11:13:32,544 - aiogram.event - INFO - Update id=762234607 is handled. Duration 302 ms by bot id=7849840849
2025-05-21 11:13:35,214 - aiogram.event - INFO - Update id=762234608 is handled. Duration 164 ms by bot id=7849840849
2025-05-21 11:13:37,424 - aiogram.event - INFO - Update id=762234609 is handled. Duration 163 ms by bot id=7849840849
2025-05-21 11:13:39,741 - aiogram.event - INFO - Update id=762234610 is handled. Duration 239 ms by bot id=7849840849
2025-05-21 11:13:48,539 - aiogram.event - INFO - Update id=762234611 is handled. Duration 423 ms by bot id=7849840849
2025-05-21 11:13:50,902 - aiogram.event - INFO - Update id=762234612 is handled. Duration 528 ms by bot id=7849840849
2025-05-21 11:13:53,101 - aiogram.event - INFO - Update id=762234613 is handled. Duration 388 ms by bot id=7849840849
2025-05-21 11:13:54,972 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:13:55,022 - aiogram.event - INFO - Update id=762234614 is handled. Duration 610 ms by bot id=7849840849
2025-05-21 11:13:55,191 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 11:13:55,729 - aiogram.event - INFO - Update id=762234615 is handled. Duration 757 ms by bot id=7849840849
2025-05-21 11:14:00,487 - aiogram.event - INFO - Update id=762234616 is handled. Duration 446 ms by bot id=7849840849
2025-05-21 11:14:49,467 - aiogram.event - INFO - Update id=762234617 is handled. Duration 388 ms by bot id=7849840849
2025-05-21 11:14:50,384 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:14:50,598 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 11:14:50,747 - aiogram.event - INFO - Update id=762234618 is handled. Duration 363 ms by bot id=7849840849
2025-05-21 11:14:52,579 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:14:52,788 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 11:14:53,032 - aiogram.event - INFO - Update id=762234619 is handled. Duration 453 ms by bot id=7849840849
2025-05-21 11:14:54,038 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:14:54,249 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 11:14:54,834 - aiogram.event - INFO - Update id=762234620 is handled. Duration 796 ms by bot id=7849840849
2025-05-21 11:15:15,785 - aiogram.event - INFO - Update id=762234621 is handled. Duration 437 ms by bot id=7849840849
2025-05-21 11:15:16,910 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:15:17,130 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 11:15:17,608 - aiogram.event - INFO - Update id=762234622 is handled. Duration 698 ms by bot id=7849840849
2025-05-21 11:15:22,083 - aiogram.event - INFO - Update id=762234623 is handled. Duration 582 ms by bot id=7849840849
2025-05-21 11:16:44,249 - aiogram.event - INFO - Update id=762234624 is handled. Duration 368 ms by bot id=7849840849
2025-05-21 11:16:45,409 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:16:45,627 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 11:16:46,215 - aiogram.event - INFO - Update id=762234625 is handled. Duration 806 ms by bot id=7849840849
2025-05-21 11:18:25,378 - aiogram.event - INFO - Update id=762234626 is handled. Duration 381 ms by bot id=7849840849
2025-05-21 11:18:26,407 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:18:26,617 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 11:18:27,237 - aiogram.event - INFO - Update id=762234627 is handled. Duration 829 ms by bot id=7849840849
2025-05-21 11:18:37,808 - aiogram.event - INFO - Update id=762234628 is handled. Duration 342 ms by bot id=7849840849
2025-05-21 11:18:39,145 - aiogram.event - INFO - Update id=762234629 is handled. Duration 306 ms by bot id=7849840849
2025-05-21 11:18:40,865 - aiogram.event - INFO - Update id=762234630 is handled. Duration 559 ms by bot id=7849840849
2025-05-21 11:18:42,882 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:43,095 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:18:43,096 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:43,394 - aiogram.event - INFO - Update id=762234631 is handled. Duration 522 ms by bot id=7849840849
2025-05-21 11:18:44,355 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:44,567 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:18:44,568 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:44,920 - aiogram.event - INFO - Update id=762234632 is handled. Duration 572 ms by bot id=7849840849
2025-05-21 11:18:45,803 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:46,023 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:18:46,025 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:46,403 - aiogram.event - INFO - Update id=762234633 is handled. Duration 608 ms by bot id=7849840849
2025-05-21 11:18:48,302 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:48,527 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:18:48,529 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:48,895 - aiogram.event - INFO - Update id=762234634 is handled. Duration 612 ms by bot id=7849840849
2025-05-21 11:18:50,230 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:50,448 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 11:18:50,449 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:50,824 - aiogram.event - INFO - Update id=762234635 is handled. Duration 604 ms by bot id=7849840849
2025-05-21 11:18:55,044 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:55,256 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 11:18:55,257 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:18:55,728 - aiogram.event - INFO - Update id=762234636 is handled. Duration 691 ms by bot id=7849840849
2025-05-21 11:18:58,879 - aiogram.event - INFO - Update id=762234637 is handled. Duration 372 ms by bot id=7849840849
2025-05-21 11:19:00,810 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:19:01,025 - database.mongodb - INFO - [DEBUG] Found 2 products in category  
2025-05-21 11:19:01,642 - aiogram.event - INFO - Update id=762234638 is handled. Duration 832 ms by bot id=7849840849
2025-05-21 11:19:02,888 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:19:02,888 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:19:03,115 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 11:19:03,116 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:19:04,186 - aiogram.event - INFO - Update id=762234639 is handled. Duration 1298 ms by bot id=7849840849
2025-05-21 11:19:06,167 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:19:06,380 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 11:19:06,381 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:19:07,065 - aiogram.event - INFO - Update id=762234640 is handled. Duration 1330 ms by bot id=7849840849
2025-05-21 11:19:13,035 - aiogram.event - INFO - Update id=762234641 is handled. Duration 225 ms by bot id=7849840849
2025-05-21 11:19:14,886 - aiogram.event - INFO - Update id=762234642 is handled. Duration 453 ms by bot id=7849840849
2025-05-21 11:19:19,590 - aiogram.event - INFO - Update id=762234643 is handled. Duration 1189 ms by bot id=7849840849
2025-05-21 11:19:21,979 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:19:22,195 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 11:19:22,196 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:19:22,408 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:19:22,619 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d6f1cc1d3cb78d9c5c79f'), 'name': '', 'category': ' ', 'price': 575757, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 11:19:22,621 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d6f1cc1d3cb78d9c5c79f
2025-05-21 11:19:23,819 - aiogram.event - INFO - Update id=762234644 is handled. Duration 2072 ms by bot id=7849840849
2025-05-21 11:19:25,698 - aiogram.event - INFO - Update id=762234645 is handled. Duration 391 ms by bot id=7849840849
2025-05-21 11:19:26,849 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:19:27,103 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:19:27,428 - aiogram.event - INFO - Update id=762234646 is handled. Duration 579 ms by bot id=7849840849
2025-05-21 11:19:51,418 - aiogram.event - INFO - Update id=762234647 is handled. Duration 234 ms by bot id=7849840849
2025-05-21 11:19:53,004 - aiogram.event - INFO - Update id=762234648 is handled. Duration 539 ms by bot id=7849840849
2025-05-21 11:21:28,487 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:21:28,487 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:21:28,704 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:21:28,705 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:21:29,484 - aiogram.event - INFO - Update id=762234649 is handled. Duration 998 ms by bot id=7849840849
2025-05-21 11:21:32,494 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:21:32,707 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:21:32,708 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:21:33,010 - aiogram.event - INFO - Update id=762234650 is handled. Duration 944 ms by bot id=7849840849
2025-05-21 11:22:05,078 - aiogram.event - INFO - Update id=762234651 is handled. Duration 167 ms by bot id=7849840849
2025-05-21 11:22:08,774 - aiogram.event - INFO - Update id=762234652 is handled. Duration 377 ms by bot id=7849840849
2025-05-21 11:22:13,399 - aiogram.event - INFO - Update id=762234653 is handled. Duration 1352 ms by bot id=7849840849
2025-05-21 11:22:19,810 - aiogram.event - INFO - Update id=762234654 is handled. Duration 358 ms by bot id=7849840849
2025-05-21 11:22:26,863 - aiogram.event - INFO - Update id=762234655 is handled. Duration 971 ms by bot id=7849840849
2025-05-21 11:22:31,099 - aiogram.event - INFO - Update id=762234656 is handled. Duration 373 ms by bot id=7849840849
2025-05-21 11:22:32,726 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:22:32,944 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:22:33,424 - aiogram.event - INFO - Update id=762234657 is handled. Duration 698 ms by bot id=7849840849
2025-05-21 11:22:41,010 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:22:41,011 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:22:41,236 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:22:41,237 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:22:42,009 - aiogram.event - INFO - Update id=762234658 is handled. Duration 1000 ms by bot id=7849840849
2025-05-21 11:22:44,844 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:22:45,055 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:22:45,057 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:22:45,372 - aiogram.event - INFO - Update id=762234659 is handled. Duration 956 ms by bot id=7849840849
2025-05-21 11:22:53,440 - aiogram.event - INFO - Update id=762234660 is handled. Duration 155 ms by bot id=7849840849
2025-05-21 11:22:56,064 - aiogram.event - INFO - Update id=762234661 is handled. Duration 380 ms by bot id=7849840849
2025-05-21 11:23:00,527 - aiogram.event - INFO - Update id=762234662 is handled. Duration 1171 ms by bot id=7849840849
2025-05-21 11:23:03,462 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:03,673 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 1}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:23:03,675 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:03,894 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:04,105 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:23:04,106 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:04,949 - aiogram.event - INFO - Update id=762234663 is handled. Duration 1712 ms by bot id=7849840849
2025-05-21 11:23:07,721 - aiogram.event - INFO - Update id=762234664 is handled. Duration 407 ms by bot id=7849840849
2025-05-21 11:23:09,204 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:23:09,416 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:23:09,819 - aiogram.event - INFO - Update id=762234665 is handled. Duration 616 ms by bot id=7849840849
2025-05-21 11:23:34,540 - aiogram.event - INFO - Update id=762234666 is handled. Duration 190 ms by bot id=7849840849
2025-05-21 11:23:36,613 - aiogram.event - INFO - Update id=762234667 is handled. Duration 550 ms by bot id=7849840849
2025-05-21 11:23:39,124 - aiogram.event - INFO - Update id=762234668 is handled. Duration 510 ms by bot id=7849840849
2025-05-21 11:23:40,414 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:40,632 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:23:40,634 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:41,291 - aiogram.event - INFO - Update id=762234669 is handled. Duration 885 ms by bot id=7849840849
2025-05-21 11:23:42,343 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:42,556 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:23:42,559 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:43,033 - aiogram.event - INFO - Update id=762234670 is handled. Duration 699 ms by bot id=7849840849
2025-05-21 11:23:46,518 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:46,742 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:23:46,744 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:23:47,222 - aiogram.event - INFO - Update id=762234671 is handled. Duration 709 ms by bot id=7849840849
2025-05-21 11:23:49,770 - aiogram.event - INFO - Update id=762234672 is handled. Duration 357 ms by bot id=7849840849
2025-05-21 11:24:42,704 - aiogram.event - INFO - Update id=762234673 is handled. Duration 447 ms by bot id=7849840849
2025-05-21 11:24:44,499 - aiogram.event - INFO - Update id=762234674 is handled. Duration 645 ms by bot id=7849840849
2025-05-21 11:24:46,007 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:24:46,222 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 11:24:46,386 - aiogram.event - INFO - Update id=762234675 is handled. Duration 379 ms by bot id=7849840849
2025-05-21 11:24:47,717 - aiogram.event - INFO - Update id=762234676 is handled. Duration 171 ms by bot id=7849840849
2025-05-21 11:24:49,216 - aiogram.event - INFO - Update id=762234677 is handled. Duration 378 ms by bot id=7849840849
2025-05-21 11:24:50,421 - aiogram.event - INFO - Update id=762234678 is handled. Duration 398 ms by bot id=7849840849
2025-05-21 11:24:51,452 - aiogram.event - INFO - Update id=762234679 is handled. Duration 305 ms by bot id=7849840849
2025-05-21 11:24:52,452 - aiogram.event - INFO - Update id=762234680 is handled. Duration 166 ms by bot id=7849840849
2025-05-21 11:25:03,589 - aiogram.event - INFO - Update id=762234681 is handled. Duration 179 ms by bot id=7849840849
2025-05-21 11:25:07,971 - aiogram.event - INFO - Update id=762234682 is handled. Duration 176 ms by bot id=7849840849
2025-05-21 11:25:11,034 - aiogram.event - INFO - Update id=762234683 is handled. Duration 236 ms by bot id=7849840849
2025-05-21 11:25:20,667 - aiogram.event - INFO - Update id=762234684 is handled. Duration 943 ms by bot id=7849840849
2025-05-21 11:26:02,825 - aiogram.event - INFO - Update id=762234685 is handled. Duration 446 ms by bot id=7849840849
2025-05-21 11:26:04,787 - aiogram.event - INFO - Update id=762234686 is handled. Duration 595 ms by bot id=7849840849
2025-05-21 11:26:10,046 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-21 11:26:10,241 - aiogram.event - INFO - Update id=762234687 is handled. Duration 412 ms by bot id=7849840849
2025-05-21 11:26:14,702 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 11:26:14,860 - aiogram.event - INFO - Update id=762234688 is handled. Duration 583 ms by bot id=7849840849
2025-05-21 11:26:16,623 - aiogram.event - INFO - Update id=762234689 is handled. Duration 437 ms by bot id=7849840849
2025-05-21 11:26:33,844 - aiogram.event - INFO - Update id=762234690 is handled. Duration 406 ms by bot id=7849840849
2025-05-21 11:26:37,875 - aiogram.event - INFO - Update id=762234691 is handled. Duration 613 ms by bot id=7849840849
2025-05-21 11:26:38,792 - aiogram.event - INFO - Update id=762234692 is handled. Duration 181 ms by bot id=7849840849
2025-05-21 11:26:40,318 - aiogram.event - INFO - Update id=762234693 is handled. Duration 560 ms by bot id=7849840849
2025-05-21 11:26:48,187 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-21 11:26:48,342 - aiogram.event - INFO - Update id=762234694 is handled. Duration 394 ms by bot id=7849840849
2025-05-21 11:26:51,440 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 11:26:51,601 - aiogram.event - INFO - Update id=762234695 is handled. Duration 600 ms by bot id=7849840849
2025-05-21 11:26:53,126 - aiogram.event - INFO - Update id=762234696 is handled. Duration 365 ms by bot id=7849840849
2025-05-21 11:26:53,926 - aiogram.event - INFO - Update id=762234697 is handled. Duration 365 ms by bot id=7849840849
2025-05-21 11:26:54,301 - aiogram.event - INFO - Update id=762234698 is handled. Duration 378 ms by bot id=7849840849
2025-05-21 11:26:54,705 - aiogram.event - INFO - Update id=762234699 is handled. Duration 642 ms by bot id=7849840849
2025-05-21 11:26:55,849 - aiogram.event - INFO - Update id=762234700 is handled. Duration 527 ms by bot id=7849840849
2025-05-21 11:26:59,304 - aiogram.event - INFO - Update id=762234701 is handled. Duration 194 ms by bot id=7849840849
2025-05-21 11:27:03,880 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=11:00
2025-05-21 11:27:04,091 - aiogram.event - INFO - Update id=762234702 is handled. Duration 445 ms by bot id=7849840849
2025-05-21 11:27:07,611 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 11:27:07,830 - aiogram.event - INFO - Update id=762234703 is handled. Duration 635 ms by bot id=7849840849
2025-05-21 11:27:17,176 - aiogram.event - INFO - Update id=762234704 is handled. Duration 5932 ms by bot id=7849840849
2025-05-21 11:27:19,326 - aiogram.event - INFO - Update id=762234705 is handled. Duration 763 ms by bot id=7849840849
2025-05-21 11:27:23,480 - aiogram.event - INFO - Update id=762234706 is handled. Duration 794 ms by bot id=7849840849
2025-05-21 11:27:27,522 - aiogram.event - INFO - Update id=762234707 is handled. Duration 1105 ms by bot id=7849840849
2025-05-21 11:27:28,449 - aiogram.event - INFO - Update id=762234708 is handled. Duration 705 ms by bot id=7849840849
2025-05-21 11:27:30,684 - aiogram.event - INFO - Update id=762234709 is handled. Duration 701 ms by bot id=7849840849
2025-05-21 11:27:34,942 - aiogram.event - INFO - Update id=762234710 is handled. Duration 735 ms by bot id=7849840849
2025-05-21 11:27:39,338 - aiogram.event - INFO - Update id=762234711 is handled. Duration 744 ms by bot id=7849840849
2025-05-21 11:27:43,380 - aiogram.event - INFO - Update id=762234712 is handled. Duration 853 ms by bot id=7849840849
2025-05-21 11:27:46,637 - aiogram.event - INFO - Update id=762234713 is handled. Duration 778 ms by bot id=7849840849
2025-05-21 11:27:49,605 - aiogram.event - INFO - Update id=762234714 is handled. Duration 772 ms by bot id=7849840849
2025-05-21 11:27:53,280 - aiogram.event - INFO - Update id=762234715 is handled. Duration 780 ms by bot id=7849840849
2025-05-21 11:27:56,442 - aiogram.event - INFO - Update id=762234716 is handled. Duration 697 ms by bot id=7849840849
2025-05-21 11:27:58,974 - aiogram.event - INFO - Update id=762234717 is handled. Duration 793 ms by bot id=7849840849
2025-05-21 11:27:59,110 - aiogram.event - INFO - Update id=762234718 is handled. Duration 650 ms by bot id=7849840849
2025-05-21 11:28:01,986 - aiogram.event - INFO - Update id=762234719 is handled. Duration 715 ms by bot id=7849840849
2025-05-21 11:28:15,103 - aiogram.event - INFO - Update id=762234720 is handled. Duration 883 ms by bot id=7849840849
2025-05-21 11:28:17,815 - aiogram.event - INFO - Update id=762234721 is handled. Duration 714 ms by bot id=7849840849
2025-05-21 11:28:21,314 - aiogram.event - INFO - Update id=762234722 is handled. Duration 729 ms by bot id=7849840849
2025-05-21 11:28:25,722 - aiogram.event - INFO - Update id=762234723 is handled. Duration 711 ms by bot id=7849840849
2025-05-21 11:28:29,102 - aiogram.event - INFO - Update id=762234724 is handled. Duration 718 ms by bot id=7849840849
2025-05-21 11:28:33,187 - aiogram.event - INFO - Update id=762234725 is handled. Duration 2416 ms by bot id=7849840849
2025-05-21 11:28:35,373 - aiogram.event - INFO - Update id=762234726 is handled. Duration 755 ms by bot id=7849840849
2025-05-21 11:28:38,392 - aiogram.event - INFO - Update id=762234727 is handled. Duration 711 ms by bot id=7849840849
2025-05-21 11:28:44,865 - aiogram.event - INFO - Update id=762234728 is handled. Duration 714 ms by bot id=7849840849
2025-05-21 11:28:56,502 - aiogram.event - INFO - Update id=762234729 is handled. Duration 881 ms by bot id=7849840849
2025-05-21 11:29:02,188 - aiogram.event - INFO - Update id=762234730 is handled. Duration 940 ms by bot id=7849840849
2025-05-21 11:29:06,482 - aiogram.event - INFO - Update id=762234731 is handled. Duration 784 ms by bot id=7849840849
2025-05-21 11:29:13,577 - aiogram.event - INFO - Update id=762234732 is handled. Duration 795 ms by bot id=7849840849
2025-05-21 11:29:27,979 - aiogram.event - INFO - Update id=762234733 is handled. Duration 730 ms by bot id=7849840849
2025-05-21 11:29:35,029 - aiogram.event - INFO - Update id=762234734 is handled. Duration 745 ms by bot id=7849840849
2025-05-21 11:29:51,226 - aiogram.event - INFO - Update id=762234735 is handled. Duration 706 ms by bot id=7849840849
2025-05-21 11:29:55,975 - aiogram.event - INFO - Update id=762234736 is handled. Duration 907 ms by bot id=7849840849
2025-05-21 11:29:58,026 - aiogram.event - INFO - Update id=762234737 is handled. Duration 589 ms by bot id=7849840849
2025-05-21 11:30:01,065 - aiogram.event - INFO - Update id=762234738 is handled. Duration 198 ms by bot id=7849840849
2025-05-21 11:30:03,000 - aiogram.event - INFO - Update id=762234739 is handled. Duration 500 ms by bot id=7849840849
2025-05-21 11:30:06,100 - aiogram.event - INFO - Update id=762234740 is handled. Duration 516 ms by bot id=7849840849
2025-05-21 11:30:08,290 - aiogram.event - INFO - Update id=762234741 is handled. Duration 417 ms by bot id=7849840849
2025-05-21 11:30:09,317 - aiogram.event - INFO - Update id=762234742 is handled. Duration 307 ms by bot id=7849840849
2025-05-21 11:30:10,666 - aiogram.event - INFO - Update id=762234743 is handled. Duration 316 ms by bot id=7849840849
2025-05-21 11:30:12,517 - aiogram.event - INFO - Update id=762234744 is handled. Duration 290 ms by bot id=7849840849
2025-05-21 11:30:14,853 - aiogram.event - INFO - Update id=762234745 is handled. Duration 182 ms by bot id=7849840849
2025-05-21 11:30:16,146 - aiogram.event - INFO - Update id=762234746 is handled. Duration 210 ms by bot id=7849840849
2025-05-21 11:30:28,381 - aiogram.event - INFO - Update id=762234747 is handled. Duration 384 ms by bot id=7849840849
2025-05-21 11:30:35,278 - aiogram.event - INFO - Update id=762234748 is handled. Duration 537 ms by bot id=7849840849
2025-05-21 11:30:37,370 - aiogram.event - INFO - Update id=762234749 is handled. Duration 587 ms by bot id=7849840849
2025-05-21 11:30:39,224 - aiogram.event - INFO - Update id=762234750 is handled. Duration 509 ms by bot id=7849840849
2025-05-21 11:30:41,132 - aiogram.event - INFO - Update id=762234751 is handled. Duration 543 ms by bot id=7849840849
2025-05-21 11:30:42,079 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:42,297 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:30:42,299 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:42,598 - aiogram.event - INFO - Update id=762234752 is handled. Duration 526 ms by bot id=7849840849
2025-05-21 11:30:43,737 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:44,404 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': '', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:30:44,405 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:44,717 - aiogram.event - INFO - Update id=762234753 is handled. Duration 987 ms by bot id=7849840849
2025-05-21 11:30:47,325 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:47,537 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:30:47,539 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:47,731 - aiogram.event - INFO - Update id=762234754 is handled. Duration 629 ms by bot id=7849840849
2025-05-21 11:30:50,542 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:50,757 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:30:50,759 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:51,122 - aiogram.event - INFO - Update id=762234755 is handled. Duration 589 ms by bot id=7849840849
2025-05-21 11:30:55,596 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:55,816 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:30:55,817 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:30:56,089 - aiogram.event - INFO - Update id=762234756 is handled. Duration 712 ms by bot id=7849840849
2025-05-21 11:30:59,815 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:00,029 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': '', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:31:00,031 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:00,366 - aiogram.event - INFO - Update id=762234757 is handled. Duration 559 ms by bot id=7849840849
2025-05-21 11:31:02,178 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:02,387 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:31:02,389 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:02,548 - aiogram.event - INFO - Update id=762234758 is handled. Duration 596 ms by bot id=7849840849
2025-05-21 11:31:06,349 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:06,560 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIFD2gs5lAik8KwySt_xFhAVP9YRIUjAAKy9DEb2gxgSWYJE0t4FhV6AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:31:06,562 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:07,060 - aiogram.event - INFO - Update id=762234759 is handled. Duration 720 ms by bot id=7849840849
2025-05-21 11:31:14,047 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:14,258 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:31:14,260 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:14,519 - aiogram.event - INFO - Update id=762234760 is handled. Duration 702 ms by bot id=7849840849
2025-05-21 11:31:19,172 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:19,389 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:31:19,391 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:19,674 - aiogram.event - INFO - Update id=762234761 is handled. Duration 510 ms by bot id=7849840849
2025-05-21 11:31:21,857 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:22,079 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:31:22,081 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:22,362 - aiogram.event - INFO - Update id=762234762 is handled. Duration 512 ms by bot id=7849840849
2025-05-21 11:31:24,332 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:24,552 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:31:24,554 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:31:24,825 - aiogram.event - INFO - Update id=762234763 is handled. Duration 501 ms by bot id=7849840849
2025-05-21 11:32:41,736 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:32:41,949 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:32:41,951 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:32:42,226 - aiogram.event - INFO - Update id=762234764 is handled. Duration 498 ms by bot id=7849840849
2025-05-21 11:35:03,648 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 11:35:03,721 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2775)
2025-05-21 11:35:03,722 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7849840849)
2025-05-21 11:35:03,912 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 11:35:03,914 - root - INFO - Bot stopped
2025-05-21 11:35:33,942 - __main__ - INFO - Starting bot...
2025-05-21 11:35:33,946 - aiogram.dispatcher - INFO - Start polling
2025-05-21 11:35:34,429 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 11:35:34,567 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 11:35:34,583 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 11:35:38,233 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 11:35:38,457 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 11:35:39,142 - aiogram.event - INFO - Update id=762234766 is handled. Duration 4558 ms by bot id=7849840849
2025-05-21 11:35:39,354 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 11:35:39,591 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 11:35:39,985 - aiogram.event - INFO - Update id=762234765 is handled. Duration 5418 ms by bot id=7849840849
2025-05-21 11:35:40,486 - aiogram.event - INFO - Update id=762234767 is handled. Duration 203 ms by bot id=7849840849
2025-05-21 11:35:43,717 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 11:35:44,045 - aiogram.event - INFO - Update id=762234768 is handled. Duration 334 ms by bot id=7849840849
2025-05-21 11:35:46,808 - aiogram.event - INFO - Update id=762234769 is handled. Duration 358 ms by bot id=7849840849
2025-05-21 11:35:48,515 - aiogram.event - INFO - Update id=762234770 is handled. Duration 520 ms by bot id=7849840849
2025-05-21 11:35:52,356 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-21 11:35:52,555 - aiogram.event - INFO - Update id=762234771 is handled. Duration 417 ms by bot id=7849840849
2025-05-21 11:35:54,574 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 11:35:54,741 - aiogram.event - INFO - Update id=762234772 is handled. Duration 596 ms by bot id=7849840849
2025-05-21 11:35:56,829 - aiogram.event - INFO - Update id=762234773 is handled. Duration 449 ms by bot id=7849840849
2025-05-21 11:35:58,809 - aiogram.event - INFO - Update id=762234774 is handled. Duration 550 ms by bot id=7849840849
2025-05-21 11:36:01,547 - aiogram.event - INFO - Update id=762234775 is handled. Duration 230 ms by bot id=7849840849
2025-05-21 11:36:03,499 - aiogram.event - INFO - Update id=762234776 is handled. Duration 540 ms by bot id=7849840849
2025-05-21 11:36:05,038 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:05,244 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:36:05,245 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:05,532 - aiogram.event - INFO - Update id=762234777 is handled. Duration 500 ms by bot id=7849840849
2025-05-21 11:36:06,260 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:06,459 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:36:06,461 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:06,882 - aiogram.event - INFO - Update id=762234778 is handled. Duration 631 ms by bot id=7849840849
2025-05-21 11:36:12,794 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:36:12,995 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:36:13,298 - aiogram.event - INFO - Update id=762234779 is handled. Duration 712 ms by bot id=7849840849
2025-05-21 11:36:23,034 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:23,235 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:36:23,237 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:23,569 - aiogram.event - INFO - Update id=762234780 is handled. Duration 542 ms by bot id=7849840849
2025-05-21 11:36:27,573 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:27,776 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:36:27,777 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:28,265 - aiogram.event - INFO - Update id=762234781 is handled. Duration 705 ms by bot id=7849840849
2025-05-21 11:36:29,406 - aiogram.event - INFO - Update id=762234782 is handled. Duration 473 ms by bot id=7849840849
2025-05-21 11:36:30,621 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:36:30,823 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:36:31,148 - aiogram.event - INFO - Update id=762234783 is handled. Duration 721 ms by bot id=7849840849
2025-05-21 11:36:33,777 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:36:33,778 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:33,978 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:36:33,979 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:34,724 - aiogram.event - INFO - Update id=762234784 is handled. Duration 947 ms by bot id=7849840849
2025-05-21 11:36:37,453 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:37,653 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:36:37,655 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:36:38,097 - aiogram.event - INFO - Update id=762234785 is handled. Duration 1052 ms by bot id=7849840849
2025-05-21 11:36:45,124 - aiogram.event - INFO - Update id=762234786 is handled. Duration 255 ms by bot id=7849840849
2025-05-21 11:36:46,917 - aiogram.event - INFO - Update id=762234787 is handled. Duration 400 ms by bot id=7849840849
2025-05-21 11:36:52,443 - aiogram.event - INFO - Update id=762234788 is handled. Duration 1284 ms by bot id=7849840849
2025-05-21 11:36:53,670 - aiogram.event - INFO - Update id=762234789 is handled. Duration 392 ms by bot id=7849840849
2025-05-21 11:36:54,894 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:36:55,093 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:36:55,397 - aiogram.event - INFO - Update id=762234790 is handled. Duration 702 ms by bot id=7849840849
2025-05-21 11:37:00,346 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:00,544 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 1}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:37:00,546 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:00,755 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:00,953 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:37:00,955 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:01,830 - aiogram.event - INFO - Update id=762234791 is handled. Duration 1692 ms by bot id=7849840849
2025-05-21 11:37:05,595 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:37:05,595 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:05,797 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:37:05,799 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:05,948 - aiogram.event - INFO - Update id=762234792 is handled. Duration 354 ms by bot id=7849840849
2025-05-21 11:37:07,888 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:37:07,888 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:08,523 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:37:08,525 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:09,400 - aiogram.event - INFO - Update id=762234793 is handled. Duration 1512 ms by bot id=7849840849
2025-05-21 11:37:15,354 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:15,553 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:37:15,555 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:37:15,890 - aiogram.event - INFO - Update id=762234794 is handled. Duration 944 ms by bot id=7849840849
2025-05-21 11:37:21,595 - aiogram.event - INFO - Update id=762234795 is handled. Duration 167 ms by bot id=7849840849
2025-05-21 11:37:23,773 - aiogram.event - INFO - Update id=762234796 is handled. Duration 415 ms by bot id=7849840849
2025-05-21 11:37:28,534 - aiogram.event - INFO - Update id=762234797 is handled. Duration 1166 ms by bot id=7849840849
2025-05-21 11:37:29,693 - aiogram.event - INFO - Update id=762234798 is handled. Duration 369 ms by bot id=7849840849
2025-05-21 11:37:30,898 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:37:31,095 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:37:31,529 - aiogram.event - INFO - Update id=762234799 is handled. Duration 831 ms by bot id=7849840849
2025-05-21 11:37:34,425 - aiogram.event - INFO - Update id=762234800 is handled. Duration 358 ms by bot id=7849840849
2025-05-21 11:37:36,884 - aiogram.event - INFO - Update id=762234801 is handled. Duration 964 ms by bot id=7849840849
2025-05-21 11:37:37,701 - aiogram.event - INFO - Update id=762234802 is handled. Duration 403 ms by bot id=7849840849
2025-05-21 11:37:38,970 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:37:39,173 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:37:39,500 - aiogram.event - INFO - Update id=762234803 is handled. Duration 733 ms by bot id=7849840849
2025-05-21 11:37:48,687 - aiogram.event - INFO - Update id=762234804 is handled. Duration 182 ms by bot id=7849840849
2025-05-21 11:37:50,243 - aiogram.event - INFO - Update id=762234805 is handled. Duration 535 ms by bot id=7849840849
2025-05-21 11:37:51,968 - aiogram.event - INFO - Update id=762234806 is handled. Duration 411 ms by bot id=7849840849
2025-05-21 11:37:54,010 - aiogram.event - INFO - Update id=762234807 is handled. Duration 215 ms by bot id=7849840849
2025-05-21 11:37:55,190 - aiogram.event - INFO - Update id=762234808 is handled. Duration 165 ms by bot id=7849840849
2025-05-21 11:37:56,130 - aiogram.event - INFO - Update id=762234809 is handled. Duration 247 ms by bot id=7849840849
2025-05-21 11:38:06,851 - aiogram.event - INFO - Update id=762234810 is handled. Duration 468 ms by bot id=7849840849
2025-05-21 11:38:09,114 - aiogram.event - INFO - Update id=762234811 is handled. Duration 581 ms by bot id=7849840849
2025-05-21 11:38:10,783 - aiogram.event - INFO - Update id=762234812 is handled. Duration 628 ms by bot id=7849840849
2025-05-21 11:38:11,642 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:11,837 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:38:11,838 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:12,303 - aiogram.event - INFO - Update id=762234813 is handled. Duration 667 ms by bot id=7849840849
2025-05-21 11:38:13,318 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:13,524 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:38:13,525 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:13,888 - aiogram.event - INFO - Update id=762234814 is handled. Duration 578 ms by bot id=7849840849
2025-05-21 11:38:15,056 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:15,249 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:38:15,252 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:15,590 - aiogram.event - INFO - Update id=762234815 is handled. Duration 543 ms by bot id=7849840849
2025-05-21 11:38:17,103 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:17,304 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:38:17,305 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:17,676 - aiogram.event - INFO - Update id=762234816 is handled. Duration 586 ms by bot id=7849840849
2025-05-21 11:38:18,736 - aiogram.event - INFO - Update id=762234817 is handled. Duration 409 ms by bot id=7849840849
2025-05-21 11:38:22,952 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:38:23,151 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-05-21 11:38:23,464 - aiogram.event - INFO - Update id=762234818 is handled. Duration 708 ms by bot id=7849840849
2025-05-21 11:38:28,108 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:28,305 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '1', 'quantity': 0}]}
2025-05-21 11:38:28,306 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:28,607 - aiogram.event - INFO - Update id=762234819 is handled. Duration 509 ms by bot id=7849840849
2025-05-21 11:38:31,502 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:31,700 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '1', 'quantity': 0}]}
2025-05-21 11:38:31,701 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:32,061 - aiogram.event - INFO - Update id=762234820 is handled. Duration 572 ms by bot id=7849840849
2025-05-21 11:38:34,806 - aiogram.event - INFO - Update id=762234821 is handled. Duration 370 ms by bot id=7849840849
2025-05-21 11:38:37,552 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:38:37,752 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-05-21 11:38:38,202 - aiogram.event - INFO - Update id=762234822 is handled. Duration 848 ms by bot id=7849840849
2025-05-21 11:38:39,679 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:38:39,679 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:39,877 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '1', 'quantity': 1}]}
2025-05-21 11:38:39,878 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:40,595 - aiogram.event - INFO - Update id=762234823 is handled. Duration 917 ms by bot id=7849840849
2025-05-21 11:38:42,692 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:42,892 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '1', 'quantity': 1}]}
2025-05-21 11:38:42,893 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:38:43,201 - aiogram.event - INFO - Update id=762234824 is handled. Duration 917 ms by bot id=7849840849
2025-05-21 11:38:50,281 - aiogram.event - INFO - Update id=762234825 is handled. Duration 198 ms by bot id=7849840849
2025-05-21 11:38:54,566 - aiogram.event - INFO - Update id=762234826 is handled. Duration 377 ms by bot id=7849840849
2025-05-21 11:39:01,663 - aiogram.event - INFO - Update id=762234827 is handled. Duration 1348 ms by bot id=7849840849
2025-05-21 11:39:03,596 - aiogram.event - INFO - Update id=762234828 is handled. Duration 397 ms by bot id=7849840849
2025-05-21 11:39:06,035 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:39:06,232 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '1', 'quantity': 1}]}
2025-05-21 11:39:06,233 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:39:06,432 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d74ced10c4fa276cd5b02
2025-05-21 11:39:06,629 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d74ced10c4fa276cd5b02'), 'name': 'd', 'category': '', 'price': 4, 'description': 'd', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '1', 'quantity': 0}]}
2025-05-21 11:39:06,630 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d74ced10c4fa276cd5b02
2025-05-21 11:39:07,911 - aiogram.event - INFO - Update id=762234829 is handled. Duration 2085 ms by bot id=7849840849
2025-05-21 11:39:09,834 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:39:10,033 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 11:39:10,233 - aiogram.event - INFO - Update id=762234830 is handled. Duration 594 ms by bot id=7849840849
2025-05-21 11:39:43,499 - aiogram.event - INFO - Update id=762234831 is handled. Duration 425 ms by bot id=7849840849
2025-05-21 11:39:45,425 - aiogram.event - INFO - Update id=762234832 is handled. Duration 599 ms by bot id=7849840849
2025-05-21 11:39:49,140 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-21 11:39:49,316 - aiogram.event - INFO - Update id=762234833 is handled. Duration 410 ms by bot id=7849840849
2025-05-21 11:39:53,458 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 11:39:53,631 - aiogram.event - INFO - Update id=762234834 is handled. Duration 598 ms by bot id=7849840849
2025-05-21 11:40:58,622 - aiogram.event - INFO - Update id=762234835 is handled. Duration 356 ms by bot id=7849840849
2025-05-21 11:41:01,919 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 11:41:02,178 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 11:41:02,180 - root - INFO - Bot stopped
2025-05-21 11:42:29,645 - __main__ - INFO - Starting bot...
2025-05-21 11:42:29,647 - aiogram.dispatcher - INFO - Start polling
2025-05-21 11:42:30,108 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 11:42:30,254 - handlers.admin_handlers - WARNING - Admin access denied for user 1088067370
2025-05-21 11:42:30,840 - aiogram.event - INFO - Update id=762234836 is handled. Duration 592 ms by bot id=7849840849
2025-05-21 11:42:34,871 - aiogram.event - INFO - Update id=762234837 is handled. Duration 215 ms by bot id=7849840849
2025-05-21 11:42:37,867 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 11:42:38,036 - aiogram.event - INFO - Update id=762234838 is handled. Duration 178 ms by bot id=7849840849
2025-05-21 11:42:40,144 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 11:42:43,631 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 11:42:43,839 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 11:42:44,230 - aiogram.event - INFO - Update id=762234839 is handled. Duration 4097 ms by bot id=7849840849
2025-05-21 11:42:46,153 - aiogram.event - INFO - Update id=762234840 is handled. Duration 616 ms by bot id=7849840849
2025-05-21 11:42:51,399 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-21 11:42:51,560 - aiogram.event - INFO - Update id=762234841 is handled. Duration 391 ms by bot id=7849840849
2025-05-21 11:43:03,282 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 11:43:03,468 - aiogram.event - INFO - Update id=762234842 is handled. Duration 593 ms by bot id=7849840849
2025-05-21 11:43:22,832 - aiogram.event - INFO - Update id=762234843 is handled. Duration 360 ms by bot id=7849840849
2025-05-21 11:44:46,592 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 11:44:46,848 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 11:44:46,850 - root - INFO - Bot stopped
2025-05-21 11:45:03,773 - __main__ - INFO - Starting bot...
2025-05-21 11:45:03,774 - aiogram.dispatcher - INFO - Start polling
2025-05-21 11:45:04,212 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 11:45:04,364 - handlers.admin_handlers - WARNING - Admin access denied for user 1088067370
2025-05-21 11:45:04,888 - aiogram.event - INFO - Update id=762234844 is handled. Duration 531 ms by bot id=7849840849
2025-05-21 11:45:07,044 - aiogram.event - INFO - Update id=762234845 is handled. Duration 234 ms by bot id=7849840849
2025-05-21 11:45:10,473 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 11:45:10,720 - aiogram.event - INFO - Update id=762234846 is handled. Duration 253 ms by bot id=7849840849
2025-05-21 11:45:11,290 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 11:45:14,744 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 11:45:14,969 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 11:45:15,353 - aiogram.event - INFO - Update id=762234847 is handled. Duration 4063 ms by bot id=7849840849
2025-05-21 11:45:16,984 - aiogram.event - INFO - Update id=762234848 is handled. Duration 433 ms by bot id=7849840849
2025-05-21 11:45:18,858 - aiogram.event - INFO - Update id=762234849 is handled. Duration 748 ms by bot id=7849840849
2025-05-21 11:45:22,757 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-21 11:45:22,927 - aiogram.event - INFO - Update id=762234850 is handled. Duration 427 ms by bot id=7849840849
2025-05-21 11:45:25,159 - aiogram.event - INFO - Update id=762234851 is handled. Duration 379 ms by bot id=7849840849
2025-05-21 11:45:27,406 - aiogram.event - INFO - Update id=762234852 is handled. Duration 188 ms by bot id=7849840849
2025-05-21 11:45:28,557 - aiogram.event - INFO - Update id=762234853 is handled. Duration 386 ms by bot id=7849840849
2025-05-21 11:45:31,193 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 11:45:31,508 - aiogram.event - INFO - Update id=762234854 is handled. Duration 776 ms by bot id=7849840849
2025-05-21 11:45:33,829 - aiogram.event - INFO - Update id=762234855 is handled. Duration 390 ms by bot id=7849840849
2025-05-21 11:47:11,167 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:47:11,387 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:47:11,837 - aiogram.event - INFO - Update id=762234856 is handled. Duration 889 ms by bot id=7849840849
2025-05-21 11:47:13,431 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:47:13,431 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:47:13,650 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:47:13,652 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:47:14,540 - aiogram.event - INFO - Update id=762234857 is handled. Duration 1109 ms by bot id=7849840849
2025-05-21 11:47:16,561 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:47:16,781 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:47:16,783 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:47:17,110 - aiogram.event - INFO - Update id=762234858 is handled. Duration 994 ms by bot id=7849840849
2025-05-21 11:47:23,400 - aiogram.event - INFO - Update id=762234859 is handled. Duration 373 ms by bot id=7849840849
2025-05-21 11:47:26,187 - aiogram.event - INFO - Update id=762234860 is handled. Duration 600 ms by bot id=7849840849
2025-05-21 11:47:31,081 - aiogram.event - INFO - Update id=762234861 is handled. Duration 1416 ms by bot id=7849840849
2025-05-21 11:48:23,748 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:48:23,968 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 1}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:48:23,971 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:48:24,191 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:48:24,410 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:48:24,412 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:48:25,258 - aiogram.event - INFO - Update id=762234862 is handled. Duration 1740 ms by bot id=7849840849
2025-05-21 11:48:31,910 - aiogram.event - INFO - Update id=762234863 is handled. Duration 429 ms by bot id=7849840849
2025-05-21 11:48:33,295 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:48:33,516 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:48:33,939 - aiogram.event - INFO - Update id=762234864 is handled. Duration 863 ms by bot id=7849840849
2025-05-21 11:48:38,363 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 11:48:38,364 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:48:38,588 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:48:38,590 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:48:39,397 - aiogram.event - INFO - Update id=762234865 is handled. Duration 1033 ms by bot id=7849840849
2025-05-21 11:48:41,395 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682c3ccf84649b8b0ce45e44
2025-05-21 11:48:41,616 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682c3ccf84649b8b0ce45e44'), 'name': 'J', 'category': ' ', 'price': 183, 'description': 'D', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 0}, {'name': ' ', 'quantity': 0}, {'name': '  ', 'quantity': 3}]}
2025-05-21 11:48:41,618 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682c3ccf84649b8b0ce45e44
2025-05-21 11:48:41,965 - aiogram.event - INFO - Update id=762234866 is handled. Duration 1028 ms by bot id=7849840849
2025-05-21 11:48:48,656 - aiogram.event - INFO - Update id=762234867 is handled. Duration 409 ms by bot id=7849840849
2025-05-21 11:48:51,571 - aiogram.event - INFO - Update id=762234868 is handled. Duration 604 ms by bot id=7849840849
2025-05-21 11:48:56,544 - aiogram.event - INFO - Update id=762234869 is handled. Duration 1434 ms by bot id=7849840849
2025-05-21 11:48:59,903 - aiogram.event - INFO - Update id=762234870 is handled. Duration 315 ms by bot id=7849840849
2025-05-21 11:49:03,108 - aiogram.event - INFO - Update id=762234871 is handled. Duration 1088 ms by bot id=7849840849
2025-05-21 11:49:04,318 - aiogram.event - INFO - Update id=762234872 is handled. Duration 533 ms by bot id=7849840849
2025-05-21 11:49:05,459 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:49:05,683 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 11:49:06,105 - aiogram.event - INFO - Update id=762234873 is handled. Duration 868 ms by bot id=7849840849
2025-05-21 11:49:11,738 - aiogram.event - INFO - Update id=762234874 is handled. Duration 239 ms by bot id=7849840849
2025-05-21 11:49:13,062 - aiogram.event - INFO - Update id=762234875 is handled. Duration 345 ms by bot id=7849840849
2025-05-21 11:49:14,131 - aiogram.event - INFO - Update id=762234876 is handled. Duration 340 ms by bot id=7849840849
2025-05-21 11:49:15,280 - aiogram.event - INFO - Update id=762234877 is handled. Duration 344 ms by bot id=7849840849
2025-05-21 11:49:16,102 - aiogram.event - INFO - Update id=762234878 is handled. Duration 192 ms by bot id=7849840849
2025-05-21 11:49:17,838 - aiogram.event - INFO - Update id=762234879 is handled. Duration 591 ms by bot id=7849840849
2025-05-21 11:50:32,440 - aiogram.event - INFO - Update id=762234880 is handled. Duration 190 ms by bot id=7849840849
2025-05-21 11:51:15,573 - aiogram.event - INFO - Update id=762234881 is handled. Duration 1804 ms by bot id=7849840849
2025-05-21 11:51:17,563 - aiogram.event - INFO - Update id=762234882 is handled. Duration 747 ms by bot id=7849840849
2025-05-21 11:51:21,173 - aiogram.event - INFO - Update id=762234883 is handled. Duration 787 ms by bot id=7849840849
2025-05-21 11:51:29,642 - aiogram.event - INFO - Update id=762234884 is handled. Duration 782 ms by bot id=7849840849
2025-05-21 11:51:38,621 - aiogram.event - INFO - Update id=762234885 is handled. Duration 736 ms by bot id=7849840849
2025-05-21 11:51:47,191 - aiogram.event - INFO - Update id=762234886 is handled. Duration 775 ms by bot id=7849840849
2025-05-21 11:51:50,742 - aiogram.event - INFO - Update id=762234887 is handled. Duration 635 ms by bot id=7849840849
2025-05-21 11:51:52,903 - aiogram.event - INFO - Update id=762234888 is handled. Duration 173 ms by bot id=7849840849
2025-05-21 11:51:55,610 - aiogram.event - INFO - Update id=762234889 is handled. Duration 225 ms by bot id=7849840849
2025-05-21 11:52:00,307 - aiogram.event - INFO - Update id=762234890 is handled. Duration 1024 ms by bot id=7849840849
2025-05-21 11:52:10,191 - aiogram.event - INFO - Update id=762234891 is handled. Duration 209 ms by bot id=7849840849
2025-05-21 11:52:12,859 - aiogram.event - INFO - Update id=762234892 is handled. Duration 553 ms by bot id=7849840849
2025-05-21 11:52:14,438 - aiogram.event - INFO - Update id=762234893 is handled. Duration 583 ms by bot id=7849840849
2025-05-21 11:52:16,719 - aiogram.event - INFO - Update id=762234894 is handled. Duration 185 ms by bot id=7849840849
2025-05-21 11:52:18,583 - aiogram.event - INFO - Update id=762234895 is handled. Duration 567 ms by bot id=7849840849
2025-05-21 11:52:19,803 - aiogram.event - INFO - Update id=762234896 is handled. Duration 531 ms by bot id=7849840849
2025-05-21 11:52:23,217 - aiogram.event - INFO - Update id=762234897 is handled. Duration 353 ms by bot id=7849840849
2025-05-21 11:52:24,762 - aiogram.event - INFO - Update id=762234898 is handled. Duration 303 ms by bot id=7849840849
2025-05-21 11:52:26,881 - aiogram.event - INFO - Update id=762234899 is handled. Duration 178 ms by bot id=7849840849
2025-05-21 11:52:29,006 - aiogram.event - INFO - Update id=762234900 is handled. Duration 162 ms by bot id=7849840849
2025-05-21 11:52:31,211 - aiogram.event - INFO - Update id=762234901 is handled. Duration 240 ms by bot id=7849840849
2025-05-21 11:52:40,400 - aiogram.event - INFO - Update id=762234902 is handled. Duration 407 ms by bot id=7849840849
2025-05-21 11:52:42,214 - aiogram.event - INFO - Update id=762234903 is handled. Duration 457 ms by bot id=7849840849
2025-05-21 11:52:43,475 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:52:43,696 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-05-21 11:52:44,135 - aiogram.event - INFO - Update id=762234904 is handled. Duration 890 ms by bot id=7849840849
2025-05-21 11:52:47,024 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:52:47,246 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 5678, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:52:47,247 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:52:47,396 - aiogram.event - INFO - Update id=762234905 is handled. Duration 610 ms by bot id=7849840849
2025-05-21 11:53:09,352 - aiogram.event - INFO - Update id=762234906 is handled. Duration 648 ms by bot id=7849840849
2025-05-21 11:53:10,067 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:10,290 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 5678, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:53:10,291 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:10,878 - aiogram.event - INFO - Update id=762234907 is handled. Duration 818 ms by bot id=7849840849
2025-05-21 11:53:12,743 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:12,965 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 5678, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:53:12,966 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:13,564 - aiogram.event - INFO - Update id=762234908 is handled. Duration 830 ms by bot id=7849840849
2025-05-21 11:53:15,320 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:15,543 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 5678, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:53:15,544 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:15,775 - aiogram.event - INFO - Update id=762234909 is handled. Duration 689 ms by bot id=7849840849
2025-05-21 11:53:17,444 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:17,665 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 5678, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:53:17,666 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:17,991 - aiogram.event - INFO - Update id=762234910 is handled. Duration 556 ms by bot id=7849840849
2025-05-21 11:53:21,001 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:21,222 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:53:21,223 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:21,405 - aiogram.event - INFO - Update id=762234911 is handled. Duration 639 ms by bot id=7849840849
2025-05-21 11:53:23,083 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:23,312 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:53:23,313 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:23,711 - aiogram.event - INFO - Update id=762234912 is handled. Duration 636 ms by bot id=7849840849
2025-05-21 11:53:26,367 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:26,594 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:53:26,595 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:26,773 - aiogram.event - INFO - Update id=762234913 is handled. Duration 629 ms by bot id=7849840849
2025-05-21 11:53:29,262 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:29,480 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIGBmgtbxs81M3K7V4Q4jcctsQAAUMgYgACUOwxG9oMaElQ3jbK5EofXwEAAwIAA3gAAzYE', 'available': True}
2025-05-21 11:53:29,481 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:29,815 - aiogram.event - INFO - Update id=762234914 is handled. Duration 559 ms by bot id=7849840849
2025-05-21 11:53:39,070 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:39,293 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 11:53:39,294 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:39,451 - aiogram.event - INFO - Update id=762234915 is handled. Duration 623 ms by bot id=7849840849
2025-05-21 11:53:41,985 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:42,205 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 11:53:42,206 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:42,508 - aiogram.event - INFO - Update id=762234916 is handled. Duration 532 ms by bot id=7849840849
2025-05-21 11:53:43,835 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:44,057 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 11:53:44,058 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:44,351 - aiogram.event - INFO - Update id=762234917 is handled. Duration 527 ms by bot id=7849840849
2025-05-21 11:53:44,639 - aiogram.event - INFO - Update id=762234918 is not handled. Duration 434 ms by bot id=7849840849
2025-05-21 11:53:44,640 - aiogram.event - ERROR - Cause exception while process update id=762234918 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 11:53:48,692 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:48,914 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 11:53:48,916 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:49,213 - aiogram.event - INFO - Update id=762234919 is handled. Duration 528 ms by bot id=7849840849
2025-05-21 11:53:56,557 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 11:53:56,779 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 11:53:56,780 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 11:53:57,053 - aiogram.event - INFO - Update id=762234920 is handled. Duration 504 ms by bot id=7849840849
2025-05-21 11:55:14,493 - aiogram.event - INFO - Update id=762234921 is not handled. Duration 168 ms by bot id=7849840849
2025-05-21 11:55:14,494 - aiogram.event - ERROR - Cause exception while process update id=762234921 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 190, in back_to_product_management
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: there is no text in the message to edit
2025-05-21 11:55:17,931 - aiogram.event - INFO - Update id=762234922 is handled. Duration 423 ms by bot id=7849840849
2025-05-21 11:55:19,082 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 11:55:19,301 - database.mongodb - INFO - [DEBUG] Found 0 products in category  
2025-05-21 11:55:19,485 - aiogram.event - INFO - Update id=762234923 is handled. Duration 622 ms by bot id=7849840849
2025-05-21 11:55:22,353 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:55:22,574 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 11:55:22,845 - aiogram.event - INFO - Update id=762234924 is handled. Duration 708 ms by bot id=7849840849
2025-05-21 11:55:23,887 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 11:55:24,111 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 11:55:24,313 - aiogram.event - INFO - Update id=762234925 is handled. Duration 646 ms by bot id=7849840849
2025-05-21 11:55:29,098 - aiogram.event - INFO - Update id=762234926 is handled. Duration 408 ms by bot id=7849840849
2025-05-21 11:55:32,010 - aiogram.event - INFO - Update id=762234927 is handled. Duration 678 ms by bot id=7849840849
2025-05-21 11:55:38,370 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-21 11:55:38,563 - aiogram.event - INFO - Update id=762234928 is handled. Duration 430 ms by bot id=7849840849
2025-05-21 11:55:41,364 - aiogram.event - INFO - Update id=762234929 is handled. Duration 382 ms by bot id=7849840849
2025-05-21 11:55:42,862 - aiogram.event - INFO - Update id=762234930 is handled. Duration 438 ms by bot id=7849840849
2025-05-21 11:55:43,160 - aiogram.event - INFO - Update id=762234931 is handled. Duration 166 ms by bot id=7849840849
2025-05-21 11:55:47,296 - aiogram.event - INFO - Update id=762234932 is handled. Duration 384 ms by bot id=7849840849
2025-05-21 11:55:49,039 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 11:55:49,361 - aiogram.event - INFO - Update id=762234933 is handled. Duration 785 ms by bot id=7849840849
2025-05-21 11:55:51,024 - aiogram.event - INFO - Update id=762234934 is handled. Duration 377 ms by bot id=7849840849
2025-05-21 12:00:06,636 - aiogram.event - INFO - Update id=762234935 is handled. Duration 250 ms by bot id=7849840849
2025-05-21 12:00:08,579 - aiogram.event - INFO - Update id=762234936 is handled. Duration 645 ms by bot id=7849840849
2025-05-21 12:00:10,004 - aiogram.event - INFO - Update id=762234937 is handled. Duration 485 ms by bot id=7849840849
2025-05-21 12:00:11,091 - aiogram.event - INFO - Update id=762234938 is handled. Duration 651 ms by bot id=7849840849
2025-05-21 12:00:11,685 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:00:11,995 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 12:00:11,996 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:00:12,417 - aiogram.event - INFO - Update id=762234939 is handled. Duration 739 ms by bot id=7849840849
2025-05-21 12:00:13,575 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:00:13,789 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 12:00:13,791 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:00:14,153 - aiogram.event - INFO - Update id=762234940 is handled. Duration 586 ms by bot id=7849840849
2025-05-21 12:00:17,563 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:00:17,779 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 12:00:17,780 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:00:18,247 - aiogram.event - INFO - Update id=762234941 is handled. Duration 692 ms by bot id=7849840849
2025-05-21 12:00:21,339 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:00:21,562 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True}
2025-05-21 12:00:21,564 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:00:22,150 - aiogram.event - INFO - Update id=762234942 is handled. Duration 820 ms by bot id=7849840849
2025-05-21 12:00:23,824 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:00:24,048 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:00:24,049 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:00:24,338 - aiogram.event - INFO - Update id=762234943 is handled. Duration 524 ms by bot id=7849840849
2025-05-21 12:00:25,906 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:00:26,120 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:00:26,122 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:00:26,517 - aiogram.event - INFO - Update id=762234944 is handled. Duration 619 ms by bot id=7849840849
2025-05-21 12:00:30,794 - aiogram.event - INFO - Update id=762234945 is handled. Duration 403 ms by bot id=7849840849
2025-05-21 12:00:32,047 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:00:32,267 - database.mongodb - INFO - [DEBUG] Found 0 products in category  
2025-05-21 12:00:32,430 - aiogram.event - INFO - Update id=762234946 is handled. Duration 605 ms by bot id=7849840849
2025-05-21 12:00:33,743 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 12:00:33,965 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-05-21 12:00:34,265 - aiogram.event - INFO - Update id=762234947 is handled. Duration 741 ms by bot id=7849840849
2025-05-21 12:02:19,451 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 12:02:19,452 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:02:19,690 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:02:19,691 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:02:20,502 - aiogram.event - INFO - Update id=762234948 is handled. Duration 1051 ms by bot id=7849840849
2025-05-21 12:02:22,384 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:02:22,606 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:02:22,607 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:02:22,910 - aiogram.event - INFO - Update id=762234949 is handled. Duration 970 ms by bot id=7849840849
2025-05-21 12:02:26,512 - aiogram.event - INFO - Update id=762234950 is handled. Duration 394 ms by bot id=7849840849
2025-05-21 12:02:31,970 - aiogram.event - INFO - Update id=762234951 is handled. Duration 391 ms by bot id=7849840849
2025-05-21 12:02:34,574 - aiogram.event - INFO - Update id=762234952 is handled. Duration 675 ms by bot id=7849840849
2025-05-21 12:02:40,715 - aiogram.event - INFO - Update id=762234953 is handled. Duration 1407 ms by bot id=7849840849
2025-05-21 12:02:44,076 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:02:44,293 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:02:44,294 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:02:44,517 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d78389f08f500b6140aa7
2025-05-21 12:02:44,737 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d78389f08f500b6140aa7'), 'name': '', 'category': '', 'price': 1000, 'description': '-', 'photo': 'AgACAgIAAxkBAAIFwmgtapBRU7b5Y_zMerwiRGsRECkVAAI67DEb2gxoSb8dZUHDvJDmAQADAgADeAADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:02:44,738 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d78389f08f500b6140aa7
2025-05-21 12:02:45,823 - aiogram.event - INFO - Update id=762234954 is handled. Duration 1983 ms by bot id=7849840849
2025-05-21 12:02:47,887 - aiogram.event - INFO - Update id=762234955 is handled. Duration 370 ms by bot id=7849840849
2025-05-21 12:02:49,036 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 12:02:49,258 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 12:02:49,459 - aiogram.event - INFO - Update id=762234956 is handled. Duration 641 ms by bot id=7849840849
2025-05-21 12:02:51,518 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:02:51,737 - database.mongodb - INFO - [DEBUG] Found 0 products in category  
2025-05-21 12:02:51,946 - aiogram.event - INFO - Update id=762234957 is handled. Duration 647 ms by bot id=7849840849
2025-05-21 12:02:52,826 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-05-21 12:02:53,056 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-05-21 12:02:53,222 - aiogram.event - INFO - Update id=762234958 is handled. Duration 619 ms by bot id=7849840849
2025-05-21 12:03:00,786 - aiogram.event - INFO - Update id=762234959 is handled. Duration 217 ms by bot id=7849840849
2025-05-21 12:03:01,939 - aiogram.event - INFO - Update id=762234960 is handled. Duration 310 ms by bot id=7849840849
2025-05-21 12:05:23,129 - aiogram.event - INFO - Update id=762234961 is handled. Duration 259 ms by bot id=7849840849
2025-05-21 12:05:26,076 - aiogram.event - INFO - Update id=762234962 is handled. Duration 292 ms by bot id=7849840849
2025-05-21 12:05:27,883 - aiogram.event - INFO - Update id=762234963 is handled. Duration 195 ms by bot id=7849840849
2025-05-21 12:05:32,796 - aiogram.event - INFO - Update id=762234964 is handled. Duration 621 ms by bot id=7849840849
2025-05-21 12:05:38,768 - aiogram.event - INFO - Update id=762234965 is handled. Duration 1033 ms by bot id=7849840849
2025-05-21 12:05:42,259 - aiogram.event - INFO - Update id=762234966 is handled. Duration 185 ms by bot id=7849840849
2025-05-21 12:05:46,498 - aiogram.event - INFO - Update id=762234967 is handled. Duration 283 ms by bot id=7849840849
2025-05-21 12:05:50,818 - aiogram.event - INFO - Update id=762234968 is handled. Duration 930 ms by bot id=7849840849
2025-05-21 12:06:02,374 - aiogram.event - INFO - Update id=762234969 is handled. Duration 315 ms by bot id=7849840849
2025-05-21 12:06:03,982 - aiogram.event - INFO - Update id=762234970 is handled. Duration 326 ms by bot id=7849840849
2025-05-21 12:06:06,060 - aiogram.event - INFO - Update id=762234971 is handled. Duration 317 ms by bot id=7849840849
2025-05-21 12:06:11,597 - aiogram.event - INFO - Update id=762234972 is handled. Duration 180 ms by bot id=7849840849
2025-05-21 12:06:15,477 - aiogram.event - INFO - Update id=762234973 is handled. Duration 180 ms by bot id=7849840849
2025-05-21 12:06:25,186 - aiogram.event - INFO - Update id=762234974 is handled. Duration 192 ms by bot id=7849840849
2025-05-21 12:06:40,524 - aiogram.event - INFO - Update id=762234975 is handled. Duration 461 ms by bot id=7849840849
2025-05-21 12:06:49,238 - aiogram.event - INFO - Update id=762234976 is handled. Duration 631 ms by bot id=7849840849
2025-05-21 12:06:51,049 - aiogram.event - INFO - Update id=762234977 is handled. Duration 312 ms by bot id=7849840849
2025-05-21 12:06:53,058 - aiogram.event - INFO - Update id=762234978 is handled. Duration 782 ms by bot id=7849840849
2025-05-21 12:06:55,833 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:06:56,053 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': ' ', 'category': ' ', 'price': 500, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True}
2025-05-21 12:06:56,054 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:06:56,370 - aiogram.event - INFO - Update id=762234979 is handled. Duration 543 ms by bot id=7849840849
2025-05-21 12:06:57,285 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:06:57,505 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': ' ', 'category': ' ', 'price': 500, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True}
2025-05-21 12:06:57,506 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:06:57,856 - aiogram.event - INFO - Update id=762234980 is handled. Duration 577 ms by bot id=7849840849
2025-05-21 12:07:02,139 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:02,363 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 500, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True}
2025-05-21 12:07:02,364 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:02,615 - aiogram.event - INFO - Update id=762234981 is handled. Duration 710 ms by bot id=7849840849
2025-05-21 12:07:03,964 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:04,183 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 500, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True}
2025-05-21 12:07:04,184 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:04,467 - aiogram.event - INFO - Update id=762234982 is handled. Duration 510 ms by bot id=7849840849
2025-05-21 12:07:08,107 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:08,325 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True}
2025-05-21 12:07:08,326 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:08,511 - aiogram.event - INFO - Update id=762234983 is handled. Duration 638 ms by bot id=7849840849
2025-05-21 12:07:11,706 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:11,927 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True}
2025-05-21 12:07:11,928 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:12,217 - aiogram.event - INFO - Update id=762234984 is handled. Duration 519 ms by bot id=7849840849
2025-05-21 12:07:13,485 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:13,703 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True}
2025-05-21 12:07:13,704 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:14,104 - aiogram.event - INFO - Update id=762234985 is handled. Duration 627 ms by bot id=7849840849
2025-05-21 12:07:20,981 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:21,208 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True}
2025-05-21 12:07:21,209 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:21,606 - aiogram.event - INFO - Update id=762234986 is handled. Duration 636 ms by bot id=7849840849
2025-05-21 12:07:27,383 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:27,605 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:07:27,606 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:27,896 - aiogram.event - INFO - Update id=762234987 is handled. Duration 521 ms by bot id=7849840849
2025-05-21 12:07:29,888 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:30,130 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:07:30,131 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:30,515 - aiogram.event - INFO - Update id=762234988 is handled. Duration 640 ms by bot id=7849840849
2025-05-21 12:07:36,820 - aiogram.event - INFO - Update id=762234989 is handled. Duration 406 ms by bot id=7849840849
2025-05-21 12:07:37,083 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:37,305 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 2}]}
2025-05-21 12:07:37,306 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:37,847 - aiogram.event - INFO - Update id=762234990 is handled. Duration 772 ms by bot id=7849840849
2025-05-21 12:07:42,212 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:07:42,433 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 12:07:42,737 - aiogram.event - INFO - Update id=762234991 is handled. Duration 743 ms by bot id=7849840849
2025-05-21 12:07:44,626 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:44,866 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': []}
2025-05-21 12:07:44,868 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:45,004 - aiogram.event - INFO - Update id=762234992 is handled. Duration 598 ms by bot id=7849840849
2025-05-21 12:07:47,288 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:47,514 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': []}
2025-05-21 12:07:47,515 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:47,845 - aiogram.event - INFO - Update id=762234993 is handled. Duration 568 ms by bot id=7849840849
2025-05-21 12:07:52,298 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:52,517 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': []}
2025-05-21 12:07:52,518 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:53,004 - aiogram.event - INFO - Update id=762234994 is handled. Duration 723 ms by bot id=7849840849
2025-05-21 12:07:57,164 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:57,382 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:07:57,384 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:57,816 - aiogram.event - INFO - Update id=762234995 is handled. Duration 660 ms by bot id=7849840849
2025-05-21 12:07:58,541 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:07:58,762 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:07:58,764 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:07:59,174 - aiogram.event - INFO - Update id=762234996 is handled. Duration 639 ms by bot id=7849840849
2025-05-21 12:08:01,664 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:08:01,888 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:08:01,889 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:08:02,243 - aiogram.event - INFO - Update id=762234997 is handled. Duration 587 ms by bot id=7849840849
2025-05-21 12:08:04,453 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:08:04,670 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:08:04,672 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:08:05,188 - aiogram.event - INFO - Update id=762234998 is handled. Duration 752 ms by bot id=7849840849
2025-05-21 12:08:15,434 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:08:15,655 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}, {'name': '2', 'quantity': 0}]}
2025-05-21 12:08:15,657 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:08:16,196 - aiogram.event - INFO - Update id=762234999 is handled. Duration 770 ms by bot id=7849840849
2025-05-21 12:08:17,064 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:08:17,282 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:08:17,284 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:08:17,589 - aiogram.event - INFO - Update id=762235000 is handled. Duration 533 ms by bot id=7849840849
2025-05-21 12:08:19,979 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:08:20,208 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:08:20,210 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:08:20,591 - aiogram.event - INFO - Update id=762235001 is handled. Duration 623 ms by bot id=7849840849
2025-05-21 12:08:25,123 - aiogram.event - INFO - Update id=762235002 is handled. Duration 463 ms by bot id=7849840849
2025-05-21 12:08:28,802 - aiogram.event - INFO - Update id=762235003 is handled. Duration 538 ms by bot id=7849840849
2025-05-21 12:08:32,905 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=10:00
2025-05-21 12:08:33,067 - aiogram.event - INFO - Update id=762235004 is handled. Duration 389 ms by bot id=7849840849
2025-05-21 12:08:39,876 - aiogram.event - INFO - Update id=762235005 is handled. Duration 385 ms by bot id=7849840849
2025-05-21 12:08:42,911 - aiogram.event - INFO - Update id=762235006 is handled. Duration 212 ms by bot id=7849840849
2025-05-21 12:08:43,798 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-05-21 12:08:44,177 - aiogram.event - INFO - Update id=762235008 is handled. Duration 393 ms by bot id=7849840849
2025-05-21 12:08:44,392 - aiogram.event - INFO - Update id=762235007 is handled. Duration 1045 ms by bot id=7849840849
2025-05-21 12:08:45,210 - aiogram.event - INFO - Update id=762235009 is handled. Duration 430 ms by bot id=7849840849
2025-05-21 12:08:46,140 - aiogram.event - INFO - Update id=762235010 is handled. Duration 319 ms by bot id=7849840849
2025-05-21 12:08:47,263 - aiogram.event - INFO - Update id=762235011 is handled. Duration 257 ms by bot id=7849840849
2025-05-21 12:08:49,457 - aiogram.event - INFO - Update id=762235012 is handled. Duration 479 ms by bot id=7849840849
2025-05-21 12:08:56,991 - aiogram.event - INFO - Update id=762235013 is handled. Duration 447 ms by bot id=7849840849
2025-05-21 12:08:58,553 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:08:58,782 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 12:08:59,114 - aiogram.event - INFO - Update id=762235014 is handled. Duration 785 ms by bot id=7849840849
2025-05-21 12:09:00,115 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 12:09:00,115 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:09:00,337 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:09:00,339 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:09:01,082 - aiogram.event - INFO - Update id=762235015 is handled. Duration 968 ms by bot id=7849840849
2025-05-21 12:09:06,163 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:09:06,384 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:09:06,385 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:09:06,529 - aiogram.event - INFO - Update id=762235016 is handled. Duration 581 ms by bot id=7849840849
2025-05-21 12:09:09,590 - aiogram.event - INFO - Update id=762235017 is handled. Duration 784 ms by bot id=7849840849
2025-05-21 12:09:10,734 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 12:09:10,735 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:09:10,962 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:09:10,963 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:09:11,752 - aiogram.event - INFO - Update id=762235018 is handled. Duration 1018 ms by bot id=7849840849
2025-05-21 12:09:16,921 - aiogram.event - INFO - Update id=762235019 is handled. Duration 2668 ms by bot id=7849840849
2025-05-21 12:09:19,122 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:09:19,342 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:09:19,343 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:09:19,702 - aiogram.event - INFO - Update id=762235020 is handled. Duration 808 ms by bot id=7849840849
2025-05-21 12:09:20,422 - aiogram.event - INFO - Update id=762235021 is handled. Duration 396 ms by bot id=7849840849
2025-05-21 12:09:21,926 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:09:22,151 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 12:09:22,573 - aiogram.event - INFO - Update id=762235022 is handled. Duration 857 ms by bot id=7849840849
2025-05-21 12:09:23,454 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 12:09:23,455 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:09:23,681 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:09:23,683 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:09:24,453 - aiogram.event - INFO - Update id=762235023 is handled. Duration 1000 ms by bot id=7849840849
2025-05-21 12:09:27,262 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:09:27,480 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:09:27,481 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:09:27,843 - aiogram.event - INFO - Update id=762235024 is handled. Duration 1028 ms by bot id=7849840849
2025-05-21 12:09:34,889 - aiogram.event - INFO - Update id=762235025 is handled. Duration 377 ms by bot id=7849840849
2025-05-21 12:09:37,903 - aiogram.event - INFO - Update id=762235026 is handled. Duration 589 ms by bot id=7849840849
2025-05-21 12:09:43,762 - aiogram.event - INFO - Update id=762235028 is handled. Duration 1361 ms by bot id=7849840849
2025-05-21 12:09:44,047 - aiogram.event - INFO - Update id=762235027 is handled. Duration 1646 ms by bot id=7849840849
2025-05-21 12:10:06,882 - aiogram.event - INFO - Update id=762235029 is handled. Duration 508 ms by bot id=7849840849
2025-05-21 12:10:17,201 - aiogram.event - INFO - Update id=762235030 is handled. Duration 898 ms by bot id=7849840849
2025-05-21 12:10:20,854 - aiogram.event - INFO - Update id=762235031 is handled. Duration 372 ms by bot id=7849840849
2025-05-21 12:10:22,813 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:10:23,015 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 12:10:23,318 - aiogram.event - INFO - Update id=762235032 is handled. Duration 705 ms by bot id=7849840849
2025-05-21 12:10:24,373 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 12:10:24,374 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:10:24,582 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:10:24,583 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:10:25,312 - aiogram.event - INFO - Update id=762235033 is handled. Duration 940 ms by bot id=7849840849
2025-05-21 12:10:27,111 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:10:27,321 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:10:27,322 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:10:27,674 - aiogram.event - INFO - Update id=762235034 is handled. Duration 982 ms by bot id=7849840849
2025-05-21 12:10:33,845 - aiogram.event - INFO - Update id=762235035 is handled. Duration 411 ms by bot id=7849840849
2025-05-21 12:10:36,249 - aiogram.event - INFO - Update id=762235036 is handled. Duration 567 ms by bot id=7849840849
2025-05-21 12:10:41,047 - aiogram.event - INFO - Update id=762235037 is handled. Duration 1532 ms by bot id=7849840849
2025-05-21 12:11:05,591 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:11:05,791 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 1}]}
2025-05-21 12:11:05,793 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:11:06,001 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7b809f08f500b6140aa9
2025-05-21 12:11:06,213 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7b809f08f500b6140aa9'), 'name': '', 'category': ' ', 'price': 600, 'description': '   ', 'photo': 'AgACAgIAAxkBAAIH72gte3-tIkUWAZvbkvGzsVWl9uZ3AAKi7DEb2gxoSX6C8H9XjG16AQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': '', 'quantity': 0}]}
2025-05-21 12:11:06,214 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7b809f08f500b6140aa9
2025-05-21 12:11:07,319 - aiogram.event - INFO - Update id=762235038 is handled. Duration 1947 ms by bot id=7849840849
2025-05-21 12:11:13,004 - aiogram.event - INFO - Update id=762235039 is handled. Duration 368 ms by bot id=7849840849
2025-05-21 12:11:14,127 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:11:14,332 - database.mongodb - INFO - [DEBUG] Found 0 products in category  
2025-05-21 12:11:14,509 - aiogram.event - INFO - Update id=762235040 is handled. Duration 591 ms by bot id=7849840849
2025-05-21 12:11:26,438 - aiogram.event - INFO - Update id=762235041 is handled. Duration 314 ms by bot id=7849840849
2025-05-21 12:11:28,196 - aiogram.event - INFO - Update id=762235042 is handled. Duration 464 ms by bot id=7849840849
2025-05-21 12:11:29,860 - aiogram.event - INFO - Update id=762235043 is handled. Duration 362 ms by bot id=7849840849
2025-05-21 12:11:36,252 - aiogram.event - INFO - Update id=762235044 is handled. Duration 169 ms by bot id=7849840849
2025-05-21 12:11:39,911 - aiogram.event - INFO - Update id=762235045 is handled. Duration 463 ms by bot id=7849840849
2025-05-21 12:11:44,275 - aiogram.event - INFO - Update id=762235046 is handled. Duration 160 ms by bot id=7849840849
2025-05-21 12:11:53,294 - aiogram.event - INFO - Update id=762235047 is handled. Duration 471 ms by bot id=7849840849
2025-05-21 12:11:55,518 - aiogram.event - INFO - Update id=762235048 is handled. Duration 551 ms by bot id=7849840849
2025-05-21 12:11:57,397 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:11:57,610 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True}
2025-05-21 12:11:57,611 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:11:58,121 - aiogram.event - INFO - Update id=762235049 is handled. Duration 729 ms by bot id=7849840849
2025-05-21 12:11:59,133 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:11:59,335 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True}
2025-05-21 12:11:59,336 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:11:59,745 - aiogram.event - INFO - Update id=762235050 is handled. Duration 618 ms by bot id=7849840849
2025-05-21 12:12:00,531 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:00,740 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True}
2025-05-21 12:12:00,741 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:01,173 - aiogram.event - INFO - Update id=762235051 is handled. Duration 650 ms by bot id=7849840849
2025-05-21 12:12:04,348 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:04,573 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True}
2025-05-21 12:12:04,574 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:05,008 - aiogram.event - INFO - Update id=762235052 is handled. Duration 667 ms by bot id=7849840849
2025-05-21 12:12:08,060 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:08,270 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}]}
2025-05-21 12:12:08,271 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:08,794 - aiogram.event - INFO - Update id=762235053 is handled. Duration 742 ms by bot id=7849840849
2025-05-21 12:12:10,823 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:11,037 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}]}
2025-05-21 12:12:11,039 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:11,403 - aiogram.event - INFO - Update id=762235054 is handled. Duration 594 ms by bot id=7849840849
2025-05-21 12:12:14,190 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:14,395 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}, {'name': 'Chuck', 'quantity': 0}]}
2025-05-21 12:12:14,396 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:14,721 - aiogram.event - INFO - Update id=762235055 is handled. Duration 538 ms by bot id=7849840849
2025-05-21 12:12:17,604 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:17,812 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}, {'name': 'Chuck', 'quantity': 0}]}
2025-05-21 12:12:17,814 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:18,192 - aiogram.event - INFO - Update id=762235056 is handled. Duration 600 ms by bot id=7849840849
2025-05-21 12:12:20,203 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:20,415 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 0}]}
2025-05-21 12:12:20,417 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:20,976 - aiogram.event - INFO - Update id=762235057 is handled. Duration 780 ms by bot id=7849840849
2025-05-21 12:12:23,653 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:23,856 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 0}]}
2025-05-21 12:12:23,858 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:24,219 - aiogram.event - INFO - Update id=762235058 is handled. Duration 578 ms by bot id=7849840849
2025-05-21 12:12:31,349 - aiogram.event - INFO - Update id=762235059 is handled. Duration 424 ms by bot id=7849840849
2025-05-21 12:12:32,379 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:12:32,581 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 12:12:32,933 - aiogram.event - INFO - Update id=762235060 is handled. Duration 760 ms by bot id=7849840849
2025-05-21 12:12:34,326 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 12:12:34,327 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:34,533 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:12:34,535 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:35,294 - aiogram.event - INFO - Update id=762235061 is handled. Duration 968 ms by bot id=7849840849
2025-05-21 12:12:37,210 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:37,420 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:12:37,421 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:37,931 - aiogram.event - INFO - Update id=762235062 is handled. Duration 929 ms by bot id=7849840849
2025-05-21 12:12:43,516 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 12:12:43,517 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:43,719 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:12:43,720 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:44,448 - aiogram.event - INFO - Update id=762235063 is handled. Duration 932 ms by bot id=7849840849
2025-05-21 12:12:48,811 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:49,014 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:12:49,015 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:49,197 - aiogram.event - INFO - Update id=762235064 is handled. Duration 593 ms by bot id=7849840849
2025-05-21 12:12:52,339 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:52,541 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:12:52,542 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:52,711 - aiogram.event - INFO - Update id=762235065 is handled. Duration 579 ms by bot id=7849840849
2025-05-21 12:12:55,081 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:55,285 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:12:55,286 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:55,530 - aiogram.event - INFO - Update id=762235066 is handled. Duration 652 ms by bot id=7849840849
2025-05-21 12:12:56,753 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:12:56,959 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:12:56,960 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:12:57,094 - aiogram.event - INFO - Update id=762235067 is handled. Duration 549 ms by bot id=7849840849
2025-05-21 12:13:19,070 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:13:19,271 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:13:19,272 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:13:19,452 - aiogram.event - INFO - Update id=762235068 is handled. Duration 601 ms by bot id=7849840849
2025-05-21 12:13:20,483 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:13:20,685 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:13:20,686 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:13:20,890 - aiogram.event - INFO - Update id=762235069 is handled. Duration 617 ms by bot id=7849840849
2025-05-21 12:13:21,339 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:13:21,541 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:13:21,542 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:13:21,759 - aiogram.event - INFO - Update id=762235070 is handled. Duration 622 ms by bot id=7849840849
2025-05-21 12:13:21,832 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:13:21,999 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:13:22,038 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:13:22,039 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:13:22,221 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:13:22,222 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:13:22,284 - aiogram.event - INFO - Update id=762235071 is handled. Duration 655 ms by bot id=7849840849
2025-05-21 12:13:22,674 - aiogram.event - INFO - Update id=762235072 is handled. Duration 901 ms by bot id=7849840849
2025-05-21 12:13:24,216 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:13:24,441 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:13:24,442 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:13:24,578 - aiogram.event - INFO - Update id=762235073 is handled. Duration 584 ms by bot id=7849840849
2025-05-21 12:13:25,302 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:13:25,520 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:13:25,521 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:13:25,719 - aiogram.event - INFO - Update id=762235074 is handled. Duration 635 ms by bot id=7849840849
2025-05-21 12:13:30,916 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:13:31,139 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:13:31,140 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:13:31,140 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:13:31,360 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:13:31,361 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:13:31,691 - aiogram.event - INFO - Update id=762235075 is handled. Duration 1221 ms by bot id=7849840849
2025-05-21 12:13:43,357 - aiogram.event - INFO - Update id=762235076 is handled. Duration 399 ms by bot id=7849840849
2025-05-21 12:13:46,556 - aiogram.event - INFO - Update id=762235077 is handled. Duration 606 ms by bot id=7849840849
2025-05-21 12:13:51,831 - aiogram.event - INFO - Update id=762235078 is handled. Duration 1610 ms by bot id=7849840849
2025-05-21 12:13:56,670 - aiogram.event - INFO - Update id=762235079 is handled. Duration 410 ms by bot id=7849840849
2025-05-21 12:13:57,929 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:13:58,148 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 12:13:58,472 - aiogram.event - INFO - Update id=762235080 is handled. Duration 762 ms by bot id=7849840849
2025-05-21 12:14:03,339 - aiogram.event - INFO - Update id=762235081 is handled. Duration 405 ms by bot id=7849840849
2025-05-21 12:14:04,642 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:14:04,863 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 12:14:05,171 - aiogram.event - INFO - Update id=762235082 is handled. Duration 745 ms by bot id=7849840849
2025-05-21 12:14:05,390 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:14:05,611 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 2}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:14:05,612 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:14:05,840 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:14:06,059 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}, {'name': 'Chuck', 'quantity': 3}]}
2025-05-21 12:14:06,061 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:14:06,280 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:14:06,499 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}, {'name': 'Chuck', 'quantity': 2}]}
2025-05-21 12:14:06,501 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:14:07,420 - aiogram.event - INFO - Update id=762235083 is handled. Duration 2257 ms by bot id=7849840849
2025-05-21 12:14:09,112 - aiogram.event - INFO - Update id=762235084 is handled. Duration 472 ms by bot id=7849840849
2025-05-21 12:14:10,568 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:14:10,800 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-05-21 12:14:11,310 - aiogram.event - INFO - Update id=762235085 is handled. Duration 1081 ms by bot id=7849840849
2025-05-21 12:14:16,697 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-05-21 12:14:16,697 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:14:16,920 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}, {'name': 'Chuck', 'quantity': 2}]}
2025-05-21 12:14:16,922 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:14:17,739 - aiogram.event - INFO - Update id=762235086 is handled. Duration 1043 ms by bot id=7849840849
2025-05-21 12:14:19,625 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:14:19,857 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}, {'name': 'Chuck', 'quantity': 2}]}
2025-05-21 12:14:19,859 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:14:20,413 - aiogram.event - INFO - Update id=762235087 is handled. Duration 1027 ms by bot id=7849840849
2025-05-21 12:14:21,991 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:14:22,208 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}, {'name': 'Chuck', 'quantity': 2}]}
2025-05-21 12:14:22,210 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:14:22,598 - aiogram.event - INFO - Update id=762235088 is handled. Duration 1055 ms by bot id=7849840849
2025-05-21 12:14:30,945 - aiogram.event - INFO - Update id=762235089 is handled. Duration 376 ms by bot id=7849840849
2025-05-21 12:14:35,023 - aiogram.event - INFO - Update id=762235090 is handled. Duration 667 ms by bot id=7849840849
2025-05-21 12:14:41,206 - aiogram.event - INFO - Update id=762235091 is handled. Duration 1732 ms by bot id=7849840849
2025-05-21 12:15:37,271 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:15:37,497 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}, {'name': 'Chuck', 'quantity': 2}]}
2025-05-21 12:15:37,499 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:15:37,718 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:15:37,937 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d7cb89f08f500b6140aac'), 'name': '', 'category': ' ', 'price': 6000, 'description': 'GM', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Chicken', 'quantity': 0}, {'name': 'Chuck', 'quantity': 0}]}
2025-05-21 12:15:37,938 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d7cb89f08f500b6140aac
2025-05-21 12:15:38,601 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d7cb89f08f500b6140aac
2025-05-21 12:15:38,820 - database.mongodb - INFO - [DEBUG] Found product in database: None
2025-05-21 12:15:39,012 - aiogram.event - INFO - Update id=762235092 is handled. Duration 1972 ms by bot id=7849840849
2025-05-21 12:15:39,516 - aiogram.event - INFO - Update id=762235093 is handled. Duration 1134 ms by bot id=7849840849
2025-05-21 12:15:42,782 - aiogram.event - INFO - Update id=762235094 is handled. Duration 372 ms by bot id=7849840849
2025-05-21 12:15:44,000 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-05-21 12:15:44,219 - database.mongodb - INFO - [DEBUG] Found 0 products in category  
2025-05-21 12:15:44,374 - aiogram.event - INFO - Update id=762235095 is handled. Duration 593 ms by bot id=7849840849
2025-05-21 12:15:52,427 - aiogram.event - INFO - Update id=762235096 is handled. Duration 468 ms by bot id=7849840849
2025-05-21 12:24:33,013 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 12:24:33,269 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 12:24:33,271 - root - INFO - Bot stopped
2025-05-21 12:24:41,540 - __main__ - INFO - Starting bot...
2025-05-21 12:24:41,808 - aiogram.dispatcher - INFO - Start polling
2025-05-21 12:24:42,344 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 12:25:32,299 - aiogram.event - INFO - Update id=762235097 is handled. Duration 544 ms by bot id=7849840849
2025-05-21 12:25:42,003 - aiogram.event - INFO - Update id=762235098 is handled. Duration 200 ms by bot id=7849840849
2025-05-21 12:25:45,920 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 12:25:46,090 - aiogram.event - INFO - Update id=762235099 is handled. Duration 173 ms by bot id=7849840849
2025-05-21 12:25:48,252 - aiogram.event - INFO - Update id=762235100 is handled. Duration 241 ms by bot id=7849840849
2025-05-21 12:25:50,230 - aiogram.event - INFO - Update id=762235101 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 12:25:50,230 - aiogram.event - ERROR - Cause exception while process update id=762235101 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:25:55,369 - aiogram.event - INFO - Update id=762235102 is not handled. Duration 6 ms by bot id=7849840849
2025-05-21 12:25:55,370 - aiogram.event - ERROR - Cause exception while process update id=762235102 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:25:58,548 - aiogram.event - INFO - Update id=762235103 is not handled. Duration 6 ms by bot id=7849840849
2025-05-21 12:25:58,549 - aiogram.event - ERROR - Cause exception while process update id=762235103 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:00,445 - aiogram.event - INFO - Update id=762235104 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 12:26:00,445 - aiogram.event - ERROR - Cause exception while process update id=762235104 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:01,906 - aiogram.event - INFO - Update id=762235105 is not handled. Duration 7 ms by bot id=7849840849
2025-05-21 12:26:01,906 - aiogram.event - ERROR - Cause exception while process update id=762235105 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:02,390 - aiogram.event - INFO - Update id=762235106 is not handled. Duration 7 ms by bot id=7849840849
2025-05-21 12:26:02,391 - aiogram.event - ERROR - Cause exception while process update id=762235106 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:04,091 - aiogram.event - INFO - Update id=762235107 is not handled. Duration 9 ms by bot id=7849840849
2025-05-21 12:26:04,092 - aiogram.event - ERROR - Cause exception while process update id=762235107 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:06,479 - aiogram.event - INFO - Update id=762235108 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 12:26:06,479 - aiogram.event - ERROR - Cause exception while process update id=762235108 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:08,292 - aiogram.event - INFO - Update id=762235109 is not handled. Duration 9 ms by bot id=7849840849
2025-05-21 12:26:08,293 - aiogram.event - ERROR - Cause exception while process update id=762235109 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:10,431 - aiogram.event - INFO - Update id=762235110 is not handled. Duration 8 ms by bot id=7849840849
2025-05-21 12:26:10,432 - aiogram.event - ERROR - Cause exception while process update id=762235110 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:12,160 - aiogram.event - INFO - Update id=762235111 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 12:26:12,161 - aiogram.event - ERROR - Cause exception while process update id=762235111 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 199, in list_products
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:12,303 - aiogram.event - INFO - Update id=762235112 is not handled. Duration 8 ms by bot id=7849840849
2025-05-21 12:26:12,304 - aiogram.event - ERROR - Cause exception while process update id=762235112 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:26:14,282 - handlers.admin_handlers - INFO - Admin session active for user 1088067370
2025-05-21 12:26:14,547 - aiogram.event - INFO - Update id=762235113 is handled. Duration 409 ms by bot id=7849840849
2025-05-21 12:26:14,743 - aiogram.event - INFO - Update id=762235114 is handled. Duration 464 ms by bot id=7849840849
2025-05-21 12:26:18,455 - aiogram.event - INFO - Update id=762235115 is handled. Duration 257 ms by bot id=7849840849
2025-05-21 12:26:18,816 - aiogram.event - INFO - Update id=762235116 is handled. Duration 474 ms by bot id=7849840849
2025-05-21 12:26:23,395 - aiogram.event - INFO - Update id=762235117 is not handled. Duration 5 ms by bot id=7849840849
2025-05-21 12:26:23,395 - aiogram.event - ERROR - Cause exception while process update id=762235117 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\database\mongodb.py", line 229, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-05-21 12:27:15,168 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 12:27:15,425 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 12:27:15,427 - root - INFO - Bot stopped
2025-05-21 12:27:22,648 - __main__ - INFO - Starting bot...
2025-05-21 12:27:22,649 - aiogram.dispatcher - INFO - Start polling
2025-05-21 12:27:23,089 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 12:27:44,787 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-05-21 12:27:48,386 - database.mongodb - INFO - Database indexes created successfully
2025-05-21 12:27:48,613 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-05-21 12:27:49,365 - aiogram.event - INFO - Update id=762235118 is handled. Duration 4578 ms by bot id=7849840849
2025-05-21 12:27:56,483 - aiogram.event - INFO - Update id=762235119 is handled. Duration 178 ms by bot id=7849840849
2025-05-21 12:28:00,424 - handlers.admin_handlers - INFO - Successful admin login for user 1088067370
2025-05-21 12:28:00,584 - aiogram.event - INFO - Update id=762235120 is handled. Duration 164 ms by bot id=7849840849
2025-05-21 12:28:02,836 - aiogram.event - INFO - Update id=762235121 is handled. Duration 251 ms by bot id=7849840849
2025-05-21 12:28:05,402 - aiogram.event - INFO - Update id=762235122 is handled. Duration 629 ms by bot id=7849840849
2025-05-21 12:28:10,629 - aiogram.event - INFO - Update id=762235123 is not handled. Duration 418 ms by bot id=7849840849
2025-05-21 12:28:10,629 - aiogram.event - ERROR - Cause exception while process update id=762235123 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Vape_shop_dimas\handlers\admin_handlers.py", line 249, in edit_products_list
    await callback.message.edit_text(
    ...<2 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
2025-05-21 12:28:16,212 - aiogram.event - INFO - Update id=762235124 is handled. Duration 400 ms by bot id=7849840849
2025-05-21 12:28:17,721 - aiogram.event - INFO - Update id=762235125 is handled. Duration 379 ms by bot id=7849840849
2025-05-21 12:28:20,688 - aiogram.event - INFO - Update id=762235126 is handled. Duration 252 ms by bot id=7849840849
2025-05-21 12:28:23,607 - aiogram.event - INFO - Update id=762235127 is handled. Duration 171 ms by bot id=7849840849
2025-05-21 12:28:27,564 - aiogram.event - INFO - Update id=762235128 is handled. Duration 243 ms by bot id=7849840849
2025-05-21 12:28:32,042 - aiogram.event - INFO - Update id=762235129 is handled. Duration 408 ms by bot id=7849840849
2025-05-21 12:28:34,236 - aiogram.event - INFO - Update id=762235130 is handled. Duration 573 ms by bot id=7849840849
2025-05-21 12:28:35,617 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-05-21 12:28:35,839 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True}
2025-05-21 12:28:35,840 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-05-21 12:28:36,168 - aiogram.event - INFO - Update id=762235131 is handled. Duration 557 ms by bot id=7849840849
2025-05-21 12:28:39,671 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-05-21 12:28:39,901 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True}
2025-05-21 12:28:39,902 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-05-21 12:28:40,199 - aiogram.event - INFO - Update id=762235132 is handled. Duration 538 ms by bot id=7849840849
2025-05-21 12:28:43,594 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-05-21 12:28:43,822 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True}
2025-05-21 12:28:43,824 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-05-21 12:28:44,125 - aiogram.event - INFO - Update id=762235133 is handled. Duration 539 ms by bot id=7849840849
2025-05-21 12:28:46,805 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-05-21 12:28:47,035 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True}
2025-05-21 12:28:47,036 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-05-21 12:28:47,520 - aiogram.event - INFO - Update id=762235134 is handled. Duration 729 ms by bot id=7849840849
2025-05-21 12:28:53,714 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-05-21 12:28:53,941 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 0}]}
2025-05-21 12:28:53,942 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-05-21 12:28:54,264 - aiogram.event - INFO - Update id=762235135 is handled. Duration 559 ms by bot id=7849840849
2025-05-21 12:28:57,126 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-05-21 12:28:57,355 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 0}]}
2025-05-21 12:28:57,356 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-05-21 12:28:57,789 - aiogram.event - INFO - Update id=762235136 is handled. Duration 674 ms by bot id=7849840849
2025-05-21 12:29:44,970 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-05-21 12:29:45,200 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 5}]}
2025-05-21 12:29:45,201 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-05-21 12:29:45,613 - aiogram.event - INFO - Update id=762235137 is handled. Duration 650 ms by bot id=7849840849
2025-05-21 12:30:09,739 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-05-21 12:30:09,968 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 5}]}
2025-05-21 12:30:09,969 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-05-21 12:30:10,308 - aiogram.event - INFO - Update id=762235138 is handled. Duration 576 ms by bot id=7849840849
2025-05-21 12:30:13,869 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-05-21 12:30:14,098 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 5}]}
2025-05-21 12:30:14,099 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-05-21 12:30:14,526 - aiogram.event - INFO - Update id=762235139 is handled. Duration 694 ms by bot id=7849840849
2025-05-21 12:30:25,545 - aiogram.dispatcher - INFO - Polling stopped
2025-05-21 12:30:25,810 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-05-21 12:30:25,812 - root - INFO - Bot stopped
2025-06-13 18:05:42,913 - __main__ - CRITICAL - Critical error while running bot: name 'start_cart_expiration_checker' is not defined
2025-06-13 18:05:42,914 - root - INFO - Bot stopped
2025-06-13 18:06:18,571 - __main__ - CRITICAL - Critical error while running bot: name 'start_cart_expiration_checker' is not defined
2025-06-13 18:06:18,572 - root - INFO - Bot stopped
2025-06-13 18:12:09,445 - __main__ - INFO - Starting bot...
2025-06-13 18:12:09,446 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 18:12:09,447 - aiogram.dispatcher - INFO - Start polling
2025-06-13 18:12:09,902 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 18:12:10,056 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 18:12:10,781 - aiogram.event - INFO - Update id=762235443 is handled. Duration 725 ms by bot id=7849840849
2025-06-13 18:12:10,874 - aiogram.event - INFO - Update id=762235441 is handled. Duration 820 ms by bot id=7849840849
2025-06-13 18:12:13,768 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 18:12:14,000 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 18:12:14,417 - aiogram.event - INFO - Update id=762235440 is handled. Duration 4363 ms by bot id=7849840849
2025-06-13 18:18:15,249 - aiogram.event - INFO - Update id=762235444 is handled. Duration 182 ms by bot id=7849840849
2025-06-13 18:18:16,960 - aiogram.event - INFO - Update id=762235445 is handled. Duration 164 ms by bot id=7849840849
2025-06-13 18:18:21,446 - handlers.admin_handlers - INFO - Successful admin login for user 7737565280
2025-06-13 18:18:21,663 - aiogram.event - INFO - Update id=762235446 is handled. Duration 220 ms by bot id=7849840849
2025-06-13 18:18:24,501 - aiogram.event - INFO - Update id=762235447 is handled. Duration 1140 ms by bot id=7849840849
2025-06-13 18:18:25,506 - aiogram.event - INFO - Update id=762235448 is handled. Duration 568 ms by bot id=7849840849
2025-06-13 18:18:27,015 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:18:27,260 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 0}]}
2025-06-13 18:18:27,262 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:18:27,842 - aiogram.event - INFO - Update id=762235449 is handled. Duration 834 ms by bot id=7849840849
2025-06-13 18:18:30,381 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:18:30,624 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 0}]}
2025-06-13 18:18:30,625 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:18:30,960 - aiogram.event - INFO - Update id=762235450 is handled. Duration 586 ms by bot id=7849840849
2025-06-13 18:18:33,059 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:18:33,296 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 0}]}
2025-06-13 18:18:33,297 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:18:33,652 - aiogram.event - INFO - Update id=762235451 is handled. Duration 600 ms by bot id=7849840849
2025-06-13 18:18:37,815 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:18:38,055 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 0}]}
2025-06-13 18:18:38,056 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:18:38,585 - aiogram.event - INFO - Update id=762235452 is handled. Duration 775 ms by bot id=7849840849
2025-06-13 18:18:46,356 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:18:46,596 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:18:47,543 - aiogram.event - INFO - Update id=762235453 is handled. Duration 1417 ms by bot id=7849840849
2025-06-13 18:18:48,414 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 18:18:48,414 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:18:48,664 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 3}]}
2025-06-13 18:18:48,665 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:18:49,487 - aiogram.event - INFO - Update id=762235454 is handled. Duration 1073 ms by bot id=7849840849
2025-06-13 18:18:55,303 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:18:55,434 - aiogram.event - INFO - Update id=762235455 is handled. Duration 2033 ms by bot id=7849840849
2025-06-13 18:18:55,546 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:18:59,119 - aiogram.event - INFO - Update id=762235456 is handled. Duration 4084 ms by bot id=7849840849
2025-06-13 18:19:03,804 - aiogram.event - INFO - Update id=762235457 is handled. Duration 713 ms by bot id=7849840849
2025-06-13 18:19:06,543 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:19:06,775 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 3}]}
2025-06-13 18:19:06,777 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:19:07,562 - aiogram.event - INFO - Update id=762235458 is handled. Duration 1273 ms by bot id=7849840849
2025-06-13 18:19:09,052 - aiogram.event - INFO - Update id=762235459 is handled. Duration 440 ms by bot id=7849840849
2025-06-13 18:19:12,136 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:19:12,375 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:19:14,891 - aiogram.event - INFO - Update id=762235460 is handled. Duration 2996 ms by bot id=7849840849
2025-06-13 18:27:22,011 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 18:27:22,265 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 18:27:22,267 - root - INFO - Bot stopped
2025-06-13 18:27:29,245 - __main__ - INFO - Starting bot...
2025-06-13 18:27:29,247 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 18:27:29,248 - aiogram.dispatcher - INFO - Start polling
2025-06-13 18:27:29,845 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 18:27:50,096 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 18:27:50,215 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2775)
2025-06-13 18:27:50,216 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7849840849)
2025-06-13 18:27:50,349 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 18:27:50,351 - root - INFO - Bot stopped
2025-06-13 18:27:56,372 - __main__ - INFO - Starting bot...
2025-06-13 18:27:56,373 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 18:27:56,374 - aiogram.dispatcher - INFO - Start polling
2025-06-13 18:27:56,862 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 18:28:20,618 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 18:28:24,137 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 18:28:24,355 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 18:28:25,318 - aiogram.event - INFO - Update id=762235461 is handled. Duration 4701 ms by bot id=7849840849
2025-06-13 18:28:30,513 - aiogram.event - INFO - Update id=762235462 is handled. Duration 2650 ms by bot id=7849840849
2025-06-13 18:28:32,203 - aiogram.event - INFO - Update id=762235463 is handled. Duration 406 ms by bot id=7849840849
2025-06-13 18:28:33,776 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:28:33,989 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:28:34,548 - aiogram.event - INFO - Update id=762235464 is handled. Duration 1065 ms by bot id=7849840849
2025-06-13 18:28:35,481 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 18:28:35,482 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:28:35,718 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 3}]}
2025-06-13 18:28:35,719 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:28:36,507 - aiogram.event - INFO - Update id=762235465 is handled. Duration 1026 ms by bot id=7849840849
2025-06-13 18:28:39,408 - aiogram.event - INFO - Update id=762235466 is handled. Duration 397 ms by bot id=7849840849
2025-06-13 18:28:40,608 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:28:40,828 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:28:41,176 - aiogram.event - INFO - Update id=762235467 is handled. Duration 778 ms by bot id=7849840849
2025-06-13 18:31:59,501 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 18:31:59,766 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 18:31:59,768 - root - INFO - Bot stopped
2025-06-13 18:32:05,081 - __main__ - INFO - Starting bot...
2025-06-13 18:32:05,082 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 18:32:05,083 - aiogram.dispatcher - INFO - Start polling
2025-06-13 18:32:05,524 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 18:32:05,692 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 18:32:09,265 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 18:32:09,516 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 18:32:12,612 - aiogram.event - INFO - Update id=762235469 is handled. Duration 757 ms by bot id=7849840849
2025-06-13 18:32:14,705 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:32:14,937 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:32:15,395 - aiogram.event - INFO - Update id=762235470 is handled. Duration 917 ms by bot id=7849840849
2025-06-13 18:32:16,995 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 18:32:17,225 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:32:17,457 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 3}]}
2025-06-13 18:32:17,458 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:32:18,774 - aiogram.event - INFO - Update id=762235471 is handled. Duration 1779 ms by bot id=7849840849
2025-06-13 18:32:22,392 - aiogram.event - INFO - Update id=762235472 is handled. Duration 527 ms by bot id=7849840849
2025-06-13 18:32:23,706 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:32:23,943 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:32:24,297 - aiogram.event - INFO - Update id=762235473 is handled. Duration 827 ms by bot id=7849840849
2025-06-13 18:32:28,344 - aiogram.event - INFO - Update id=762235474 is handled. Duration 638 ms by bot id=7849840849
2025-06-13 18:32:32,284 - aiogram.event - INFO - Update id=762235475 is handled. Duration 2363 ms by bot id=7849840849
2025-06-13 18:32:34,577 - aiogram.event - INFO - Update id=762235468 is handled. Duration 28885 ms by bot id=7849840849
2025-06-13 18:32:34,985 - aiogram.event - INFO - Update id=762235476 is handled. Duration 409 ms by bot id=7849840849
2025-06-13 18:32:36,225 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:32:36,465 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:32:36,826 - aiogram.event - INFO - Update id=762235477 is handled. Duration 831 ms by bot id=7849840849
2025-06-13 18:32:44,725 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 18:32:44,958 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:32:45,224 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 2}]}
2025-06-13 18:32:45,225 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:32:45,946 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 18:32:46,288 - aiogram.event - INFO - Update id=762235478 is handled. Duration 1564 ms by bot id=7849840849
2025-06-13 18:32:47,420 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:32:47,643 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 1}]}
2025-06-13 18:32:47,644 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:32:48,037 - aiogram.event - INFO - Update id=762235479 is handled. Duration 2092 ms by bot id=7849840849
2025-06-13 18:32:48,608 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:32:48,860 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 1}]}
2025-06-13 18:32:48,861 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:32:49,011 - aiogram.event - INFO - Update id=762235480 is handled. Duration 641 ms by bot id=7849840849
2025-06-13 18:32:53,363 - aiogram.event - INFO - Update id=762235481 is handled. Duration 1252 ms by bot id=7849840849
2025-06-13 18:32:55,750 - aiogram.event - INFO - Update id=762235482 is handled. Duration 443 ms by bot id=7849840849
2025-06-13 18:32:57,833 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:32:58,063 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:32:58,430 - aiogram.event - INFO - Update id=762235483 is handled. Duration 843 ms by bot id=7849840849
2025-06-13 18:34:58,236 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 18:34:58,496 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 18:34:58,498 - root - INFO - Bot stopped
2025-06-13 18:35:04,718 - __main__ - INFO - Starting bot...
2025-06-13 18:35:04,720 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 18:35:04,720 - aiogram.dispatcher - INFO - Start polling
2025-06-13 18:35:05,224 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 18:35:12,041 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 18:35:15,439 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 18:35:15,661 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 18:35:18,147 - aiogram.event - INFO - Update id=762235484 is handled. Duration 6106 ms by bot id=7849840849
2025-06-13 18:35:19,348 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:35:19,571 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:35:19,902 - aiogram.event - INFO - Update id=762235485 is handled. Duration 773 ms by bot id=7849840849
2025-06-13 18:35:23,333 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 18:35:23,541 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:35:23,769 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 1}]}
2025-06-13 18:35:23,770 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:35:24,961 - aiogram.event - INFO - Update id=762235486 is handled. Duration 1629 ms by bot id=7849840849
2025-06-13 18:35:27,588 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:35:27,801 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 0}]}
2025-06-13 18:35:27,802 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:35:27,973 - aiogram.event - INFO - Update id=762235487 is handled. Duration 601 ms by bot id=7849840849
2025-06-13 18:35:30,962 - aiogram.event - INFO - Update id=762235488 is handled. Duration 1010 ms by bot id=7849840849
2025-06-13 18:35:32,834 - aiogram.event - INFO - Update id=762235489 is handled. Duration 421 ms by bot id=7849840849
2025-06-13 18:35:34,790 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:35:35,011 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:35:35,346 - aiogram.event - INFO - Update id=762235490 is handled. Duration 784 ms by bot id=7849840849
2025-06-13 18:35:37,653 - aiogram.event - INFO - Update id=762235491 is handled. Duration 431 ms by bot id=7849840849
2025-06-13 18:35:43,924 - handlers.admin_handlers - WARNING - Admin access denied for user 7737565280
2025-06-13 18:35:44,073 - aiogram.event - INFO - Update id=762235492 is handled. Duration 157 ms by bot id=7849840849
2025-06-13 18:35:48,774 - aiogram.event - INFO - Update id=762235493 is handled. Duration 272 ms by bot id=7849840849
2025-06-13 18:35:52,689 - handlers.admin_handlers - INFO - Successful admin login for user 7737565280
2025-06-13 18:35:52,894 - aiogram.event - INFO - Update id=762235494 is handled. Duration 207 ms by bot id=7849840849
2025-06-13 18:35:54,805 - aiogram.event - INFO - Update id=762235495 is handled. Duration 304 ms by bot id=7849840849
2025-06-13 18:36:09,498 - aiogram.event - INFO - Update id=762235496 is handled. Duration 605 ms by bot id=7849840849
2025-06-13 18:36:19,086 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:36:19,311 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 1}]}
2025-06-13 18:36:19,312 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:36:19,883 - aiogram.event - INFO - Update id=762235497 is handled. Duration 803 ms by bot id=7849840849
2025-06-13 18:36:31,049 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:36:31,267 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 1}]}
2025-06-13 18:36:31,268 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:36:32,061 - aiogram.event - INFO - Update id=762235498 is handled. Duration 1019 ms by bot id=7849840849
2025-06-13 18:36:33,098 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:36:33,310 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'CBC', 'quantity': 1}]}
2025-06-13 18:36:33,312 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:36:33,879 - aiogram.event - INFO - Update id=762235499 is handled. Duration 789 ms by bot id=7849840849
2025-06-13 18:36:37,840 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:36:38,060 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': []}
2025-06-13 18:36:38,061 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:36:39,133 - aiogram.event - INFO - Update id=762235500 is handled. Duration 1301 ms by bot id=7849840849
2025-06-13 18:36:43,552 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:36:43,766 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': []}
2025-06-13 18:36:43,767 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:36:44,168 - aiogram.event - INFO - Update id=762235501 is handled. Duration 622 ms by bot id=7849840849
2025-06-13 18:37:11,462 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:37:11,682 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 18:37:11,683 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:37:12,478 - aiogram.event - INFO - Update id=762235502 is not handled. Duration 1023 ms by bot id=7849840849
2025-06-13 18:37:12,480 - aiogram.event - ERROR - Cause exception while process update id=762235502 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 1312, in start_add_flavor_quantity
    await callback.answer()
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 1318, in start_add_flavor_quantity
    await callback.answer(" ")
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:12,859 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:37:12,861 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:37:12,862 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:37:13,082 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 18:37:13,083 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:37:13,506 - aiogram.event - INFO - Update id=762235503 is not handled. Duration 664 ms by bot id=7849840849
2025-06-13 18:37:13,507 - aiogram.event - ERROR - Cause exception while process update id=762235503 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 1304, in start_add_flavor_quantity
    await callback.message.edit_text(
    ...<5 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 1318, in start_add_flavor_quantity
    await callback.answer(" ")
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:14,214 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 18:37:14,215 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:37:14,248 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 18:37:14,249 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:37:14,961 - aiogram.event - INFO - Update id=762235505 is handled. Duration 2119 ms by bot id=7849840849
2025-06-13 18:37:16,141 - aiogram.event - INFO - Update id=762235504 is not handled. Duration 3299 ms by bot id=7849840849
2025-06-13 18:37:16,142 - aiogram.event - ERROR - Cause exception while process update id=762235504 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 1304, in start_add_flavor_quantity
    await callback.message.edit_text(
    ...<5 lines>...
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 1318, in start_add_flavor_quantity
    await callback.answer(" ")
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:20,112 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:37:20,351 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 18:37:20,352 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:37:20,851 - aiogram.event - INFO - Update id=762235506 is handled. Duration 745 ms by bot id=7849840849
2025-06-13 18:37:49,319 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:37:49,554 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:37:50,203 - handlers.user_handlers - ERROR - Error in show_category: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:50,356 - aiogram.event - INFO - Update id=762235507 is not handled. Duration 1264 ms by bot id=7849840849
2025-06-13 18:37:50,357 - aiogram.event - ERROR - Cause exception while process update id=762235507 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 141, in show_category
    await callback.answer()
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 144, in show_category
    await callback.answer("    ")
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:50,461 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:37:50,465 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:37:50,674 - aiogram.event - INFO - Update id=762235512 is handled. Duration 433 ms by bot id=7849840849
2025-06-13 18:37:50,675 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:37:50,691 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:37:51,008 - handlers.user_handlers - ERROR - Error in show_category: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:51,172 - aiogram.event - INFO - Update id=762235509 is not handled. Duration 932 ms by bot id=7849840849
2025-06-13 18:37:51,172 - aiogram.event - ERROR - Cause exception while process update id=762235509 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 141, in show_category
    await callback.answer()
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 144, in show_category
    await callback.answer("    ")
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:51,404 - aiogram.event - INFO - Update id=762235511 is handled. Duration 1163 ms by bot id=7849840849
2025-06-13 18:37:51,517 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:37:51,671 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:37:51,710 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:37:51,892 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:37:52,156 - handlers.user_handlers - ERROR - Error in show_category: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:52,315 - handlers.user_handlers - ERROR - Error in show_category: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:52,370 - aiogram.event - INFO - Update id=762235510 is not handled. Duration 2129 ms by bot id=7849840849
2025-06-13 18:37:52,371 - aiogram.event - ERROR - Cause exception while process update id=762235510 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 141, in show_category
    await callback.answer()
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 144, in show_category
    await callback.answer("    ")
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:52,595 - aiogram.event - INFO - Update id=762235508 is not handled. Duration 2355 ms by bot id=7849840849
2025-06-13 18:37:52,595 - aiogram.event - ERROR - Cause exception while process update id=762235508 by bot id=7849840849
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 141, in show_category
    await callback.answer()
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 144, in show_category
    await callback.answer("    ")
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 478, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-06-13 18:37:55,906 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 18:37:56,141 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:37:56,380 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 7}]}
2025-06-13 18:37:56,381 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:37:57,633 - aiogram.event - INFO - Update id=762235513 is handled. Duration 1728 ms by bot id=7849840849
2025-06-13 18:38:38,620 - aiogram.event - INFO - Update id=762235514 is handled. Duration 421 ms by bot id=7849840849
2025-06-13 18:38:39,860 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:38:40,091 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:38:40,424 - aiogram.event - INFO - Update id=762235515 is handled. Duration 795 ms by bot id=7849840849
2025-06-13 18:38:45,189 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:38:45,411 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 6}]}
2025-06-13 18:38:45,412 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:38:46,194 - aiogram.event - INFO - Update id=762235516 is handled. Duration 1250 ms by bot id=7849840849
2025-06-13 18:38:48,793 - aiogram.event - INFO - Update id=762235517 is handled. Duration 503 ms by bot id=7849840849
2025-06-13 18:38:50,140 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:38:50,371 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:38:50,739 - aiogram.event - INFO - Update id=762235518 is handled. Duration 828 ms by bot id=7849840849
2025-06-13 18:38:54,087 - aiogram.event - INFO - Update id=762235519 is handled. Duration 1116 ms by bot id=7849840849
2025-06-13 18:38:54,688 - aiogram.event - INFO - Update id=762235520 is handled. Duration 428 ms by bot id=7849840849
2025-06-13 18:38:55,879 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:38:56,110 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:38:56,437 - aiogram.event - INFO - Update id=762235521 is handled. Duration 794 ms by bot id=7849840849
2025-06-13 18:38:59,310 - aiogram.event - INFO - Update id=762235522 is handled. Duration 1028 ms by bot id=7849840849
2025-06-13 18:39:01,120 - aiogram.event - INFO - Update id=762235523 is handled. Duration 415 ms by bot id=7849840849
2025-06-13 18:39:02,279 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:39:02,511 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:39:02,919 - aiogram.event - INFO - Update id=762235524 is handled. Duration 874 ms by bot id=7849840849
2025-06-13 18:40:59,631 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 18:40:59,857 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:41:00,089 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 7}]}
2025-06-13 18:41:00,090 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:41:01,308 - aiogram.event - INFO - Update id=762235525 is handled. Duration 1677 ms by bot id=7849840849
2025-06-13 18:41:09,698 - aiogram.event - INFO - Update id=762235526 is handled. Duration 428 ms by bot id=7849840849
2025-06-13 18:41:11,069 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 18:41:11,290 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 18:41:11,605 - aiogram.event - INFO - Update id=762235527 is handled. Duration 765 ms by bot id=7849840849
2025-06-13 18:41:12,829 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 18:41:13,058 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 18:41:13,298 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 6}]}
2025-06-13 18:41:13,300 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 18:41:14,338 - aiogram.event - INFO - Update id=762235528 is handled. Duration 1509 ms by bot id=7849840849
2025-06-13 18:41:16,762 - aiogram.event - INFO - Update id=762235529 is handled. Duration 663 ms by bot id=7849840849
2025-06-13 18:41:18,488 - aiogram.event - INFO - Update id=762235530 is handled. Duration 701 ms by bot id=7849840849
2025-06-13 19:05:33,283 - aiogram.event - INFO - Update id=762235531 is handled. Duration 930 ms by bot id=7849840849
2025-06-13 19:05:38,832 - aiogram.event - INFO - Update id=762235532 is handled. Duration 687 ms by bot id=7849840849
2025-06-13 19:10:20,440 - aiogram.event - INFO - Update id=762235533 is handled. Duration 437 ms by bot id=7849840849
2025-06-13 19:10:21,880 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:10:22,120 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:10:22,541 - aiogram.event - INFO - Update id=762235534 is handled. Duration 903 ms by bot id=7849840849
2025-06-13 19:10:25,427 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 19:10:25,660 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:10:25,893 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 7}]}
2025-06-13 19:10:25,894 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:10:26,918 - aiogram.event - INFO - Update id=762235535 is handled. Duration 1491 ms by bot id=7849840849
2025-06-13 19:10:29,441 - aiogram.event - INFO - Update id=762235536 is handled. Duration 419 ms by bot id=7849840849
2025-06-13 19:10:30,760 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:10:31,000 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:10:31,345 - aiogram.event - INFO - Update id=762235537 is handled. Duration 815 ms by bot id=7849840849
2025-06-13 19:10:34,358 - aiogram.event - INFO - Update id=762235538 is handled. Duration 544 ms by bot id=7849840849
2025-06-13 19:10:35,920 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:10:36,151 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:10:36,507 - aiogram.event - INFO - Update id=762235539 is handled. Duration 817 ms by bot id=7849840849
2025-06-13 19:10:39,381 - aiogram.event - INFO - Update id=762235540 is handled. Duration 656 ms by bot id=7849840849
2025-06-13 19:10:42,343 - aiogram.event - INFO - Update id=762235541 is handled. Duration 1053 ms by bot id=7849840849
2025-06-13 19:10:43,980 - aiogram.event - INFO - Update id=762235542 is handled. Duration 411 ms by bot id=7849840849
2025-06-13 19:10:45,360 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:10:45,600 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:10:45,952 - aiogram.event - INFO - Update id=762235543 is handled. Duration 838 ms by bot id=7849840849
2025-06-13 19:26:16,780 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2025-06-13 19:26:16,782 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7849840849)
2025-06-13 19:26:28,264 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 7849840849)
2025-06-13 19:33:18,231 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:33:18,443 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:33:18,817 - aiogram.event - INFO - Update id=762235544 is handled. Duration 3547 ms by bot id=7849840849
2025-06-13 19:33:19,281 - aiogram.event - INFO - Update id=762235545 is handled. Duration 1259 ms by bot id=7849840849
2025-06-13 19:33:32,264 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 19:33:32,479 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:33:32,691 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 7}]}
2025-06-13 19:33:32,692 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:33:33,722 - aiogram.event - INFO - Update id=762235546 is handled. Duration 1458 ms by bot id=7849840849
2025-06-13 19:33:36,891 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:33:37,111 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 6}]}
2025-06-13 19:33:37,112 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:33:38,491 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:33:38,493 - aiogram.event - INFO - Update id=762235547 is handled. Duration 1822 ms by bot id=7849840849
2025-06-13 19:33:38,703 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 5}]}
2025-06-13 19:33:38,705 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:33:41,531 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:33:41,759 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 4}]}
2025-06-13 19:33:41,760 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:33:42,173 - aiogram.event - INFO - Update id=762235549 is handled. Duration 1068 ms by bot id=7849840849
2025-06-13 19:33:44,509 - aiogram.event - INFO - Update id=762235548 is handled. Duration 6232 ms by bot id=7849840849
2025-06-13 19:33:51,809 - aiogram.event - INFO - Update id=762235550 is handled. Duration 939 ms by bot id=7849840849
2025-06-13 19:33:55,515 - aiogram.event - INFO - Update id=762235551 is handled. Duration 681 ms by bot id=7849840849
2025-06-13 19:34:06,236 - aiogram.event - INFO - Update id=762235552 is handled. Duration 2565 ms by bot id=7849840849
2025-06-13 19:34:07,489 - aiogram.event - INFO - Update id=762235553 is handled. Duration 584 ms by bot id=7849840849
2025-06-13 19:34:10,011 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:34:10,232 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:34:10,765 - aiogram.event - INFO - Update id=762235554 is handled. Duration 964 ms by bot id=7849840849
2025-06-13 19:34:12,203 - handlers.user_handlers - INFO - Starting select_flavor handler
2025-06-13 19:34:12,403 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:34:12,631 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 4}]}
2025-06-13 19:34:12,632 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:34:13,650 - aiogram.event - INFO - Update id=762235555 is handled. Duration 1447 ms by bot id=7849840849
2025-06-13 19:34:17,788 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:34:18,012 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 3}]}
2025-06-13 19:34:18,013 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:34:18,368 - aiogram.event - INFO - Update id=762235556 is handled. Duration 1017 ms by bot id=7849840849
2025-06-13 19:34:25,199 - aiogram.event - INFO - Update id=762235557 is handled. Duration 406 ms by bot id=7849840849
2025-06-13 19:34:30,049 - aiogram.event - INFO - Update id=762235558 is handled. Duration 1193 ms by bot id=7849840849
2025-06-13 19:34:39,438 - aiogram.event - INFO - Update id=762235559 is handled. Duration 2166 ms by bot id=7849840849
2025-06-13 19:35:43,678 - aiogram.event - INFO - Update id=762235560 is handled. Duration 398 ms by bot id=7849840849
2025-06-13 19:35:45,230 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:35:45,449 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:35:45,918 - aiogram.event - INFO - Update id=762235561 is handled. Duration 910 ms by bot id=7849840849
2025-06-13 19:36:15,234 - aiogram.event - INFO - Update id=762235562 is handled. Duration 343 ms by bot id=7849840849
2025-06-13 19:36:20,410 - aiogram.event - INFO - Update id=762235563 is handled. Duration 1023 ms by bot id=7849840849
2025-06-13 19:36:24,161 - aiogram.event - INFO - Update id=762235564 is handled. Duration 382 ms by bot id=7849840849
2025-06-13 19:36:25,649 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:36:25,869 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:36:26,209 - aiogram.event - INFO - Update id=762235565 is handled. Duration 770 ms by bot id=7849840849
2025-06-13 19:36:40,371 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:36:40,581 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 3}]}
2025-06-13 19:36:40,582 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:36:40,797 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:36:41,001 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 2}]}
2025-06-13 19:36:41,002 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:36:42,120 - aiogram.event - INFO - Update id=762235566 is handled. Duration 1964 ms by bot id=7849840849
2025-06-13 19:37:46,672 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 19:37:46,936 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:37:46,939 - root - INFO - Bot stopped
2025-06-13 19:37:56,977 - __main__ - INFO - Starting bot...
2025-06-13 19:37:56,981 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 19:37:56,982 - aiogram.dispatcher - INFO - Start polling
2025-06-13 19:37:57,595 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:38:02,218 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 19:38:02,473 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:38:02,475 - root - INFO - Bot stopped
2025-06-13 19:38:07,766 - __main__ - INFO - Starting bot...
2025-06-13 19:38:07,768 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 19:38:07,769 - aiogram.dispatcher - INFO - Start polling
2025-06-13 19:38:08,259 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:38:08,403 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 19:38:12,104 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 19:38:12,364 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 19:38:13,092 - aiogram.event - INFO - Update id=762235567 is handled. Duration 4689 ms by bot id=7849840849
2025-06-13 19:38:14,734 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:38:14,967 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:38:15,528 - aiogram.event - INFO - Update id=762235568 is handled. Duration 1035 ms by bot id=7849840849
2025-06-13 19:38:24,827 - aiogram.event - INFO - Update id=762235569 is not handled. Duration 10 ms by bot id=7849840849
2025-06-13 19:38:36,871 - aiogram.event - INFO - Update id=762235570 is not handled. Duration 9 ms by bot id=7849840849
2025-06-13 19:38:42,861 - aiogram.event - INFO - Update id=762235571 is not handled. Duration 9 ms by bot id=7849840849
2025-06-13 19:38:48,294 - aiogram.event - INFO - Update id=762235572 is handled. Duration 646 ms by bot id=7849840849
2025-06-13 19:38:50,311 - aiogram.event - INFO - Update id=762235573 is not handled. Duration 9 ms by bot id=7849840849
2025-06-13 19:39:15,897 - aiogram.event - INFO - Update id=762235574 is not handled. Duration 10 ms by bot id=7849840849
2025-06-13 19:39:26,216 - aiogram.event - INFO - Update id=762235575 is handled. Duration 419 ms by bot id=7849840849
2025-06-13 19:39:28,489 - aiogram.event - INFO - Update id=762235576 is handled. Duration 403 ms by bot id=7849840849
2025-06-13 19:39:29,733 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:39:29,966 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:39:30,466 - aiogram.event - INFO - Update id=762235577 is handled. Duration 979 ms by bot id=7849840849
2025-06-13 19:39:31,520 - aiogram.event - INFO - Update id=762235578 is not handled. Duration 11 ms by bot id=7849840849
2025-06-13 19:40:34,181 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 19:40:34,446 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:40:34,448 - root - INFO - Bot stopped
2025-06-13 19:40:40,197 - __main__ - INFO - Starting bot...
2025-06-13 19:40:40,199 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 19:40:40,200 - aiogram.dispatcher - INFO - Start polling
2025-06-13 19:40:40,688 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:40:42,474 - handlers.user_handlers - ERROR - Error in select_flavor: 'MongoDB' object has no attribute 'is_sleep_mode'
2025-06-13 19:40:42,932 - aiogram.event - INFO - Update id=762235579 is handled. Duration 459 ms by bot id=7849840849
2025-06-13 19:40:52,948 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 19:40:56,514 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 19:40:56,745 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 19:40:57,149 - aiogram.event - INFO - Update id=762235580 is handled. Duration 4201 ms by bot id=7849840849
2025-06-13 19:40:59,405 - aiogram.event - INFO - Update id=762235581 is handled. Duration 419 ms by bot id=7849840849
2025-06-13 19:41:01,345 - aiogram.event - INFO - Update id=762235582 is handled. Duration 745 ms by bot id=7849840849
2025-06-13 19:41:02,868 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:41:03,107 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:41:03,502 - aiogram.event - INFO - Update id=762235583 is handled. Duration 867 ms by bot id=7849840849
2025-06-13 19:41:04,499 - handlers.user_handlers - ERROR - Error in select_flavor: 'MongoDB' object has no attribute 'is_sleep_mode'
2025-06-13 19:41:04,678 - aiogram.event - INFO - Update id=762235584 is handled. Duration 180 ms by bot id=7849840849
2025-06-13 19:42:13,346 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 19:42:13,603 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:42:13,605 - root - INFO - Bot stopped
2025-06-13 19:42:20,171 - __main__ - INFO - Starting bot...
2025-06-13 19:42:20,173 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 19:42:20,174 - aiogram.dispatcher - INFO - Start polling
2025-06-13 19:42:20,668 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:42:23,050 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 19:42:26,675 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 19:42:26,974 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 19:42:27,728 - aiogram.event - INFO - Update id=762235585 is handled. Duration 4678 ms by bot id=7849840849
2025-06-13 19:42:30,184 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:42:30,446 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:42:30,970 - aiogram.event - INFO - Update id=762235586 is handled. Duration 1017 ms by bot id=7849840849
2025-06-13 19:42:33,027 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 19:42:33,028 - handlers.user_handlers - ERROR - Error in select_flavor: 'MongoDB' object has no attribute 'is_sleep_mode'
Traceback (most recent call last):
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 234, in select_flavor
    if await db.is_sleep_mode():
             ^^^^^^^^^^^^^^^^
AttributeError: 'MongoDB' object has no attribute 'is_sleep_mode'. Did you mean: 'get_sleep_mode'?
2025-06-13 19:42:33,236 - aiogram.event - INFO - Update id=762235587 is handled. Duration 209 ms by bot id=7849840849
2025-06-13 19:42:41,028 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 19:42:41,029 - handlers.user_handlers - ERROR - Error in select_flavor: 'MongoDB' object has no attribute 'is_sleep_mode'
Traceback (most recent call last):
  File "C:\Users\r-keeper\Desktop\Shop\handlers\user_handlers.py", line 234, in select_flavor
    if await db.is_sleep_mode():
             ^^^^^^^^^^^^^^^^
AttributeError: 'MongoDB' object has no attribute 'is_sleep_mode'. Did you mean: 'get_sleep_mode'?
2025-06-13 19:42:41,182 - aiogram.event - INFO - Update id=762235588 is handled. Duration 155 ms by bot id=7849840849
2025-06-13 19:43:36,881 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 19:43:37,142 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:43:37,144 - root - INFO - Bot stopped
2025-06-13 19:43:43,966 - __main__ - INFO - Starting bot...
2025-06-13 19:43:43,968 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 19:43:43,969 - aiogram.dispatcher - INFO - Start polling
2025-06-13 19:43:44,568 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:43:50,890 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 19:43:50,891 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 19:43:54,392 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 19:43:54,613 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 19:43:54,834 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 19:43:54,834 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 19:43:54,835 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:43:55,054 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 2}]}
2025-06-13 19:43:55,055 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:43:55,055 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 19:43:55,056 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 2}]
2025-06-13 19:43:55,056 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 2}
2025-06-13 19:43:55,293 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T19:43:33.118664'}
2025-06-13 19:43:55,529 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 19:43:55,530 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 19:43:56,005 - database.mongodb - INFO - Update result: success=True, modified_count=1
2025-06-13 19:43:56,006 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 19:43:56,006 - handlers.user_handlers - INFO - Updating user data
2025-06-13 19:43:56,771 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 19:43:56,772 - aiogram.event - INFO - Update id=762235589 is handled. Duration 5882 ms by bot id=7849840849
2025-06-13 19:44:01,221 - aiogram.event - INFO - Update id=762235590 is handled. Duration 662 ms by bot id=7849840849
2025-06-13 19:44:04,017 - aiogram.event - INFO - Update id=762235591 is handled. Duration 431 ms by bot id=7849840849
2025-06-13 19:44:05,293 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:44:05,514 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:44:05,963 - aiogram.event - INFO - Update id=762235592 is handled. Duration 919 ms by bot id=7849840849
2025-06-13 19:44:22,956 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 19:44:23,182 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 19:44:23,182 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 19:44:23,183 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:44:23,414 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 1}]}
2025-06-13 19:44:23,415 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:44:23,415 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 19:44:23,416 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 1}]
2025-06-13 19:44:23,416 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 1}
2025-06-13 19:44:23,661 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [{'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T19:53:56.006913'}
2025-06-13 19:44:23,873 - handlers.user_handlers - INFO - Flavor already in cart
2025-06-13 19:44:24,182 - aiogram.event - INFO - Update id=762235593 is handled. Duration 1227 ms by bot id=7849840849
2025-06-13 19:44:28,708 - aiogram.event - INFO - Update id=762235594 is handled. Duration 420 ms by bot id=7849840849
2025-06-13 19:44:31,866 - aiogram.event - INFO - Update id=762235595 is handled. Duration 641 ms by bot id=7849840849
2025-06-13 19:44:34,503 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:44:34,733 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 1}]}
2025-06-13 19:44:34,734 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:44:35,106 - aiogram.event - INFO - Update id=762235596 is handled. Duration 1081 ms by bot id=7849840849
2025-06-13 19:44:52,981 - aiogram.event - INFO - Update id=762235597 is handled. Duration 448 ms by bot id=7849840849
2025-06-13 19:45:11,396 - aiogram.event - INFO - Update id=762235598 is handled. Duration 633 ms by bot id=7849840849
2025-06-13 19:45:20,703 - aiogram.event - INFO - Update id=762235599 is handled. Duration 1509 ms by bot id=7849840849
2025-06-13 19:45:25,351 - aiogram.event - INFO - Update id=762235600 is handled. Duration 363 ms by bot id=7849840849
2025-06-13 19:45:29,066 - aiogram.event - INFO - Update id=762235601 is handled. Duration 1304 ms by bot id=7849840849
2025-06-13 19:45:31,569 - aiogram.event - INFO - Update id=762235602 is handled. Duration 422 ms by bot id=7849840849
2025-06-13 19:45:33,215 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:45:33,640 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:45:34,197 - aiogram.event - INFO - Update id=762235603 is handled. Duration 1336 ms by bot id=7849840849
2025-06-13 19:45:36,916 - aiogram.event - INFO - Update id=762235604 is handled. Duration 1049 ms by bot id=7849840849
2025-06-13 19:47:46,951 - aiogram.event - INFO - Update id=762235605 is handled. Duration 428 ms by bot id=7849840849
2025-06-13 19:47:48,928 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:47:49,151 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:47:49,782 - aiogram.event - INFO - Update id=762235606 is handled. Duration 1106 ms by bot id=7849840849
2025-06-13 19:47:50,649 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 19:47:50,888 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 19:47:50,889 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 19:47:50,889 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:47:51,111 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 1}]}
2025-06-13 19:47:51,112 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:47:51,112 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 19:47:51,113 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 1}]
2025-06-13 19:47:51,113 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 1}
2025-06-13 19:47:51,331 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T19:53:56.006913'}
2025-06-13 19:47:51,553 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 19:47:51,554 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 19:47:52,038 - database.mongodb - INFO - Update result: success=True, modified_count=1
2025-06-13 19:47:52,039 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 19:47:52,039 - handlers.user_handlers - INFO - Updating user data
2025-06-13 19:47:52,427 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 19:47:52,427 - aiogram.event - INFO - Update id=762235607 is handled. Duration 1778 ms by bot id=7849840849
2025-06-13 19:47:55,152 - aiogram.event - INFO - Update id=762235608 is handled. Duration 649 ms by bot id=7849840849
2025-06-13 19:48:14,190 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:48:14,420 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 19:48:14,421 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:48:14,870 - aiogram.event - INFO - Update id=762235609 is handled. Duration 1118 ms by bot id=7849840849
2025-06-13 19:48:22,110 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:48:22,340 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 19:48:22,341 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:48:22,668 - aiogram.event - INFO - Update id=762235610 is handled. Duration 1026 ms by bot id=7849840849
2025-06-13 19:54:35,569 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 19:54:35,824 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:54:35,827 - root - INFO - Bot stopped
2025-06-13 19:54:41,255 - __main__ - INFO - Starting bot...
2025-06-13 19:54:41,256 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 19:54:41,257 - aiogram.dispatcher - INFO - Start polling
2025-06-13 19:54:43,871 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:54:44,554 - aiogram.event - INFO - Update id=762235611 is handled. Duration 498 ms by bot id=7849840849
2025-06-13 19:54:47,970 - aiogram.event - INFO - Update id=762235612 is handled. Duration 229 ms by bot id=7849840849
2025-06-13 19:55:20,196 - handlers.admin_handlers - INFO - Successful admin login for user 7737565280
2025-06-13 19:55:20,385 - aiogram.event - INFO - Update id=762235613 is handled. Duration 192 ms by bot id=7849840849
2025-06-13 19:55:22,285 - aiogram.event - INFO - Update id=762235614 is handled. Duration 200 ms by bot id=7849840849
2025-06-13 19:55:23,672 - aiogram.event - INFO - Update id=762235615 is not handled. Duration 6 ms by bot id=7849840849
2025-06-13 19:55:23,672 - aiogram.event - ERROR - Cause exception while process update id=762235615 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\database\mongodb.py", line 235, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-06-13 19:55:33,963 - aiogram.event - INFO - Update id=762235616 is not handled. Duration 6 ms by bot id=7849840849
2025-06-13 19:55:33,964 - aiogram.event - ERROR - Cause exception while process update id=762235616 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\database\mongodb.py", line 235, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-06-13 19:55:34,122 - aiogram.event - INFO - Update id=762235617 is not handled. Duration 7 ms by bot id=7849840849
2025-06-13 19:55:34,124 - aiogram.event - ERROR - Cause exception while process update id=762235617 by bot id=7849840849
AttributeError: 'NoneType' object has no attribute 'products'
Traceback (most recent call last):
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 72, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\handlers\admin_handlers.py", line 247, in edit_products_list
    products = await db.get_all_products()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\r-keeper\Desktop\Shop\database\mongodb.py", line 235, in get_all_products
    cursor = self.db.products.find()
             ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'products'
2025-06-13 19:55:41,268 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 19:56:14,106 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 19:56:14,369 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:56:14,372 - root - INFO - Bot stopped
2025-06-13 19:57:15,476 - __main__ - INFO - Starting bot...
2025-06-13 19:57:15,478 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 19:57:15,479 - aiogram.dispatcher - INFO - Start polling
2025-06-13 19:57:15,921 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 19:57:20,558 - handlers.admin_handlers - WARNING - Admin access denied for user 7737565280
2025-06-13 19:57:21,018 - aiogram.event - INFO - Update id=762235618 is handled. Duration 466 ms by bot id=7849840849
2025-06-13 19:57:28,850 - aiogram.event - INFO - Update id=762235619 is handled. Duration 167 ms by bot id=7849840849
2025-06-13 19:57:34,909 - handlers.admin_handlers - INFO - Successful admin login for user 7737565280
2025-06-13 19:57:35,084 - aiogram.event - INFO - Update id=762235620 is handled. Duration 177 ms by bot id=7849840849
2025-06-13 19:57:42,639 - aiogram.event - INFO - Update id=762235621 is handled. Duration 189 ms by bot id=7849840849
2025-06-13 19:57:45,171 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 19:57:48,714 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 19:57:48,951 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 19:57:49,537 - aiogram.event - INFO - Update id=762235622 is handled. Duration 4372 ms by bot id=7849840849
2025-06-13 19:57:51,229 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:57:51,453 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 19:57:51,454 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:57:51,904 - aiogram.event - INFO - Update id=762235623 is handled. Duration 681 ms by bot id=7849840849
2025-06-13 19:57:56,959 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:57:57,200 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 19:57:57,201 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:57:57,555 - aiogram.event - INFO - Update id=762235624 is handled. Duration 603 ms by bot id=7849840849
2025-06-13 19:57:59,952 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:58:00,173 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 19:58:00,174 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:58:00,495 - aiogram.event - INFO - Update id=762235625 is handled. Duration 551 ms by bot id=7849840849
2025-06-13 19:58:04,368 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:58:04,601 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 0}]}
2025-06-13 19:58:04,602 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:58:05,018 - aiogram.event - INFO - Update id=762235626 is handled. Duration 655 ms by bot id=7849840849
2025-06-13 19:58:15,457 - aiogram.event - INFO - Update id=762235627 is handled. Duration 400 ms by bot id=7849840849
2025-06-13 19:58:15,930 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=1
2025-06-13 19:58:16,385 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=9
2025-06-13 19:58:17,942 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:58:18,153 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:58:18,524 - aiogram.event - INFO - Update id=762235628 is handled. Duration 1918 ms by bot id=7849840849
2025-06-13 19:58:20,671 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 19:58:20,871 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 19:58:20,872 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 19:58:20,872 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:58:21,093 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 9}]}
2025-06-13 19:58:21,094 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:58:21,095 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 19:58:21,095 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 9}]
2025-06-13 19:58:21,096 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 9}
2025-06-13 19:58:21,321 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': None}
2025-06-13 19:58:21,541 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 19:58:21,542 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 19:58:21,954 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=8
2025-06-13 19:58:21,955 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 19:58:21,955 - handlers.user_handlers - INFO - Updating user data
2025-06-13 19:58:22,333 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 19:58:22,334 - aiogram.event - INFO - Update id=762235629 is handled. Duration 1664 ms by bot id=7849840849
2025-06-13 19:58:25,023 - aiogram.event - INFO - Update id=762235630 is handled. Duration 609 ms by bot id=7849840849
2025-06-13 19:58:29,027 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 19:58:29,280 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 8}]}
2025-06-13 19:58:29,281 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 19:58:29,646 - aiogram.event - INFO - Update id=762235631 is handled. Duration 1104 ms by bot id=7849840849
2025-06-13 19:58:39,637 - aiogram.event - INFO - Update id=762235632 is handled. Duration 380 ms by bot id=7849840849
2025-06-13 19:58:49,497 - aiogram.event - INFO - Update id=762235633 is handled. Duration 630 ms by bot id=7849840849
2025-06-13 19:58:54,173 - aiogram.event - INFO - Update id=762235634 is handled. Duration 395 ms by bot id=7849840849
2025-06-13 19:59:01,222 - aiogram.event - INFO - Update id=762235635 is handled. Duration 1366 ms by bot id=7849840849
2025-06-13 19:59:07,155 - aiogram.event - INFO - Update id=762235636 is handled. Duration 499 ms by bot id=7849840849
2025-06-13 19:59:18,181 - aiogram.event - INFO - Update id=762235637 is handled. Duration 1003 ms by bot id=7849840849
2025-06-13 19:59:23,127 - aiogram.event - INFO - Update id=762235638 is handled. Duration 393 ms by bot id=7849840849
2025-06-13 19:59:24,643 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 19:59:24,843 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 19:59:25,174 - aiogram.event - INFO - Update id=762235639 is handled. Duration 737 ms by bot id=7849840849
2025-06-13 22:43:15,836 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 22:43:16,101 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 22:43:16,108 - root - INFO - Bot stopped
2025-06-13 22:43:22,334 - __main__ - INFO - Starting bot...
2025-06-13 22:43:22,335 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 22:43:22,336 - aiogram.dispatcher - INFO - Start polling
2025-06-13 22:43:22,853 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 22:44:22,340 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 22:44:51,403 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 22:44:57,512 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 22:44:57,802 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 22:44:58,638 - aiogram.event - INFO - Update id=762235640 is handled. Duration 7235 ms by bot id=7849840849
2025-06-13 22:45:00,387 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 22:45:00,617 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 22:45:00,979 - aiogram.event - INFO - Update id=762235641 is handled. Duration 819 ms by bot id=7849840849
2025-06-13 22:45:23,819 - aiogram.event - INFO - Update id=762235642 is handled. Duration 684 ms by bot id=7849840849
2025-06-13 22:45:27,304 - aiogram.event - INFO - Update id=762235643 is handled. Duration 417 ms by bot id=7849840849
2025-06-13 22:45:30,259 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 22:45:30,471 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 22:45:30,905 - aiogram.event - INFO - Update id=762235644 is handled. Duration 859 ms by bot id=7849840849
2025-06-13 22:45:35,677 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 22:45:35,898 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 22:45:35,899 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 22:45:35,900 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 22:45:36,106 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 8}]}
2025-06-13 22:45:36,108 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 22:45:36,110 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 22:45:36,111 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 8}]
2025-06-13 22:45:36,112 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 8}
2025-06-13 22:45:36,320 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T20:08:21.955832'}
2025-06-13 22:45:36,536 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 22:45:36,537 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 22:45:36,976 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=7
2025-06-13 22:45:36,977 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 22:45:36,978 - handlers.user_handlers - INFO - Updating user data
2025-06-13 22:45:37,350 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 22:45:37,351 - aiogram.event - INFO - Update id=762235645 is handled. Duration 1676 ms by bot id=7849840849
2025-06-13 22:45:40,942 - aiogram.event - INFO - Update id=762235646 is handled. Duration 386 ms by bot id=7849840849
2025-06-13 22:45:42,216 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 22:45:42,430 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 22:45:42,816 - aiogram.event - INFO - Update id=762235647 is handled. Duration 825 ms by bot id=7849840849
2025-06-13 22:45:45,491 - aiogram.event - INFO - Update id=762235648 is handled. Duration 638 ms by bot id=7849840849
2025-06-13 22:45:47,632 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 22:45:47,865 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 7}]}
2025-06-13 22:45:47,868 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 22:45:48,204 - aiogram.event - INFO - Update id=762235649 is handled. Duration 997 ms by bot id=7849840849
2025-06-13 22:45:55,753 - aiogram.event - INFO - Update id=762235650 is handled. Duration 368 ms by bot id=7849840849
2025-06-13 22:46:08,320 - aiogram.event - INFO - Update id=762235651 is handled. Duration 407 ms by bot id=7849840849
2025-06-13 22:46:20,730 - aiogram.event - INFO - Update id=762235652 is handled. Duration 397 ms by bot id=7849840849
2025-06-13 22:46:23,882 - aiogram.event - INFO - Update id=762235653 is handled. Duration 630 ms by bot id=7849840849
2025-06-13 22:46:33,370 - aiogram.event - INFO - Update id=762235654 is handled. Duration 1487 ms by bot id=7849840849
2025-06-13 22:46:41,403 - aiogram.event - INFO - Update id=762235655 is handled. Duration 420 ms by bot id=7849840849
2025-06-13 22:46:44,944 - aiogram.event - INFO - Update id=762235656 is handled. Duration 449 ms by bot id=7849840849
2025-06-13 22:46:46,304 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 22:46:46,509 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 22:46:46,882 - aiogram.event - INFO - Update id=762235657 is handled. Duration 789 ms by bot id=7849840849
2025-06-13 22:48:15,093 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 22:48:15,353 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 22:48:15,359 - root - INFO - Bot stopped
2025-06-13 22:48:21,235 - __main__ - INFO - Starting bot...
2025-06-13 22:48:21,236 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 22:48:21,237 - aiogram.dispatcher - INFO - Start polling
2025-06-13 22:48:21,711 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 22:48:21,869 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 22:48:25,666 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 22:48:25,909 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 22:48:26,642 - aiogram.event - INFO - Update id=762235658 is handled. Duration 4773 ms by bot id=7849840849
2025-06-13 22:48:28,643 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 22:48:28,883 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 22:48:29,222 - aiogram.event - INFO - Update id=762235659 is handled. Duration 828 ms by bot id=7849840849
2025-06-13 22:48:30,322 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 22:48:30,568 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 22:48:30,568 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 22:48:30,569 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 22:48:30,811 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 7}]}
2025-06-13 22:48:30,814 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 22:48:30,816 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 22:48:30,817 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 7}]
2025-06-13 22:48:30,818 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 7}
2025-06-13 22:48:31,056 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T22:55:36.978842'}
2025-06-13 22:48:31,296 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 22:48:31,297 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 22:48:31,540 - database.mongodb - INFO - Current quantity: 7, Change: -1, New quantity will be: 6
2025-06-13 22:48:31,784 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=6
2025-06-13 22:48:32,028 - database.mongodb - INFO - Verified updated quantity: 6
2025-06-13 22:48:32,029 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 22:48:32,031 - handlers.user_handlers - INFO - Updating user data
2025-06-13 22:48:32,528 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 22:48:32,529 - aiogram.event - INFO - Update id=762235660 is handled. Duration 2209 ms by bot id=7849840849
2025-06-13 22:48:38,023 - aiogram.event - INFO - Update id=762235661 is handled. Duration 650 ms by bot id=7849840849
2025-06-13 22:48:41,253 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 22:48:41,497 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 6}]}
2025-06-13 22:48:41,500 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 22:48:41,840 - aiogram.event - INFO - Update id=762235662 is handled. Duration 1069 ms by bot id=7849840849
2025-06-13 22:48:48,664 - aiogram.event - INFO - Update id=762235663 is handled. Duration 409 ms by bot id=7849840849
2025-06-13 22:48:51,906 - aiogram.event - INFO - Update id=762235664 is handled. Duration 683 ms by bot id=7849840849
2025-06-13 22:49:24,786 - aiogram.event - INFO - Update id=762235665 is handled. Duration 1578 ms by bot id=7849840849
2025-06-13 22:49:53,972 - aiogram.event - INFO - Update id=762235666 is handled. Duration 386 ms by bot id=7849840849
2025-06-13 22:50:00,644 - aiogram.event - INFO - Update id=762235667 is handled. Duration 1120 ms by bot id=7849840849
2025-06-13 22:50:05,881 - aiogram.event - INFO - Update id=762235668 is handled. Duration 418 ms by bot id=7849840849
2025-06-13 22:50:07,205 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 22:50:07,443 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 22:50:07,807 - aiogram.event - INFO - Update id=762235669 is handled. Duration 850 ms by bot id=7849840849
2025-06-13 22:55:31,505 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 22:55:31,776 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 22:55:31,781 - root - INFO - Bot stopped
2025-06-13 22:55:38,582 - __main__ - INFO - Starting bot...
2025-06-13 22:55:38,584 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 22:55:38,584 - aiogram.dispatcher - INFO - Start polling
2025-06-13 22:55:39,058 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 22:55:42,466 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 22:55:42,466 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 22:55:46,056 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 22:55:46,283 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 22:55:46,521 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 22:55:46,523 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 22:55:46,524 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 22:55:46,752 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 6}]}
2025-06-13 22:55:46,755 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 22:55:46,757 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 22:55:46,758 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 6}]
2025-06-13 22:55:46,759 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 6}
2025-06-13 22:55:46,993 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T22:58:32.031047'}
2025-06-13 22:55:47,232 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 22:55:47,233 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 22:55:47,464 - database.mongodb - INFO - Current quantity: 6, Change: -1, New quantity will be: 5
2025-06-13 22:55:47,701 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=5
2025-06-13 22:55:47,933 - database.mongodb - INFO - Verified updated quantity: 5
2025-06-13 22:55:47,935 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 22:55:47,936 - handlers.user_handlers - INFO - Updating user data
2025-06-13 22:55:48,637 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 22:55:48,639 - aiogram.event - INFO - Update id=762235670 is handled. Duration 6174 ms by bot id=7849840849
2025-06-13 22:55:53,007 - aiogram.event - INFO - Update id=762235671 is handled. Duration 705 ms by bot id=7849840849
2025-06-13 22:55:56,096 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 22:55:56,326 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 5}]}
2025-06-13 22:55:56,328 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 22:55:56,698 - aiogram.event - INFO - Update id=762235672 is handled. Duration 1062 ms by bot id=7849840849
2025-06-13 22:56:06,531 - aiogram.event - INFO - Update id=762235673 is handled. Duration 396 ms by bot id=7849840849
2025-06-13 22:59:26,926 - aiogram.event - INFO - Update id=762235674 is handled. Duration 636 ms by bot id=7849840849
2025-06-13 23:06:43,775 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=1
2025-06-13 23:06:44,005 - database.mongodb - INFO - Current quantity: 5, Change: 1, New quantity will be: 6
2025-06-13 23:06:44,245 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=6
2025-06-13 23:06:44,475 - database.mongodb - INFO - Verified updated quantity: 6
2025-06-13 23:11:18,480 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 23:11:18,752 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 23:11:18,757 - root - INFO - Bot stopped
2025-06-13 23:11:46,393 - __main__ - INFO - Starting bot...
2025-06-13 23:11:46,395 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 23:11:46,396 - aiogram.dispatcher - INFO - Start polling
2025-06-13 23:11:46,868 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 23:11:47,042 - aiogram.event - INFO - Update id=762235675 is not handled. Duration 12 ms by bot id=7849840849
2025-06-13 23:11:52,617 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 23:11:56,173 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 23:11:56,402 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 23:11:57,373 - aiogram.event - INFO - Update id=762235676 is handled. Duration 4759 ms by bot id=7849840849
2025-06-13 23:12:03,335 - aiogram.event - INFO - Update id=762235677 is handled. Duration 408 ms by bot id=7849840849
2025-06-13 23:12:04,595 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:12:04,823 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:12:05,289 - aiogram.event - INFO - Update id=762235678 is handled. Duration 919 ms by bot id=7849840849
2025-06-13 23:12:06,520 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 23:12:06,752 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 23:12:06,753 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 23:12:06,755 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:12:06,984 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 6}]}
2025-06-13 23:12:06,987 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:12:06,988 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 23:12:06,989 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 6}]
2025-06-13 23:12:06,990 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 6}
2025-06-13 23:12:07,223 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': None}
2025-06-13 23:12:07,450 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 23:12:07,451 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 23:12:07,679 - database.mongodb - INFO - Current quantity: 6, Change: -1, New quantity will be: 5
2025-06-13 23:12:07,909 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=5
2025-06-13 23:12:08,136 - database.mongodb - INFO - Verified updated quantity: 5
2025-06-13 23:12:08,137 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 23:12:08,137 - handlers.user_handlers - INFO - Updating user data
2025-06-13 23:12:08,588 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 23:12:08,590 - aiogram.event - INFO - Update id=762235679 is handled. Duration 2071 ms by bot id=7849840849
2025-06-13 23:12:12,679 - aiogram.event - INFO - Update id=762235680 is handled. Duration 633 ms by bot id=7849840849
2025-06-13 23:12:14,691 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:12:14,924 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 5}]}
2025-06-13 23:12:14,927 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:12:15,368 - aiogram.event - INFO - Update id=762235681 is handled. Duration 1144 ms by bot id=7849840849
2025-06-13 23:12:24,131 - aiogram.event - INFO - Update id=762235682 is handled. Duration 411 ms by bot id=7849840849
2025-06-13 23:12:29,268 - aiogram.event - INFO - Update id=762235683 is handled. Duration 625 ms by bot id=7849840849
2025-06-13 23:12:33,563 - aiogram.event - INFO - Update id=762235684 is handled. Duration 1608 ms by bot id=7849840849
2025-06-13 23:12:43,889 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:12:44,122 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 5}]}
2025-06-13 23:12:44,125 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:12:44,356 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:12:44,583 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 4}]}
2025-06-13 23:12:44,586 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:12:45,442 - aiogram.event - INFO - Update id=762235685 is handled. Duration 1792 ms by bot id=7849840849
2025-06-13 23:12:59,245 - aiogram.event - INFO - Update id=762235686 is handled. Duration 421 ms by bot id=7849840849
2025-06-13 23:13:00,522 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:13:00,753 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:13:01,185 - aiogram.event - INFO - Update id=762235687 is handled. Duration 900 ms by bot id=7849840849
2025-06-13 23:13:02,103 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 23:13:02,331 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 23:13:02,333 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 23:13:02,335 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:13:02,564 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 4}]}
2025-06-13 23:13:02,565 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:13:02,566 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 23:13:02,567 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 4}]
2025-06-13 23:13:02,568 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 4}
2025-06-13 23:13:02,801 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T23:22:08.137955'}
2025-06-13 23:13:03,031 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 23:13:03,033 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 23:13:03,264 - database.mongodb - INFO - Current quantity: 4, Change: -1, New quantity will be: 3
2025-06-13 23:13:03,501 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=3
2025-06-13 23:13:03,731 - database.mongodb - INFO - Verified updated quantity: 3
2025-06-13 23:13:03,732 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 23:13:03,734 - handlers.user_handlers - INFO - Updating user data
2025-06-13 23:13:04,162 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 23:13:04,163 - aiogram.event - INFO - Update id=762235688 is handled. Duration 2061 ms by bot id=7849840849
2025-06-13 23:13:08,905 - aiogram.event - INFO - Update id=762235689 is handled. Duration 437 ms by bot id=7849840849
2025-06-13 23:13:10,412 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:13:10,642 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:13:10,962 - aiogram.event - INFO - Update id=762235690 is handled. Duration 793 ms by bot id=7849840849
2025-06-13 23:13:13,393 - aiogram.event - INFO - Update id=762235691 is handled. Duration 726 ms by bot id=7849840849
2025-06-13 23:13:16,232 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:13:16,459 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 3}]}
2025-06-13 23:13:16,460 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:13:16,793 - aiogram.event - INFO - Update id=762235692 is handled. Duration 1031 ms by bot id=7849840849
2025-06-13 23:13:24,741 - aiogram.event - INFO - Update id=762235693 is handled. Duration 695 ms by bot id=7849840849
2025-06-13 23:13:27,963 - aiogram.event - INFO - Update id=762235694 is handled. Duration 929 ms by bot id=7849840849
2025-06-13 23:13:35,204 - aiogram.event - INFO - Update id=762235695 is handled. Duration 1663 ms by bot id=7849840849
2025-06-13 23:13:42,151 - aiogram.event - INFO - Update id=762235696 is handled. Duration 503 ms by bot id=7849840849
2025-06-13 23:14:27,856 - aiogram.event - INFO - Update id=762235697 is handled. Duration 433 ms by bot id=7849840849
2025-06-13 23:14:36,385 - aiogram.event - INFO - Update id=762235698 is handled. Duration 961 ms by bot id=7849840849
2025-06-13 23:14:39,587 - aiogram.event - INFO - Update id=762235699 is handled. Duration 392 ms by bot id=7849840849
2025-06-13 23:14:41,149 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:14:41,380 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:14:41,729 - aiogram.event - INFO - Update id=762235700 is handled. Duration 817 ms by bot id=7849840849
2025-06-13 23:16:06,581 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 23:16:06,843 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 23:16:06,849 - root - INFO - Bot stopped
2025-06-13 23:16:12,621 - __main__ - INFO - Starting bot...
2025-06-13 23:16:12,623 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 23:16:12,624 - aiogram.dispatcher - INFO - Start polling
2025-06-13 23:16:13,067 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 23:16:30,628 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 23:16:30,630 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 23:16:34,050 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 23:16:34,254 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 23:16:34,456 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 23:16:34,458 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 23:16:34,459 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:16:34,664 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 3}]}
2025-06-13 23:16:34,667 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:16:34,668 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 23:16:34,669 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 3}]
2025-06-13 23:16:34,670 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 3}
2025-06-13 23:16:34,875 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T23:23:03.734811'}
2025-06-13 23:16:35,079 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 23:16:35,080 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 23:16:35,284 - database.mongodb - INFO - Current quantity: 3, Change: -1, New quantity will be: 2
2025-06-13 23:16:35,524 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=2
2025-06-13 23:16:35,727 - database.mongodb - INFO - Verified updated quantity: 2
2025-06-13 23:16:35,728 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 23:16:35,730 - handlers.user_handlers - INFO - Updating user data
2025-06-13 23:16:36,375 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 23:16:36,376 - aiogram.event - INFO - Update id=762235701 is handled. Duration 5750 ms by bot id=7849840849
2025-06-13 23:16:39,285 - aiogram.event - INFO - Update id=762235702 is handled. Duration 579 ms by bot id=7849840849
2025-06-13 23:16:41,980 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:16:42,181 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 2}]}
2025-06-13 23:16:42,184 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:16:42,537 - aiogram.event - INFO - Update id=762235703 is handled. Duration 975 ms by bot id=7849840849
2025-06-13 23:16:49,325 - aiogram.event - INFO - Update id=762235704 is handled. Duration 360 ms by bot id=7849840849
2025-06-13 23:16:52,649 - aiogram.event - INFO - Update id=762235705 is handled. Duration 745 ms by bot id=7849840849
2025-06-13 23:17:00,598 - aiogram.event - INFO - Update id=762235706 is handled. Duration 1433 ms by bot id=7849840849
2025-06-13 23:17:03,138 - aiogram.event - INFO - Update id=762235707 is handled. Duration 555 ms by bot id=7849840849
2025-06-13 23:17:07,075 - aiogram.event - INFO - Update id=762235708 is handled. Duration 937 ms by bot id=7849840849
2025-06-13 23:17:10,319 - aiogram.event - INFO - Update id=762235709 is handled. Duration 420 ms by bot id=7849840849
2025-06-13 23:17:11,462 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:17:11,670 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:17:12,058 - aiogram.event - INFO - Update id=762235710 is handled. Duration 799 ms by bot id=7849840849
2025-06-13 23:17:27,787 - aiogram.event - INFO - Update id=762235711 is handled. Duration 352 ms by bot id=7849840849
2025-06-13 23:17:29,035 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:17:29,238 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:17:29,750 - aiogram.event - INFO - Update id=762235712 is handled. Duration 916 ms by bot id=7849840849
2025-06-13 23:18:41,865 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 23:18:42,140 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 23:18:42,146 - root - INFO - Bot stopped
2025-06-13 23:20:35,468 - __main__ - INFO - Starting bot...
2025-06-13 23:20:35,469 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 23:20:35,470 - aiogram.dispatcher - INFO - Start polling
2025-06-13 23:20:36,047 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 23:20:36,235 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 23:20:39,993 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 23:20:40,195 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 23:20:41,006 - aiogram.event - INFO - Update id=762235713 is handled. Duration 4771 ms by bot id=7849840849
2025-06-13 23:20:50,149 - aiogram.event - INFO - Update id=762235714 is handled. Duration 397 ms by bot id=7849840849
2025-06-13 23:20:51,937 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:20:52,145 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:20:52,484 - aiogram.event - INFO - Update id=762235715 is handled. Duration 759 ms by bot id=7849840849
2025-06-13 23:20:54,494 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 23:20:54,689 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 23:20:54,691 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 23:20:54,692 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:20:54,891 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 2}]}
2025-06-13 23:20:54,894 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:20:54,895 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 23:20:54,896 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 2}]
2025-06-13 23:20:54,897 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 2}
2025-06-13 23:20:55,102 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T23:26:35.730256'}
2025-06-13 23:20:55,305 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Pygd
2025-06-13 23:20:55,306 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=682d809f97df28eab031b1d9, flavor=Pygd, change=-1
2025-06-13 23:20:55,509 - database.mongodb - INFO - Current quantity: 2, Change: -1, New quantity will be: 1
2025-06-13 23:20:55,720 - database.mongodb - INFO - Successfully updated flavor quantity: Pygd, new quantity=1
2025-06-13 23:20:55,924 - database.mongodb - INFO - Verified updated quantity: 1
2025-06-13 23:20:55,926 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}
2025-06-13 23:20:55,928 - handlers.user_handlers - INFO - Updating user data
2025-06-13 23:20:56,307 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 23:20:56,307 - aiogram.event - INFO - Update id=762235716 is handled. Duration 1816 ms by bot id=7849840849
2025-06-13 23:21:05,078 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_682d809f97df28eab031b1d9_1
2025-06-13 23:21:05,290 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '682d809f97df28eab031b1d9', '1']
2025-06-13 23:21:05,292 - handlers.user_handlers - INFO - Product ID: 682d809f97df28eab031b1d9, Flavor Index: 0
2025-06-13 23:21:05,293 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:21:05,499 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 1}]}
2025-06-13 23:21:05,502 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:21:05,503 - handlers.user_handlers - INFO - Found product: Cam
2025-06-13 23:21:05,504 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Pygd', 'quantity': 1}]
2025-06-13 23:21:05,506 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Pygd', 'quantity': 1}
2025-06-13 23:21:05,716 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [{'product_id': '682d809f97df28eab031b1d9', 'name': 'Cam', 'price': 667, 'flavor': 'Pygd', 'quantity': 1}], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T23:30:55.927892'}
2025-06-13 23:21:05,936 - handlers.user_handlers - INFO - Flavor already in cart
2025-06-13 23:21:06,087 - aiogram.event - INFO - Update id=762235717 is handled. Duration 1011 ms by bot id=7849840849
2025-06-13 23:21:07,682 - aiogram.event - INFO - Update id=762235718 is handled. Duration 600 ms by bot id=7849840849
2025-06-13 23:21:10,268 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 682d809f97df28eab031b1d9
2025-06-13 23:21:10,469 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('682d809f97df28eab031b1d9'), 'name': 'Cam', 'category': ' ', 'price': 667, 'description': 'Find', 'photo': 'AgACAgIAAxkBAAIIPmgtfLien9B-p2edq9coV74WsYhuAAKw7DEb2gxoSRxk2zzZQoFcAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Pygd', 'quantity': 1}]}
2025-06-13 23:21:10,472 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 682d809f97df28eab031b1d9
2025-06-13 23:21:10,797 - aiogram.event - INFO - Update id=762235719 is handled. Duration 941 ms by bot id=7849840849
2025-06-13 23:21:21,887 - aiogram.event - INFO - Update id=762235720 is handled. Duration 367 ms by bot id=7849840849
2025-06-13 23:21:24,576 - aiogram.event - INFO - Update id=762235721 is handled. Duration 597 ms by bot id=7849840849
2025-06-13 23:21:30,563 - aiogram.event - INFO - Update id=762235722 is handled. Duration 1348 ms by bot id=7849840849
2025-06-13 23:21:34,652 - aiogram.event - INFO - Update id=762235723 is handled. Duration 346 ms by bot id=7849840849
2025-06-13 23:21:38,119 - aiogram.event - INFO - Update id=762235724 is handled. Duration 1135 ms by bot id=7849840849
2025-06-13 23:21:41,190 - aiogram.event - INFO - Update id=762235725 is handled. Duration 383 ms by bot id=7849840849
2025-06-13 23:21:42,608 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:21:42,812 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:21:43,154 - aiogram.event - INFO - Update id=762235726 is handled. Duration 744 ms by bot id=7849840849
2025-06-13 23:27:26,416 - aiogram.event - INFO - Update id=762235727 is handled. Duration 373 ms by bot id=7849840849
2025-06-13 23:27:28,044 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:27:28,244 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:27:28,582 - aiogram.event - INFO - Update id=762235728 is handled. Duration 739 ms by bot id=7849840849
2025-06-13 23:27:40,146 - aiogram.event - INFO - Update id=762235729 is handled. Duration 219 ms by bot id=7849840849
2025-06-13 23:27:42,111 - aiogram.event - INFO - Update id=762235730 is handled. Duration 177 ms by bot id=7849840849
2025-06-13 23:27:46,549 - handlers.admin_handlers - INFO - Successful admin login for user 7737565280
2025-06-13 23:27:46,882 - aiogram.event - INFO - Update id=762235731 is handled. Duration 339 ms by bot id=7849840849
2025-06-13 23:27:49,116 - aiogram.event - INFO - Update id=762235732 is handled. Duration 232 ms by bot id=7849840849
2025-06-13 23:27:51,620 - aiogram.event - INFO - Update id=762235733 is handled. Duration 570 ms by bot id=7849840849
2025-06-13 23:27:55,399 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:27:55,600 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}]}
2025-06-13 23:27:55,603 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:27:55,947 - aiogram.event - INFO - Update id=762235734 is handled. Duration 564 ms by bot id=7849840849
2025-06-13 23:27:58,581 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:27:58,782 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}]}
2025-06-13 23:27:58,785 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:27:59,138 - aiogram.event - INFO - Update id=762235735 is handled. Duration 578 ms by bot id=7849840849
2025-06-13 23:28:01,647 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:01,860 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}]}
2025-06-13 23:28:01,863 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:02,180 - aiogram.event - INFO - Update id=762235736 is handled. Duration 553 ms by bot id=7849840849
2025-06-13 23:28:04,780 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:04,981 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}]}
2025-06-13 23:28:04,982 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:05,365 - aiogram.event - INFO - Update id=762235737 is handled. Duration 601 ms by bot id=7849840849
2025-06-13 23:28:06,845 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:07,048 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}]}
2025-06-13 23:28:07,051 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:07,508 - aiogram.event - INFO - Update id=762235738 is handled. Duration 688 ms by bot id=7849840849
2025-06-13 23:28:09,139 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:09,338 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}]}
2025-06-13 23:28:09,341 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:09,820 - aiogram.event - INFO - Update id=762235739 is handled. Duration 696 ms by bot id=7849840849
2025-06-13 23:28:11,555 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:11,761 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}]}
2025-06-13 23:28:11,764 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:12,088 - aiogram.event - INFO - Update id=762235740 is handled. Duration 557 ms by bot id=7849840849
2025-06-13 23:28:13,857 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:14,058 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}]}
2025-06-13 23:28:14,061 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:14,517 - aiogram.event - INFO - Update id=762235741 is handled. Duration 666 ms by bot id=7849840849
2025-06-13 23:28:15,894 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:16,100 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}]}
2025-06-13 23:28:16,102 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:16,407 - aiogram.event - INFO - Update id=762235742 is handled. Duration 539 ms by bot id=7849840849
2025-06-13 23:28:18,189 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:18,389 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}]}
2025-06-13 23:28:18,390 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:18,808 - aiogram.event - INFO - Update id=762235743 is handled. Duration 626 ms by bot id=7849840849
2025-06-13 23:28:20,126 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:20,332 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}]}
2025-06-13 23:28:20,336 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:20,862 - aiogram.event - INFO - Update id=762235744 is handled. Duration 763 ms by bot id=7849840849
2025-06-13 23:28:22,636 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:22,862 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}]}
2025-06-13 23:28:22,865 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:23,364 - aiogram.event - INFO - Update id=762235745 is handled. Duration 745 ms by bot id=7849840849
2025-06-13 23:28:25,916 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:26,120 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}]}
2025-06-13 23:28:26,122 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:26,441 - aiogram.event - INFO - Update id=762235746 is handled. Duration 550 ms by bot id=7849840849
2025-06-13 23:28:27,618 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:27,820 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}]}
2025-06-13 23:28:27,823 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:28,258 - aiogram.event - INFO - Update id=762235747 is handled. Duration 649 ms by bot id=7849840849
2025-06-13 23:28:30,675 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:30,877 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}]}
2025-06-13 23:28:30,880 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:31,246 - aiogram.event - INFO - Update id=762235748 is handled. Duration 594 ms by bot id=7849840849
2025-06-13 23:28:32,179 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:32,379 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}]}
2025-06-13 23:28:32,382 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:32,762 - aiogram.event - INFO - Update id=762235749 is handled. Duration 599 ms by bot id=7849840849
2025-06-13 23:28:39,412 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:39,615 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-13 23:28:39,619 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:40,040 - aiogram.event - INFO - Update id=762235750 is handled. Duration 651 ms by bot id=7849840849
2025-06-13 23:28:44,976 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:45,176 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 0}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-13 23:28:45,180 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:45,595 - aiogram.event - INFO - Update id=762235751 is handled. Duration 635 ms by bot id=7849840849
2025-06-13 23:28:51,158 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:51,359 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-13 23:28:51,361 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:51,708 - aiogram.event - INFO - Update id=762235752 is handled. Duration 571 ms by bot id=7849840849
2025-06-13 23:28:54,142 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:28:54,354 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 0}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-13 23:28:54,358 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:28:54,910 - aiogram.event - INFO - Update id=762235753 is handled. Duration 784 ms by bot id=7849840849
2025-06-13 23:28:58,700 - aiogram.dispatcher - INFO - Polling stopped
2025-06-13 23:28:58,930 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2775)
2025-06-13 23:28:58,933 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7849840849)
2025-06-13 23:28:58,967 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 23:28:58,973 - root - INFO - Bot stopped
2025-06-13 23:29:06,169 - __main__ - INFO - Starting bot...
2025-06-13 23:29:06,170 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-13 23:29:06,171 - aiogram.dispatcher - INFO - Start polling
2025-06-13 23:29:06,613 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-13 23:29:06,763 - handlers.admin_handlers - WARNING - Admin access denied for user 7737565280
2025-06-13 23:29:07,202 - aiogram.event - INFO - Update id=762235754 is handled. Duration 448 ms by bot id=7849840849
2025-06-13 23:29:07,260 - aiogram.event - INFO - Update id=762235755 is not handled. Duration 13 ms by bot id=7849840849
2025-06-13 23:29:08,362 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-13 23:29:11,920 - database.mongodb - INFO - Database indexes created successfully
2025-06-13 23:29:12,150 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-13 23:29:12,567 - aiogram.event - INFO - Update id=762235756 is handled. Duration 4206 ms by bot id=7849840849
2025-06-13 23:29:12,912 - handlers.admin_handlers - WARNING - Admin access denied for user 7737565280
2025-06-13 23:29:13,056 - aiogram.event - INFO - Update id=762235757 is handled. Duration 161 ms by bot id=7849840849
2025-06-13 23:29:14,060 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:29:14,291 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:29:14,671 - aiogram.event - INFO - Update id=762235758 is handled. Duration 847 ms by bot id=7849840849
2025-06-13 23:29:19,134 - handlers.admin_handlers - WARNING - Admin access denied for user 7737565280
2025-06-13 23:29:19,337 - aiogram.event - INFO - Update id=762235759 is handled. Duration 223 ms by bot id=7849840849
2025-06-13 23:29:21,717 - aiogram.event - INFO - Update id=762235760 is handled. Duration 403 ms by bot id=7849840849
2025-06-13 23:29:23,539 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-13 23:29:23,771 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-13 23:29:24,135 - aiogram.event - INFO - Update id=762235761 is handled. Duration 831 ms by bot id=7849840849
2025-06-13 23:29:25,788 - aiogram.event - INFO - Update id=762235762 is handled. Duration 425 ms by bot id=7849840849
2025-06-13 23:29:27,210 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-06-13 23:29:27,440 - database.mongodb - INFO - [DEBUG] Found 0 products in category 
2025-06-13 23:29:27,611 - aiogram.event - INFO - Update id=762235763 is handled. Duration 637 ms by bot id=7849840849
2025-06-13 23:29:29,123 - aiogram.event - INFO - Update id=762235764 is handled. Duration 518 ms by bot id=7849840849
2025-06-13 23:29:30,909 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-06-13 23:29:31,140 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-06-13 23:29:31,470 - aiogram.event - INFO - Update id=762235765 is handled. Duration 785 ms by bot id=7849840849
2025-06-13 23:29:36,845 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684c113e578dd097dbc0e00c_4
2025-06-13 23:29:37,072 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684c113e578dd097dbc0e00c', '4']
2025-06-13 23:29:37,074 - handlers.user_handlers - INFO - Product ID: 684c113e578dd097dbc0e00c, Flavor Index: 3
2025-06-13 23:29:37,077 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:29:37,306 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 8}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-13 23:29:37,311 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:29:37,312 - handlers.user_handlers - INFO - Found product: Fgg
2025-06-13 23:29:37,313 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 8}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]
2025-06-13 23:29:37,316 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Bbdhdh', 'quantity': 8}
2025-06-13 23:29:37,546 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T23:30:55.927892'}
2025-06-13 23:29:37,780 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Bbdhdh
2025-06-13 23:29:37,781 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684c113e578dd097dbc0e00c, flavor=Bbdhdh, change=-1
2025-06-13 23:29:38,010 - database.mongodb - INFO - Current quantity: 8, Change: -1, New quantity will be: 7
2025-06-13 23:29:38,239 - database.mongodb - INFO - Successfully updated flavor quantity: Bbdhdh, new quantity=7
2025-06-13 23:29:38,466 - database.mongodb - INFO - Verified updated quantity: 7
2025-06-13 23:29:38,467 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684c113e578dd097dbc0e00c', 'name': 'Fgg', 'price': 5000, 'flavor': 'Bbdhdh', 'quantity': 1}
2025-06-13 23:29:38,469 - handlers.user_handlers - INFO - Updating user data
2025-06-13 23:29:38,844 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-13 23:29:38,845 - aiogram.event - INFO - Update id=762235766 is handled. Duration 2003 ms by bot id=7849840849
2025-06-13 23:29:42,493 - aiogram.event - INFO - Update id=762235767 is handled. Duration 734 ms by bot id=7849840849
2025-06-13 23:30:02,340 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-13 23:30:02,570 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 7}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-13 23:30:02,574 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-13 23:30:03,114 - aiogram.event - INFO - Update id=762235768 is handled. Duration 1231 ms by bot id=7849840849
2025-06-13 23:30:14,430 - aiogram.event - INFO - Update id=762235769 is handled. Duration 460 ms by bot id=7849840849
2025-06-13 23:30:18,266 - aiogram.event - INFO - Update id=762235770 is handled. Duration 694 ms by bot id=7849840849
2025-06-13 23:30:24,135 - aiogram.event - INFO - Update id=762235771 is handled. Duration 1650 ms by bot id=7849840849
2025-06-13 23:30:34,082 - aiogram.event - INFO - Update id=762235772 is handled. Duration 320 ms by bot id=7849840849
2025-06-13 23:30:38,270 - aiogram.event - INFO - Update id=762235773 is handled. Duration 925 ms by bot id=7849840849
2025-06-13 23:30:42,490 - aiogram.event - INFO - Update id=762235774 is handled. Duration 538 ms by bot id=7849840849
2025-06-13 23:30:44,329 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-06-13 23:30:44,560 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-06-13 23:30:44,957 - aiogram.event - INFO - Update id=762235775 is handled. Duration 854 ms by bot id=7849840849
2025-06-13 23:35:32,331 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2025-06-13 23:35:32,897 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7849840849)
2025-06-13 23:35:44,720 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 7849840849)
2025-06-14 02:40:35,288 - database.mongodb - ERROR - Failed to get users with cart: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 684c6df482e842d0f3a65d69, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-ys1jhaq-shard-00-00.ozvfezb.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.32559019007261447>, <ServerDescription ('ac-ys1jhaq-shard-00-01.ozvfezb.mongodb.net', 27017) server_type: Unknown, rtt: None, error=NetworkTimeout('ac-ys1jhaq-shard-00-01.ozvfezb.mongodb.net:27017: timed out (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms)')>, <ServerDescription ('ac-ys1jhaq-shard-00-02.ozvfezb.mongodb.net', 27017) server_type: RSSecondary, rtt: 1.9411940574801199>]>
2025-06-14 02:44:42,319 - database.mongodb - ERROR - Failed to get users with cart: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 684c6df482e842d0f3a65d69, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-ys1jhaq-shard-00-00.ozvfezb.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.9632098422316002>, <ServerDescription ('ac-ys1jhaq-shard-00-01.ozvfezb.mongodb.net', 27017) server_type: Unknown, rtt: None, error=NetworkTimeout('ac-ys1jhaq-shard-00-01.ozvfezb.mongodb.net:27017: timed out (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms)')>, <ServerDescription ('ac-ys1jhaq-shard-00-02.ozvfezb.mongodb.net', 27017) server_type: Unknown, rtt: None, error=NetworkTimeout('ac-ys1jhaq-shard-00-02.ozvfezb.mongodb.net:27017: timed out (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms)')>]>
2025-06-14 11:30:17,924 - aiogram.dispatcher - INFO - Polling stopped
2025-06-14 11:30:18,181 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-14 11:30:18,183 - root - INFO - Bot stopped
2025-06-14 11:30:24,920 - __main__ - INFO - Starting bot...
2025-06-14 11:30:24,924 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-14 11:30:24,926 - aiogram.dispatcher - INFO - Start polling
2025-06-14 11:30:28,837 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-14 11:30:36,932 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-14 11:30:40,429 - database.mongodb - INFO - Database indexes created successfully
2025-06-14 11:30:40,639 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-14 11:30:41,290 - aiogram.event - INFO - Update id=762235776 is handled. Duration 4359 ms by bot id=7849840849
2025-06-14 11:30:43,375 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-14 11:30:43,586 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-14 11:30:44,278 - aiogram.event - INFO - Update id=762235777 is handled. Duration 1113 ms by bot id=7849840849
2025-06-14 11:31:00,885 - aiogram.event - INFO - Update id=762235778 is handled. Duration 1157 ms by bot id=7849840849
2025-06-14 11:31:03,866 - aiogram.event - INFO - Update id=762235779 is handled. Duration 429 ms by bot id=7849840849
2025-06-14 11:31:05,209 - database.mongodb - INFO - [DEBUG] Getting products for category:  
2025-06-14 11:31:05,419 - database.mongodb - INFO - [DEBUG] Found 1 products in category  
2025-06-14 11:31:05,725 - aiogram.event - INFO - Update id=762235780 is handled. Duration 738 ms by bot id=7849840849
2025-06-14 11:31:08,309 - aiogram.event - INFO - Update id=762235781 is handled. Duration 458 ms by bot id=7849840849
2025-06-14 11:31:10,255 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-06-14 11:31:10,475 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-06-14 11:31:11,736 - aiogram.event - INFO - Update id=762235782 is handled. Duration 1696 ms by bot id=7849840849
2025-06-14 11:31:16,211 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684c113e578dd097dbc0e00c_4
2025-06-14 11:31:16,434 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684c113e578dd097dbc0e00c', '4']
2025-06-14 11:31:16,435 - handlers.user_handlers - INFO - Product ID: 684c113e578dd097dbc0e00c, Flavor Index: 3
2025-06-14 11:31:16,435 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-14 11:31:16,647 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 7}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-14 11:31:16,661 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-14 11:31:16,661 - handlers.user_handlers - INFO - Found product: Fgg
2025-06-14 11:31:16,662 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 7}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]
2025-06-14 11:31:16,664 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Bbdhdh', 'quantity': 7}
2025-06-14 11:31:16,877 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-13T23:39:38.469331'}
2025-06-14 11:31:17,087 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Bbdhdh
2025-06-14 11:31:17,088 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684c113e578dd097dbc0e00c, flavor=Bbdhdh, change=-1
2025-06-14 11:31:17,297 - database.mongodb - INFO - Current quantity: 7, Change: -1, New quantity will be: 6
2025-06-14 11:31:17,515 - database.mongodb - INFO - Successfully updated flavor quantity: Bbdhdh, new quantity=6
2025-06-14 11:31:17,726 - database.mongodb - INFO - Verified updated quantity: 6
2025-06-14 11:31:17,727 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684c113e578dd097dbc0e00c', 'name': 'Fgg', 'price': 5000, 'flavor': 'Bbdhdh', 'quantity': 1}
2025-06-14 11:31:17,727 - handlers.user_handlers - INFO - Updating user data
2025-06-14 11:31:18,096 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-14 11:31:18,097 - aiogram.event - INFO - Update id=762235783 is handled. Duration 1886 ms by bot id=7849840849
2025-06-14 11:31:21,067 - aiogram.event - INFO - Update id=762235784 is handled. Duration 588 ms by bot id=7849840849
2025-06-14 11:31:27,609 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-14 11:31:27,819 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 6}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-14 11:31:27,820 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-14 11:31:28,106 - aiogram.event - INFO - Update id=762235785 is handled. Duration 927 ms by bot id=7849840849
2025-06-14 11:31:39,586 - aiogram.event - INFO - Update id=762235786 is handled. Duration 409 ms by bot id=7849840849
2025-06-14 11:31:47,604 - aiogram.event - INFO - Update id=762235787 is handled. Duration 577 ms by bot id=7849840849
2025-06-14 11:32:07,864 - aiogram.event - INFO - Update id=762235788 is handled. Duration 4027 ms by bot id=7849840849
2025-06-14 11:36:53,796 - aiogram.event - INFO - Update id=762235789 is handled. Duration 1658 ms by bot id=7849840849
2025-06-14 11:37:00,315 - aiogram.event - INFO - Update id=762235790 is handled. Duration 909 ms by bot id=7849840849
2025-06-14 11:37:51,202 - aiogram.event - INFO - Update id=762235791 is handled. Duration 460 ms by bot id=7849840849
2025-06-14 11:37:53,384 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-06-14 11:37:53,617 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-06-14 11:37:54,005 - aiogram.event - INFO - Update id=762235792 is handled. Duration 838 ms by bot id=7849840849
2025-06-14 11:40:22,755 - aiogram.dispatcher - INFO - Polling stopped
2025-06-14 11:40:23,022 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-14 11:40:23,024 - root - INFO - Bot stopped
2025-06-14 11:40:40,467 - __main__ - INFO - Starting bot...
2025-06-14 11:40:40,468 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-14 11:40:40,469 - aiogram.dispatcher - INFO - Start polling
2025-06-14 11:40:41,250 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-14 11:41:10,070 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-14 11:41:13,745 - database.mongodb - INFO - Database indexes created successfully
2025-06-14 11:41:13,979 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-14 11:41:14,683 - aiogram.event - INFO - Update id=762235793 is handled. Duration 4613 ms by bot id=7849840849
2025-06-14 11:41:16,748 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-06-14 11:41:16,979 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-06-14 11:41:17,296 - aiogram.event - INFO - Update id=762235794 is handled. Duration 777 ms by bot id=7849840849
2025-06-14 11:41:19,524 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684c113e578dd097dbc0e00c_4
2025-06-14 11:41:19,754 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684c113e578dd097dbc0e00c', '4']
2025-06-14 11:41:19,754 - handlers.user_handlers - INFO - Product ID: 684c113e578dd097dbc0e00c, Flavor Index: 3
2025-06-14 11:41:19,755 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-14 11:41:19,982 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 6}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-14 11:41:19,983 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-14 11:41:19,984 - handlers.user_handlers - INFO - Found product: Fgg
2025-06-14 11:41:19,984 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 6}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]
2025-06-14 11:41:19,985 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Bbdhdh', 'quantity': 6}
2025-06-14 11:41:20,214 - handlers.user_handlers - INFO - User data: {'_id': '682d6a003ffb08259c3526a1', 'user_id': 1088067370, 'username': 'qantemir', 'first_name': 'Qantemir', 'last_name': '-', 'cart': [], 'cart_last_updated': None, 'cart_expires_at': '2025-06-14T11:41:17.727676'}
2025-06-14 11:41:20,445 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Bbdhdh
2025-06-14 11:41:20,446 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684c113e578dd097dbc0e00c, flavor=Bbdhdh, change=-1
2025-06-14 11:41:20,686 - database.mongodb - INFO - Current quantity: 6, Change: -1, New quantity will be: 5
2025-06-14 11:41:20,925 - database.mongodb - INFO - Successfully updated flavor quantity: Bbdhdh, new quantity=5
2025-06-14 11:41:21,166 - database.mongodb - INFO - Verified updated quantity: 5
2025-06-14 11:41:21,167 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684c113e578dd097dbc0e00c', 'name': 'Fgg', 'price': 5000, 'flavor': 'Bbdhdh', 'quantity': 1}
2025-06-14 11:41:21,167 - handlers.user_handlers - INFO - Updating user data
2025-06-14 11:41:21,571 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-14 11:41:21,571 - aiogram.event - INFO - Update id=762235795 is handled. Duration 2048 ms by bot id=7849840849
2025-06-14 11:41:24,186 - aiogram.event - INFO - Update id=762235796 is handled. Duration 628 ms by bot id=7849840849
2025-06-14 11:41:26,030 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-14 11:41:26,259 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 5}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-14 11:41:26,261 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-14 11:41:26,604 - aiogram.event - INFO - Update id=762235797 is handled. Duration 1060 ms by bot id=7849840849
2025-06-14 11:41:34,661 - aiogram.event - INFO - Update id=762235798 is handled. Duration 399 ms by bot id=7849840849
2025-06-14 11:41:37,853 - aiogram.event - INFO - Update id=762235799 is handled. Duration 760 ms by bot id=7849840849
2025-06-14 11:41:45,255 - aiogram.event - INFO - Update id=762235800 is handled. Duration 1434 ms by bot id=7849840849
2025-06-14 11:41:48,105 - aiogram.event - INFO - Update id=762235801 is handled. Duration 350 ms by bot id=7849840849
2025-06-14 11:41:51,995 - handlers.user_handlers - INFO - Processing order cancellation: {'_id': ObjectId('684d19a8b9fea4a58cd40e47'), 'user_id': 1088067370, 'username': 'qantemir', 'phone': '87053411919', 'address': '()!', 'gis_link': 'https://2gis.kz/pavlodarr/search/()!', 'items': [{'product_id': '684c113e578dd097dbc0e00c', 'name': 'Fgg', 'price': 5000, 'flavor': 'Bbdhdh', 'quantity': 1}], 'total_amount': 5000, 'status': 'pending', 'created_at': datetime.datetime(2025, 6, 14, 11, 41, 44, 286000), 'payment_file_id': 'AgACAgIAAxkBAAIK5GhMNtvsnBmPvSVW_vngNctx-xfMAAK79zEb88hhSu4wEWnaNU6TAQADAgADeQADNgQ', 'payment_file_type': 'photo'}
2025-06-14 11:41:51,997 - handlers.user_handlers - INFO - Order items: [{'product_id': '684c113e578dd097dbc0e00c', 'name': 'Fgg', 'price': 5000, 'flavor': 'Bbdhdh', 'quantity': 1}]
2025-06-14 11:41:51,998 - handlers.user_handlers - INFO - Processing item: {'product_id': '684c113e578dd097dbc0e00c', 'name': 'Fgg', 'price': 5000, 'flavor': 'Bbdhdh', 'quantity': 1}
2025-06-14 11:41:51,998 - handlers.user_handlers - INFO - Found flavor in item: Bbdhdh
2025-06-14 11:41:51,999 - handlers.user_handlers - INFO - Product ID: 684c113e578dd097dbc0e00c, Quantity: 1
2025-06-14 11:41:51,999 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-14 11:41:52,236 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 5}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-14 11:41:52,238 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-14 11:41:52,238 - handlers.user_handlers - INFO - Current product state: {'_id': '684c113e578dd097dbc0e00c', 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 5}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-14 11:41:52,239 - handlers.user_handlers - INFO - Current flavor quantity: 5
2025-06-14 11:41:52,240 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684c113e578dd097dbc0e00c, flavor=Bbdhdh, change=1
2025-06-14 11:41:52,472 - database.mongodb - INFO - Current quantity: 5, Change: 1, New quantity will be: 6
2025-06-14 11:41:52,702 - database.mongodb - INFO - Successfully updated flavor quantity: Bbdhdh, new quantity=6
2025-06-14 11:41:52,930 - database.mongodb - INFO - Verified updated quantity: 6
2025-06-14 11:41:52,931 - handlers.user_handlers - INFO - Successfully restored flavor quantity for Bbdhdh
2025-06-14 11:41:52,931 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684c113e578dd097dbc0e00c
2025-06-14 11:41:53,159 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684c113e578dd097dbc0e00c'), 'name': 'Fgg', 'category': '', 'price': 5000, 'description': '_', 'photo': 'AgACAgIAAxkBAAIJFmhMET4-A5uLd1k70ETLZWjeWkZlAAIm9DEbzHZhSi0c3TCFhncSAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Gggg', 'quantity': 5}, {'name': 'Cgg', 'quantity': 1}, {'name': 'Brhrd', 'quantity': 8}, {'name': 'Bbdhdh', 'quantity': 6}, {'name': 'Jrhrhdjd', 'quantity': 0}, {'name': 'Hrjrhdh', 'quantity': 0}, {'name': 'Hdjdhdjd', 'quantity': 0}, {'name': 'Jdjdhfjf', 'quantity': 0}, {'name': 'Rjdjdjdjdj', 'quantity': 0}]}
2025-06-14 11:41:53,161 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684c113e578dd097dbc0e00c
2025-06-14 11:41:53,161 - handlers.user_handlers - INFO - Updated flavor quantity: 6
2025-06-14 11:41:53,843 - aiogram.event - INFO - Update id=762235802 is handled. Duration 2086 ms by bot id=7849840849
2025-06-14 11:41:55,959 - aiogram.event - INFO - Update id=762235803 is handled. Duration 396 ms by bot id=7849840849
2025-06-14 11:41:57,349 - database.mongodb - INFO - [DEBUG] Getting products for category: 
2025-06-14 11:41:57,578 - database.mongodb - INFO - [DEBUG] Found 1 products in category 
2025-06-14 11:41:57,889 - aiogram.event - INFO - Update id=762235804 is handled. Duration 768 ms by bot id=7849840849
2025-06-16 12:59:12,647 - __main__ - INFO - Starting bot...
2025-06-16 12:59:12,648 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-16 12:59:12,648 - aiogram.dispatcher - INFO - Start polling
2025-06-16 12:59:13,270 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 12:59:13,430 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 12:59:13,466 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 12:59:13,468 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 12:59:13,470 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 12:59:13,472 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 12:59:13,473 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 12:59:13,475 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 12:59:13,481 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 12:59:14,110 - aiogram.event - INFO - Update id=762237342 is handled. Duration 642 ms by bot id=7849840849
2025-06-16 12:59:14,120 - aiogram.event - INFO - Update id=762237339 is handled. Duration 690 ms by bot id=7849840849
2025-06-16 12:59:18,067 - handlers.admin_handlers - INFO - Successful admin login for user 531632690
2025-06-16 12:59:18,335 - aiogram.event - INFO - Update id=762237343 is handled. Duration 270 ms by bot id=7849840849
2025-06-16 12:59:18,795 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 12:59:18,821 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 12:59:19,065 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 12:59:19,160 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 12:59:19,251 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 12:59:19,300 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 12:59:19,369 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 12:59:19,478 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 12:59:19,707 - aiogram.event - INFO - Update id=762237340 is handled. Duration 6276 ms by bot id=7849840849
2025-06-16 12:59:19,708 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 12:59:19,753 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 12:59:20,108 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 12:59:20,234 - aiogram.event - INFO - Update id=762237335 is handled. Duration 6806 ms by bot id=7849840849
2025-06-16 12:59:20,306 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 12:59:20,322 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 12:59:20,500 - aiogram.event - INFO - Update id=762237336 is handled. Duration 7072 ms by bot id=7849840849
2025-06-16 12:59:20,523 - aiogram.event - INFO - Update id=762237334 is handled. Duration 7095 ms by bot id=7849840849
2025-06-16 12:59:20,546 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 12:59:20,829 - aiogram.event - INFO - Update id=762237341 is handled. Duration 7363 ms by bot id=7849840849
2025-06-16 12:59:21,237 - aiogram.event - INFO - Update id=762237337 is handled. Duration 7808 ms by bot id=7849840849
2025-06-16 12:59:21,410 - aiogram.event - INFO - Update id=762237338 is handled. Duration 7981 ms by bot id=7849840849
2025-06-16 12:59:22,581 - handlers.admin_handlers - INFO - Admin session active for user 531632690
2025-06-16 12:59:22,790 - aiogram.event - INFO - Update id=762237344 is handled. Duration 213 ms by bot id=7849840849
2025-06-16 12:59:25,024 - aiogram.event - INFO - Update id=762237345 is handled. Duration 402 ms by bot id=7849840849
2025-06-16 12:59:29,357 - aiogram.event - INFO - Update id=762237346 is handled. Duration 186 ms by bot id=7849840849
2025-06-16 12:59:31,007 - aiogram.event - INFO - Update id=762237347 is handled. Duration 716 ms by bot id=7849840849
2025-06-16 12:59:36,479 - aiogram.event - INFO - Update id=762237348 is handled. Duration 688 ms by bot id=7849840849
2025-06-16 12:59:38,624 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 12:59:38,832 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 12:59:39,187 - aiogram.event - INFO - Update id=762237349 is handled. Duration 988 ms by bot id=7849840849
2025-06-16 12:59:40,760 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_1
2025-06-16 12:59:40,968 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '1']
2025-06-16 12:59:40,969 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 0
2025-06-16 12:59:40,969 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 12:59:41,176 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 40}, {'name': 'H', 'quantity': 39}]}
2025-06-16 12:59:41,177 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 12:59:41,177 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 12:59:41,177 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 40}, {'name': 'H', 'quantity': 39}]
2025-06-16 12:59:41,178 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Jf', 'quantity': 40}
2025-06-16 12:59:41,390 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': None}
2025-06-16 12:59:41,600 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Jf
2025-06-16 12:59:41,601 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=Jf, change=-1
2025-06-16 12:59:41,818 - database.mongodb - INFO - Current quantity: 40, Change: -1, New quantity will be: 39
2025-06-16 12:59:42,164 - database.mongodb - INFO - Successfully updated flavor quantity: Jf, new quantity=39
2025-06-16 12:59:42,380 - database.mongodb - INFO - Verified updated quantity: 39
2025-06-16 12:59:42,380 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'Jf', 'quantity': 1}
2025-06-16 12:59:42,381 - handlers.user_handlers - INFO - Updating user data
2025-06-16 12:59:42,785 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 12:59:42,786 - aiogram.event - INFO - Update id=762237350 is handled. Duration 2027 ms by bot id=7849840849
2025-06-16 12:59:46,794 - aiogram.event - INFO - Update id=762237351 is handled. Duration 815 ms by bot id=7849840849
2025-06-16 12:59:48,645 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 12:59:48,856 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 39}, {'name': 'H', 'quantity': 39}]}
2025-06-16 12:59:48,856 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 12:59:49,203 - aiogram.event - INFO - Update id=762237352 is handled. Duration 1175 ms by bot id=7849840849
2025-06-16 12:59:55,682 - aiogram.event - INFO - Update id=762237353 is handled. Duration 592 ms by bot id=7849840849
2025-06-16 12:59:58,539 - aiogram.event - INFO - Update id=762237354 is handled. Duration 918 ms by bot id=7849840849
2025-06-16 13:00:09,266 - aiogram.event - INFO - Update id=762237355 is handled. Duration 1665 ms by bot id=7849840849
2025-06-16 13:00:11,077 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:00:11,286 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 39}, {'name': 'H', 'quantity': 39}]}
2025-06-16 13:00:11,286 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:00:11,553 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:00:11,770 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 39}]}
2025-06-16 13:00:11,771 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:00:12,897 - aiogram.event - INFO - Update id=762237356 is handled. Duration 2038 ms by bot id=7849840849
2025-06-16 13:00:16,848 - handlers.admin_handlers - ERROR - Error showing orders: 'full_name'
2025-06-16 13:00:17,130 - aiogram.event - INFO - Update id=762237357 is handled. Duration 970 ms by bot id=7849840849
2025-06-16 13:00:33,019 - aiogram.event - INFO - Update id=762237358 is handled. Duration 592 ms by bot id=7849840849
2025-06-16 13:00:35,223 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 13:00:35,435 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 13:00:35,809 - aiogram.event - INFO - Update id=762237359 is handled. Duration 1008 ms by bot id=7849840849
2025-06-16 13:00:38,182 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 13:00:38,414 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 13:00:38,415 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 13:00:38,415 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:00:38,630 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 39}]}
2025-06-16 13:00:38,630 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:00:38,631 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 13:00:38,631 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 39}]
2025-06-16 13:00:38,631 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 39}
2025-06-16 13:00:38,902 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T13:09:42.381124'}
2025-06-16 13:00:39,129 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 13:00:39,129 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 13:00:39,336 - database.mongodb - INFO - Current quantity: 39, Change: -1, New quantity will be: 38
2025-06-16 13:00:39,548 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=38
2025-06-16 13:00:39,772 - database.mongodb - INFO - Verified updated quantity: 38
2025-06-16 13:00:39,772 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 13:00:39,773 - handlers.user_handlers - INFO - Updating user data
2025-06-16 13:00:40,233 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 13:00:40,234 - aiogram.event - INFO - Update id=762237360 is handled. Duration 2053 ms by bot id=7849840849
2025-06-16 13:00:42,457 - aiogram.event - INFO - Update id=762237361 is handled. Duration 683 ms by bot id=7849840849
2025-06-16 13:00:43,603 - aiogram.event - INFO - Update id=762237362 is handled. Duration 816 ms by bot id=7849840849
2025-06-16 13:00:45,354 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:00:45,566 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 38}]}
2025-06-16 13:00:45,567 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:00:45,974 - aiogram.event - INFO - Update id=762237363 is handled. Duration 1342 ms by bot id=7849840849
2025-06-16 13:00:53,278 - aiogram.event - INFO - Update id=762237364 is handled. Duration 657 ms by bot id=7849840849
2025-06-16 13:00:55,086 - aiogram.event - INFO - Update id=762237365 is handled. Duration 829 ms by bot id=7849840849
2025-06-16 13:00:59,755 - aiogram.event - INFO - Update id=762237366 is handled. Duration 1606 ms by bot id=7849840849
2025-06-16 13:01:01,341 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:01:01,588 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 38}]}
2025-06-16 13:01:01,588 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:01:01,797 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:01:02,058 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 37}]}
2025-06-16 13:01:02,059 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:01:03,234 - aiogram.event - INFO - Update id=762237367 is handled. Duration 2113 ms by bot id=7849840849
2025-06-16 13:01:05,795 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=15:01
2025-06-16 13:01:06,014 - handlers.admin_handlers - ERROR - Error showing orders: 'full_name'
2025-06-16 13:01:06,192 - aiogram.event - INFO - Update id=762237368 is handled. Duration 1243 ms by bot id=7849840849
2025-06-16 13:01:20,025 - aiogram.event - INFO - Update id=762237369 is handled. Duration 825 ms by bot id=7849840849
2025-06-16 13:02:59,533 - __main__ - INFO - Starting bot...
2025-06-16 13:02:59,534 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-16 13:02:59,534 - aiogram.dispatcher - INFO - Start polling
2025-06-16 13:03:00,150 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 13:03:00,309 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 13:03:00,348 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 13:03:01,065 - aiogram.event - INFO - Update id=762237371 is handled. Duration 756 ms by bot id=7849840849
2025-06-16 13:03:04,120 - aiogram.event - INFO - Update id=762237372 is handled. Duration 238 ms by bot id=7849840849
2025-06-16 13:03:04,507 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 13:03:04,738 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 13:03:05,719 - aiogram.event - INFO - Update id=762237370 is handled. Duration 5412 ms by bot id=7849840849
2025-06-16 13:03:08,657 - handlers.admin_handlers - INFO - Successful admin login for user 531632690
2025-06-16 13:03:08,929 - aiogram.event - INFO - Update id=762237373 is handled. Duration 274 ms by bot id=7849840849
2025-06-16 13:03:10,958 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=15:03
2025-06-16 13:03:11,149 - handlers.admin_handlers - ERROR - Error showing orders: 'full_name'
2025-06-16 13:03:11,339 - aiogram.event - INFO - Update id=762237374 is handled. Duration 1396 ms by bot id=7849840849
2025-06-16 13:05:24,604 - aiogram.dispatcher - WARNING - Received SIGINT signal
2025-06-16 13:05:24,605 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 13:05:24,605 - aiogram.dispatcher - INFO - Polling stopped
2025-06-16 13:06:02,984 - __main__ - INFO - Starting bot...
2025-06-16 13:06:02,985 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-16 13:06:02,985 - aiogram.dispatcher - INFO - Start polling
2025-06-16 13:06:03,865 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 13:06:04,027 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 13:06:04,066 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 13:06:04,605 - aiogram.event - INFO - Update id=762237375 is handled. Duration 580 ms by bot id=7849840849
2025-06-16 13:06:07,906 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 13:06:08,143 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 13:06:09,195 - aiogram.event - INFO - Update id=762237376 is handled. Duration 5169 ms by bot id=7849840849
2025-06-16 13:06:17,758 - aiogram.event - INFO - Update id=762237377 is handled. Duration 224 ms by bot id=7849840849
2025-06-16 13:07:46,715 - handlers.admin_handlers - INFO - Successful admin login for user 531632690
2025-06-16 13:07:46,894 - aiogram.event - INFO - Update id=762237378 is handled. Duration 182 ms by bot id=7849840849
2025-06-16 13:07:48,634 - aiogram.event - INFO - Update id=762237379 is handled. Duration 671 ms by bot id=7849840849
2025-06-16 13:07:53,989 - aiogram.event - INFO - Update id=762237380 is handled. Duration 1017 ms by bot id=7849840849
2025-06-16 13:12:05,316 - aiogram.event - INFO - Update id=762237381 is handled. Duration 587 ms by bot id=7849840849
2025-06-16 13:12:09,252 - aiogram.dispatcher - WARNING - Received SIGINT signal
2025-06-16 13:12:09,253 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 13:12:09,254 - aiogram.dispatcher - INFO - Polling stopped
2025-06-16 13:12:19,143 - __main__ - INFO - Starting bot...
2025-06-16 13:12:19,144 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-16 13:12:19,144 - aiogram.dispatcher - INFO - Start polling
2025-06-16 13:12:19,697 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 13:12:19,850 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 13:12:20,000 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 13:12:20,338 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 13:12:20,545 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 13:12:20,558 - aiogram.event - INFO - Update id=762237382 is handled. Duration 710 ms by bot id=7849840849
2025-06-16 13:12:20,714 - aiogram.event - INFO - Update id=762237383 is handled. Duration 716 ms by bot id=7849840849
2025-06-16 13:12:21,041 - aiogram.event - INFO - Update id=762237384 is handled. Duration 706 ms by bot id=7849840849
2025-06-16 13:12:21,188 - aiogram.event - INFO - Update id=762237385 is handled. Duration 645 ms by bot id=7849840849
2025-06-16 13:12:22,259 - aiogram.event - INFO - Update id=762237386 is handled. Duration 158 ms by bot id=7849840849
2025-06-16 13:12:28,842 - handlers.admin_handlers - INFO - Successful admin login for user 531632690
2025-06-16 13:12:29,041 - aiogram.event - INFO - Update id=762237387 is handled. Duration 201 ms by bot id=7849840849
2025-06-16 13:12:30,869 - handlers.admin_handlers - ERROR - Error showing orders: 'NoneType' object has no attribute 'orders'
2025-06-16 13:12:31,050 - aiogram.event - INFO - Update id=762237388 is handled. Duration 184 ms by bot id=7849840849
2025-06-16 13:13:10,783 - aiogram.dispatcher - WARNING - Received SIGINT signal
2025-06-16 13:13:10,784 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 13:13:10,784 - aiogram.dispatcher - INFO - Polling stopped
2025-06-16 13:14:12,329 - __main__ - INFO - Starting bot...
2025-06-16 13:14:12,330 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-16 13:14:12,330 - aiogram.dispatcher - INFO - Start polling
2025-06-16 13:14:12,930 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 13:14:14,205 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 13:14:14,977 - aiogram.event - INFO - Update id=762237389 is handled. Duration 775 ms by bot id=7849840849
2025-06-16 13:14:16,538 - aiogram.event - INFO - Update id=762237390 is handled. Duration 168 ms by bot id=7849840849
2025-06-16 13:14:20,868 - handlers.admin_handlers - INFO - Successful admin login for user 531632690
2025-06-16 13:14:21,056 - aiogram.event - INFO - Update id=762237391 is handled. Duration 190 ms by bot id=7849840849
2025-06-16 13:14:22,610 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 13:14:26,622 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 13:14:26,885 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 13:14:27,623 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=15:14
2025-06-16 13:14:28,343 - aiogram.event - INFO - Update id=762237392 is handled. Duration 5738 ms by bot id=7849840849
2025-06-16 13:15:01,374 - aiogram.event - INFO - Update id=762237393 is handled. Duration 933 ms by bot id=7849840849
2025-06-16 13:15:34,490 - aiogram.event - INFO - Update id=762237394 is handled. Duration 921 ms by bot id=7849840849
2025-06-16 13:15:45,082 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=Jf, change=1
2025-06-16 13:15:45,342 - database.mongodb - INFO - Current quantity: 38, Change: 1, New quantity will be: 39
2025-06-16 13:15:45,652 - database.mongodb - INFO - Successfully updated flavor quantity: Jf, new quantity=39
2025-06-16 13:15:45,887 - database.mongodb - INFO - Verified updated quantity: 39
2025-06-16 13:15:46,120 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=1
2025-06-16 13:15:46,347 - database.mongodb - INFO - Current quantity: 37, Change: 1, New quantity will be: 38
2025-06-16 13:15:46,577 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=38
2025-06-16 13:15:46,877 - database.mongodb - INFO - Verified updated quantity: 38
2025-06-16 13:15:47,474 - aiogram.event - INFO - Update id=762237395 is handled. Duration 2627 ms by bot id=7849840849
2025-06-16 13:15:51,392 - aiogram.event - INFO - Update id=762237396 is handled. Duration 414 ms by bot id=7849840849
2025-06-16 13:15:55,191 - aiogram.event - INFO - Update id=762237397 is handled. Duration 729 ms by bot id=7849840849
2025-06-16 13:15:58,386 - aiogram.event - INFO - Update id=762237398 is handled. Duration 407 ms by bot id=7849840849
2025-06-16 13:16:01,419 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-06-16 13:16:01,764 - aiogram.event - INFO - Update id=762237399 is handled. Duration 907 ms by bot id=7849840849
2025-06-16 13:16:08,789 - aiogram.event - INFO - Update id=762237400 is handled. Duration 752 ms by bot id=7849840849
2025-06-16 13:16:18,850 - aiogram.event - INFO - Update id=762237401 is handled. Duration 635 ms by bot id=7849840849
2025-06-16 13:45:20,884 - aiogram.event - INFO - Update id=762237402 is handled. Duration 1181 ms by bot id=7849840849
2025-06-16 13:45:28,543 - aiogram.event - INFO - Update id=762237403 is handled. Duration 398 ms by bot id=7849840849
2025-06-16 13:45:31,227 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 13:45:31,473 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 13:45:31,795 - aiogram.event - INFO - Update id=762237404 is handled. Duration 1016 ms by bot id=7849840849
2025-06-16 13:45:33,684 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_1
2025-06-16 13:45:33,908 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '1']
2025-06-16 13:45:33,909 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 0
2025-06-16 13:45:33,909 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:45:34,131 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 39}, {'name': 'H', 'quantity': 38}]}
2025-06-16 13:45:34,131 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:45:34,132 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 13:45:34,132 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 39}, {'name': 'H', 'quantity': 38}]
2025-06-16 13:45:34,132 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Jf', 'quantity': 39}
2025-06-16 13:45:34,354 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T13:10:39.773193'}
2025-06-16 13:45:34,575 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Jf
2025-06-16 13:45:34,576 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=Jf, change=-1
2025-06-16 13:45:34,804 - database.mongodb - INFO - Current quantity: 39, Change: -1, New quantity will be: 38
2025-06-16 13:45:35,051 - database.mongodb - INFO - Successfully updated flavor quantity: Jf, new quantity=38
2025-06-16 13:45:35,280 - database.mongodb - INFO - Verified updated quantity: 38
2025-06-16 13:45:35,281 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'Jf', 'quantity': 1}
2025-06-16 13:45:35,281 - handlers.user_handlers - INFO - Updating user data
2025-06-16 13:45:35,675 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 13:45:35,676 - aiogram.event - INFO - Update id=762237405 is handled. Duration 1993 ms by bot id=7849840849
2025-06-16 13:45:42,412 - aiogram.event - INFO - Update id=762237406 is handled. Duration 902 ms by bot id=7849840849
2025-06-16 13:45:44,579 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:45:44,804 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 38}]}
2025-06-16 13:45:44,804 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:45:45,146 - aiogram.event - INFO - Update id=762237407 is handled. Duration 1279 ms by bot id=7849840849
2025-06-16 13:45:54,326 - aiogram.event - INFO - Update id=762237408 is handled. Duration 742 ms by bot id=7849840849
2025-06-16 13:45:57,177 - aiogram.event - INFO - Update id=762237409 is handled. Duration 1012 ms by bot id=7849840849
2025-06-16 13:46:03,341 - aiogram.event - INFO - Update id=762237410 is handled. Duration 1918 ms by bot id=7849840849
2025-06-16 13:46:05,918 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:46:06,154 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 38}]}
2025-06-16 13:46:06,154 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:46:06,393 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:46:06,625 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 38}]}
2025-06-16 13:46:06,625 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:46:07,591 - aiogram.event - INFO - Update id=762237411 is handled. Duration 1913 ms by bot id=7849840849
2025-06-16 13:46:09,067 - aiogram.event - INFO - Update id=762237412 is handled. Duration 729 ms by bot id=7849840849
2025-06-16 13:46:18,688 - aiogram.dispatcher - WARNING - Received SIGINT signal
2025-06-16 13:46:18,690 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 13:46:18,691 - aiogram.dispatcher - INFO - Polling stopped
2025-06-16 13:46:22,456 - __main__ - INFO - Starting bot...
2025-06-16 13:46:22,457 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-16 13:46:22,457 - aiogram.dispatcher - INFO - Start polling
2025-06-16 13:46:23,144 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 13:46:24,237 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 13:46:24,841 - aiogram.event - INFO - Update id=762237413 is handled. Duration 607 ms by bot id=7849840849
2025-06-16 13:46:25,974 - aiogram.event - INFO - Update id=762237414 is handled. Duration 184 ms by bot id=7849840849
2025-06-16 13:46:30,241 - handlers.admin_handlers - INFO - Successful admin login for user 531632690
2025-06-16 13:46:30,420 - aiogram.event - INFO - Update id=762237415 is handled. Duration 183 ms by bot id=7849840849
2025-06-16 13:46:32,301 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 13:46:36,052 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 13:46:36,284 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 13:46:36,975 - aiogram.event - INFO - Update id=762237416 is handled. Duration 4676 ms by bot id=7849840849
2025-06-16 13:46:42,635 - aiogram.event - INFO - Update id=762237417 is handled. Duration 640 ms by bot id=7849840849
2025-06-16 13:46:44,374 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 13:46:44,604 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 13:46:44,989 - aiogram.event - INFO - Update id=762237418 is handled. Duration 1074 ms by bot id=7849840849
2025-06-16 13:46:46,146 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 13:46:46,373 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 13:46:46,374 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 13:46:46,374 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:46:46,598 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 38}]}
2025-06-16 13:46:46,598 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:46:46,599 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 13:46:46,599 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 38}]
2025-06-16 13:46:46,599 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 38}
2025-06-16 13:46:46,820 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T13:55:35.281758'}
2025-06-16 13:46:47,037 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 13:46:47,038 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 13:46:47,263 - database.mongodb - INFO - Current quantity: 38, Change: -1, New quantity will be: 37
2025-06-16 13:46:47,491 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=37
2025-06-16 13:46:47,714 - database.mongodb - INFO - Verified updated quantity: 37
2025-06-16 13:46:47,714 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 13:46:47,715 - handlers.user_handlers - INFO - Updating user data
2025-06-16 13:46:48,144 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 13:46:48,144 - aiogram.event - INFO - Update id=762237419 is handled. Duration 2000 ms by bot id=7849840849
2025-06-16 13:46:53,370 - aiogram.event - INFO - Update id=762237420 is handled. Duration 945 ms by bot id=7849840849
2025-06-16 13:46:56,121 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:46:56,361 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 37}]}
2025-06-16 13:46:56,361 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:46:56,361 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 13:46:56,669 - database.mongodb - INFO - Current quantity: 37, Change: -1, New quantity will be: 36
2025-06-16 13:46:56,903 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=36
2025-06-16 13:46:57,127 - database.mongodb - INFO - Verified updated quantity: 36
2025-06-16 13:46:57,706 - aiogram.event - INFO - Update id=762237421 is handled. Duration 2037 ms by bot id=7849840849
2025-06-16 13:47:02,883 - aiogram.event - INFO - Update id=762237422 is handled. Duration 774 ms by bot id=7849840849
2025-06-16 13:47:04,657 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:47:04,877 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 36}]}
2025-06-16 13:47:04,878 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:47:05,387 - aiogram.event - INFO - Update id=762237423 is handled. Duration 1497 ms by bot id=7849840849
2025-06-16 13:47:13,684 - aiogram.event - INFO - Update id=762237424 is handled. Duration 630 ms by bot id=7849840849
2025-06-16 13:47:19,439 - aiogram.event - INFO - Update id=762237425 is handled. Duration 620 ms by bot id=7849840849
2025-06-16 13:47:21,300 - aiogram.event - INFO - Update id=762237426 is handled. Duration 849 ms by bot id=7849840849
2025-06-16 13:47:25,448 - aiogram.event - INFO - Update id=762237427 is handled. Duration 1682 ms by bot id=7849840849
2025-06-16 13:47:28,044 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:47:28,270 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 36}]}
2025-06-16 13:47:28,271 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:47:28,516 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:47:28,823 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 34}]}
2025-06-16 13:47:28,824 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:47:29,939 - aiogram.event - INFO - Update id=762237428 is handled. Duration 2138 ms by bot id=7849840849
2025-06-16 13:50:31,645 - aiogram.event - INFO - Update id=762237429 is handled. Duration 167 ms by bot id=7849840849
2025-06-16 13:50:34,371 - aiogram.event - INFO - Update id=762237430 is handled. Duration 881 ms by bot id=7849840849
2025-06-16 13:50:36,302 - aiogram.event - INFO - Update id=762237431 is handled. Duration 696 ms by bot id=7849840849
2025-06-16 13:50:38,163 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 13:50:38,471 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 13:50:38,842 - aiogram.event - INFO - Update id=762237432 is handled. Duration 1187 ms by bot id=7849840849
2025-06-16 13:50:40,011 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 13:50:40,235 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 13:50:40,235 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 13:50:40,235 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:50:40,520 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 34}]}
2025-06-16 13:50:40,520 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:50:40,521 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 13:50:40,521 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 34}]
2025-06-16 13:50:40,521 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 34}
2025-06-16 13:50:40,829 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T13:56:57.127973'}
2025-06-16 13:50:41,134 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 13:50:41,135 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 13:50:41,438 - database.mongodb - INFO - Current quantity: 34, Change: -1, New quantity will be: 33
2025-06-16 13:50:41,747 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=33
2025-06-16 13:50:42,052 - database.mongodb - INFO - Verified updated quantity: 33
2025-06-16 13:50:42,053 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 13:50:42,053 - handlers.user_handlers - INFO - Updating user data
2025-06-16 13:50:42,443 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 13:50:42,444 - aiogram.event - INFO - Update id=762237433 is handled. Duration 2434 ms by bot id=7849840849
2025-06-16 13:51:03,664 - aiogram.event - INFO - Update id=762237434 is handled. Duration 902 ms by bot id=7849840849
2025-06-16 13:51:06,140 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:51:06,447 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 33}]}
2025-06-16 13:51:06,447 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:51:06,769 - aiogram.event - INFO - Update id=762237435 is handled. Duration 1445 ms by bot id=7849840849
2025-06-16 13:51:13,695 - aiogram.event - INFO - Update id=762237436 is handled. Duration 763 ms by bot id=7849840849
2025-06-16 13:51:16,989 - aiogram.event - INFO - Update id=762237437 is handled. Duration 1014 ms by bot id=7849840849
2025-06-16 13:51:21,722 - aiogram.event - INFO - Update id=762237438 is handled. Duration 2057 ms by bot id=7849840849
2025-06-16 13:51:29,639 - aiogram.event - INFO - Update id=762237439 is handled. Duration 1459 ms by bot id=7849840849
2025-06-16 13:51:31,282 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 13:51:31,508 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 13:51:31,831 - aiogram.event - INFO - Update id=762237440 is handled. Duration 1016 ms by bot id=7849840849
2025-06-16 13:51:33,112 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 13:51:33,344 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 13:51:33,345 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 13:51:33,345 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:51:33,591 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 33}]}
2025-06-16 13:51:33,592 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:51:33,592 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 13:51:33,592 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 33}]
2025-06-16 13:51:33,592 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 33}
2025-06-16 13:51:33,814 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T14:00:42.053661'}
2025-06-16 13:51:34,038 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 13:51:34,039 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 13:51:34,262 - database.mongodb - INFO - Current quantity: 33, Change: -1, New quantity will be: 32
2025-06-16 13:51:34,489 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=32
2025-06-16 13:51:34,710 - database.mongodb - INFO - Verified updated quantity: 32
2025-06-16 13:51:34,711 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 13:51:34,711 - handlers.user_handlers - INFO - Updating user data
2025-06-16 13:51:35,095 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 13:51:35,095 - aiogram.event - INFO - Update id=762237441 is handled. Duration 1984 ms by bot id=7849840849
2025-06-16 13:51:42,182 - aiogram.event - INFO - Update id=762237442 is handled. Duration 999 ms by bot id=7849840849
2025-06-16 13:51:44,241 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:51:44,470 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 32}]}
2025-06-16 13:51:44,471 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:51:44,798 - aiogram.event - INFO - Update id=762237443 is handled. Duration 1372 ms by bot id=7849840849
2025-06-16 13:51:52,861 - aiogram.event - INFO - Update id=762237444 is handled. Duration 728 ms by bot id=7849840849
2025-06-16 13:51:55,620 - aiogram.event - INFO - Update id=762237445 is handled. Duration 911 ms by bot id=7849840849
2025-06-16 13:52:01,318 - aiogram.event - INFO - Update id=762237446 is handled. Duration 1917 ms by bot id=7849840849
2025-06-16 13:53:37,222 - aiogram.event - INFO - Update id=762237447 is handled. Duration 642 ms by bot id=7849840849
2025-06-16 13:57:19,179 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:57:19,401 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 32}]}
2025-06-16 13:57:19,402 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:57:19,709 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:57:20,016 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 31}]}
2025-06-16 13:57:20,017 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:57:20,904 - aiogram.event - INFO - Update id=762237448 is handled. Duration 1954 ms by bot id=7849840849
2025-06-16 13:57:23,025 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:57:23,293 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 31}]}
2025-06-16 13:57:23,294 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:57:23,539 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 13:57:23,762 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 30}]}
2025-06-16 13:57:23,763 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 13:57:24,685 - aiogram.event - INFO - Update id=762237449 is handled. Duration 1900 ms by bot id=7849840849
2025-06-16 13:57:28,822 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=15:57
2025-06-16 13:57:30,290 - aiogram.event - INFO - Update id=762237450 is handled. Duration 2258 ms by bot id=7849840849
2025-06-16 13:57:38,364 - aiogram.event - INFO - Update id=762237451 is handled. Duration 1141 ms by bot id=7849840849
2025-06-16 13:58:04,151 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=15:58
2025-06-16 13:58:05,075 - aiogram.event - INFO - Update id=762237452 is handled. Duration 1637 ms by bot id=7849840849
2025-06-16 14:02:01,482 - aiogram.event - INFO - Update id=762237453 is handled. Duration 1392 ms by bot id=7849840849
2025-06-16 14:02:03,641 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=16:02
2025-06-16 14:02:04,564 - aiogram.event - INFO - Update id=762237454 is handled. Duration 1558 ms by bot id=7849840849
2025-06-16 14:02:07,337 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=Jf, change=1
2025-06-16 14:02:07,560 - database.mongodb - INFO - Current quantity: 37, Change: 1, New quantity will be: 38
2025-06-16 14:02:07,785 - database.mongodb - INFO - Successfully updated flavor quantity: Jf, new quantity=38
2025-06-16 14:02:08,010 - database.mongodb - INFO - Verified updated quantity: 38
2025-06-16 14:02:08,235 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=2
2025-06-16 14:02:08,459 - database.mongodb - INFO - Current quantity: 30, Change: 2, New quantity will be: 32
2025-06-16 14:02:08,684 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=32
2025-06-16 14:02:08,911 - database.mongodb - INFO - Verified updated quantity: 32
2025-06-16 14:02:09,136 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=1
2025-06-16 14:02:09,359 - database.mongodb - INFO - Current quantity: 32, Change: 1, New quantity will be: 33
2025-06-16 14:02:09,598 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=33
2025-06-16 14:02:09,843 - database.mongodb - INFO - Verified updated quantity: 33
2025-06-16 14:02:10,119 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=1
2025-06-16 14:02:10,427 - database.mongodb - INFO - Current quantity: 33, Change: 1, New quantity will be: 34
2025-06-16 14:02:10,733 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=34
2025-06-16 14:02:10,956 - database.mongodb - INFO - Verified updated quantity: 34
2025-06-16 14:02:11,540 - aiogram.event - INFO - Update id=762237455 is handled. Duration 4431 ms by bot id=7849840849
2025-06-16 14:02:13,191 - aiogram.event - INFO - Update id=762237456 is handled. Duration 497 ms by bot id=7849840849
2025-06-16 14:02:17,514 - aiogram.event - INFO - Update id=762237457 is handled. Duration 428 ms by bot id=7849840849
2025-06-16 14:02:19,131 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-06-16 14:02:20,042 - aiogram.event - INFO - Update id=762237458 is handled. Duration 1468 ms by bot id=7849840849
2025-06-16 14:02:22,124 - aiogram.event - INFO - Update id=762237459 is handled. Duration 641 ms by bot id=7849840849
2025-06-16 14:02:23,834 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 14:02:24,059 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 14:02:24,395 - aiogram.event - INFO - Update id=762237460 is handled. Duration 1011 ms by bot id=7849840849
2025-06-16 14:02:39,524 - aiogram.dispatcher - WARNING - Received SIGINT signal
2025-06-16 14:02:39,524 - aiogram.dispatcher - INFO - Polling stopped for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 14:02:39,525 - aiogram.dispatcher - INFO - Polling stopped
2025-06-16 14:02:43,327 - __main__ - INFO - Starting bot...
2025-06-16 14:02:43,328 - database.mongodb - ERROR - Failed to get users with cart: 'NoneType' object has no attribute 'users'
2025-06-16 14:02:43,328 - aiogram.dispatcher - INFO - Start polling
2025-06-16 14:02:47,805 - aiogram.dispatcher - INFO - Run polling for bot @teeeeeest_hoooook_bot id=7849840849 - 'Test_bot'
2025-06-16 14:02:52,980 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 14:02:55,744 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 14:02:55,744 - database.mongodb - INFO - Attempting to connect to MongoDB at mongodb+srv://mksimantipev228:CHD5QbOKaUwhZXj1@shopbot.ozvfezb.mongodb.net/?retryWrites=true&w=majority&appName=ShopBot
2025-06-16 14:02:58,765 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 14:02:58,806 - database.mongodb - INFO - Database indexes created successfully
2025-06-16 14:02:58,996 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 14:02:59,015 - database.mongodb - INFO - Successfully connected to MongoDB database: vapeshop_db
2025-06-16 14:02:59,224 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 14:02:59,225 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 14:02:59,225 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:02:59,455 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 34}]}
2025-06-16 14:02:59,456 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:02:59,456 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 14:02:59,456 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 34}]
2025-06-16 14:02:59,456 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 34}
2025-06-16 14:02:59,686 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T14:01:34.711559'}
2025-06-16 14:02:59,912 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 14:02:59,912 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 14:03:00,139 - database.mongodb - INFO - Current quantity: 34, Change: -1, New quantity will be: 33
2025-06-16 14:03:00,367 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=33
2025-06-16 14:03:00,593 - database.mongodb - INFO - Verified updated quantity: 33
2025-06-16 14:03:00,593 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 14:03:00,593 - handlers.user_handlers - INFO - Updating user data
2025-06-16 14:03:01,505 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 14:03:01,506 - aiogram.event - INFO - Update id=762237462 is handled. Duration 5762 ms by bot id=7849840849
2025-06-16 14:03:01,631 - aiogram.event - INFO - Update id=762237461 is handled. Duration 8652 ms by bot id=7849840849
2025-06-16 14:03:04,404 - aiogram.event - INFO - Update id=762237463 is handled. Duration 1020 ms by bot id=7849840849
2025-06-16 14:03:06,276 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:03:06,506 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 33}]}
2025-06-16 14:03:06,507 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:03:06,851 - aiogram.event - INFO - Update id=762237464 is handled. Duration 1264 ms by bot id=7849840849
2025-06-16 14:03:13,877 - aiogram.event - INFO - Update id=762237465 is handled. Duration 757 ms by bot id=7849840849
2025-06-16 14:03:19,935 - aiogram.event - INFO - Update id=762237466 is handled. Duration 867 ms by bot id=7849840849
2025-06-16 14:03:26,793 - aiogram.event - INFO - Update id=762237467 is handled. Duration 2797 ms by bot id=7849840849
2025-06-16 14:03:30,051 - aiogram.event - INFO - Update id=762237468 is handled. Duration 656 ms by bot id=7849840849
2025-06-16 14:03:33,263 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 14:03:33,492 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 14:03:34,810 - aiogram.event - INFO - Update id=762237469 is handled. Duration 2006 ms by bot id=7849840849
2025-06-16 14:03:35,350 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 14:03:35,584 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 14:03:35,587 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 14:03:35,588 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:03:35,819 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 33}]}
2025-06-16 14:03:35,819 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:03:35,819 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 14:03:35,819 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 33}]
2025-06-16 14:03:35,819 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 33}
2025-06-16 14:03:36,046 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T14:13:00.593691'}
2025-06-16 14:03:36,272 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 14:03:36,272 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 14:03:36,501 - database.mongodb - INFO - Current quantity: 33, Change: -1, New quantity will be: 32
2025-06-16 14:03:36,732 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=32
2025-06-16 14:03:36,963 - database.mongodb - INFO - Verified updated quantity: 32
2025-06-16 14:03:36,963 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 14:03:36,963 - handlers.user_handlers - INFO - Updating user data
2025-06-16 14:03:38,586 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 14:03:38,586 - aiogram.event - INFO - Update id=762237470 is handled. Duration 3237 ms by bot id=7849840849
2025-06-16 14:03:41,147 - aiogram.event - INFO - Update id=762237471 is handled. Duration 1482 ms by bot id=7849840849
2025-06-16 14:03:42,585 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:03:42,825 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 32}]}
2025-06-16 14:03:42,826 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:03:43,546 - aiogram.event - INFO - Update id=762237472 is handled. Duration 1669 ms by bot id=7849840849
2025-06-16 14:03:52,011 - aiogram.event - INFO - Update id=762237474 is handled. Duration 1433 ms by bot id=7849840849
2025-06-16 14:03:53,602 - handlers.user_handlers - ERROR - Error in process_phone: 'NoneType' object has no attribute 'strip'
2025-06-16 14:03:53,833 - aiogram.event - INFO - Update id=762237475 is handled. Duration 696 ms by bot id=7849840849
2025-06-16 14:03:59,686 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:03:59,913 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 32}]}
2025-06-16 14:03:59,913 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:04:00,143 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:04:00,382 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 31}]}
2025-06-16 14:04:00,382 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:04:00,575 - aiogram.event - INFO - Update id=762237473 is handled. Duration 12086 ms by bot id=7849840849
2025-06-16 14:04:04,604 - aiogram.event - INFO - Update id=762237476 is handled. Duration 5156 ms by bot id=7849840849
2025-06-16 14:04:06,643 - handlers.admin_handlers - WARNING - Admin access denied for user 531632690
2025-06-16 14:04:06,815 - aiogram.event - INFO - Update id=762237477 is handled. Duration 174 ms by bot id=7849840849
2025-06-16 14:04:09,557 - aiogram.event - INFO - Update id=762237478 is handled. Duration 546 ms by bot id=7849840849
2025-06-16 14:04:17,717 - handlers.admin_handlers - INFO - Successful admin login for user 531632690
2025-06-16 14:04:18,235 - aiogram.event - INFO - Update id=762237479 is handled. Duration 521 ms by bot id=7849840849
2025-06-16 14:04:23,738 - aiogram.event - INFO - Update id=762237480 is handled. Duration 1167 ms by bot id=7849840849
2025-06-16 14:04:43,805 - aiogram.event - INFO - Update id=762237481 is handled. Duration 1159 ms by bot id=7849840849
2025-06-16 14:04:45,147 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 14:04:45,462 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 14:04:45,809 - aiogram.event - INFO - Update id=762237482 is handled. Duration 1162 ms by bot id=7849840849
2025-06-16 14:04:52,537 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 14:04:52,766 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 14:04:52,766 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 14:04:52,766 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:04:53,038 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 31}]}
2025-06-16 14:04:53,039 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:04:53,039 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 14:04:53,039 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 31}]
2025-06-16 14:04:53,039 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 31}
2025-06-16 14:04:53,284 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [{'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}], 'cart_expires_at': '2025-06-16T14:13:36.963680'}
2025-06-16 14:04:53,511 - handlers.user_handlers - INFO - Flavor already in cart
2025-06-16 14:04:54,068 - aiogram.event - INFO - Update id=762237483 is handled. Duration 1532 ms by bot id=7849840849
2025-06-16 14:04:57,453 - aiogram.event - INFO - Update id=762237484 is handled. Duration 931 ms by bot id=7849840849
2025-06-16 14:04:59,464 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:04:59,693 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 31}]}
2025-06-16 14:04:59,693 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:05:00,520 - aiogram.event - INFO - Update id=762237485 is handled. Duration 1744 ms by bot id=7849840849
2025-06-16 14:05:07,055 - aiogram.event - INFO - Update id=762237486 is handled. Duration 678 ms by bot id=7849840849
2025-06-16 14:05:10,704 - aiogram.event - INFO - Update id=762237487 is handled. Duration 1165 ms by bot id=7849840849
2025-06-16 14:05:17,491 - aiogram.event - INFO - Update id=762237488 is handled. Duration 2022 ms by bot id=7849840849
2025-06-16 14:05:23,568 - aiogram.event - INFO - Update id=762237489 is handled. Duration 818 ms by bot id=7849840849
2025-06-16 14:05:53,413 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:05:53,643 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 31}]}
2025-06-16 14:05:53,644 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:05:53,876 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:05:54,105 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 30}]}
2025-06-16 14:05:54,105 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:05:55,115 - aiogram.event - INFO - Update id=762237490 is handled. Duration 1943 ms by bot id=7849840849
2025-06-16 14:06:01,444 - aiogram.event - INFO - Update id=762237491 is handled. Duration 2865 ms by bot id=7849840849
2025-06-16 14:07:44,869 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=16:07
2025-06-16 14:07:45,267 - aiogram.event - INFO - Update id=762237492 is handled. Duration 1108 ms by bot id=7849840849
2025-06-16 14:07:54,666 - aiogram.event - INFO - Update id=762237493 is handled. Duration 493 ms by bot id=7849840849
2025-06-16 14:07:56,315 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-06-16 14:07:56,876 - aiogram.event - INFO - Update id=762237494 is handled. Duration 1050 ms by bot id=7849840849
2025-06-16 14:08:02,482 - aiogram.event - INFO - Update id=762237495 is handled. Duration 3164 ms by bot id=7849840849
2025-06-16 14:08:04,735 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=16:08
2025-06-16 14:08:05,230 - aiogram.event - INFO - Update id=762237496 is handled. Duration 1312 ms by bot id=7849840849
2025-06-16 14:08:24,672 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=1
2025-06-16 14:08:24,896 - database.mongodb - INFO - Current quantity: 30, Change: 1, New quantity will be: 31
2025-06-16 14:08:25,128 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=31
2025-06-16 14:08:25,359 - database.mongodb - INFO - Verified updated quantity: 31
2025-06-16 14:08:25,600 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=1
2025-06-16 14:08:25,833 - database.mongodb - INFO - Current quantity: 31, Change: 1, New quantity will be: 32
2025-06-16 14:08:26,064 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=32
2025-06-16 14:08:26,294 - database.mongodb - INFO - Verified updated quantity: 32
2025-06-16 14:08:27,223 - aiogram.event - INFO - Update id=762237497 is handled. Duration 2784 ms by bot id=7849840849
2025-06-16 14:08:30,296 - aiogram.event - INFO - Update id=762237498 is handled. Duration 457 ms by bot id=7849840849
2025-06-16 14:08:36,579 - aiogram.event - INFO - Update id=762237499 is handled. Duration 650 ms by bot id=7849840849
2025-06-16 14:08:39,373 - aiogram.event - INFO - Update id=762237500 is handled. Duration 495 ms by bot id=7849840849
2025-06-16 14:08:42,177 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-06-16 14:08:42,727 - aiogram.event - INFO - Update id=762237501 is handled. Duration 1021 ms by bot id=7849840849
2025-06-16 14:08:45,082 - aiogram.event - INFO - Update id=762237502 is handled. Duration 919 ms by bot id=7849840849
2025-06-16 14:08:47,743 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 14:08:48,050 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 14:08:48,386 - aiogram.event - INFO - Update id=762237503 is handled. Duration 1150 ms by bot id=7849840849
2025-06-16 14:08:54,595 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_1
2025-06-16 14:08:54,912 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '1']
2025-06-16 14:08:54,912 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 0
2025-06-16 14:08:54,912 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:08:55,138 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 32}]}
2025-06-16 14:08:55,139 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:08:55,139 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 14:08:55,139 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 38}, {'name': 'H', 'quantity': 32}]
2025-06-16 14:08:55,139 - handlers.user_handlers - INFO - Selected flavor: {'name': 'Jf', 'quantity': 38}
2025-06-16 14:08:55,423 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T14:13:36.963680'}
2025-06-16 14:08:55,730 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: Jf
2025-06-16 14:08:55,730 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=Jf, change=-1
2025-06-16 14:08:56,038 - database.mongodb - INFO - Current quantity: 38, Change: -1, New quantity will be: 37
2025-06-16 14:08:56,345 - database.mongodb - INFO - Successfully updated flavor quantity: Jf, new quantity=37
2025-06-16 14:08:56,652 - database.mongodb - INFO - Verified updated quantity: 37
2025-06-16 14:08:56,652 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'Jf', 'quantity': 1}
2025-06-16 14:08:56,653 - handlers.user_handlers - INFO - Updating user data
2025-06-16 14:08:57,052 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 14:08:57,053 - aiogram.event - INFO - Update id=762237504 is handled. Duration 2458 ms by bot id=7849840849
2025-06-16 14:09:00,488 - aiogram.event - INFO - Update id=762237505 is handled. Duration 946 ms by bot id=7849840849
2025-06-16 14:09:02,592 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:09:02,899 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 32}]}
2025-06-16 14:09:02,900 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:09:03,365 - aiogram.event - INFO - Update id=762237506 is handled. Duration 1589 ms by bot id=7849840849
2025-06-16 14:09:13,244 - aiogram.event - INFO - Update id=762237507 is handled. Duration 806 ms by bot id=7849840849
2025-06-16 14:09:18,043 - aiogram.event - INFO - Update id=762237508 is handled. Duration 1746 ms by bot id=7849840849
2025-06-16 14:09:21,695 - aiogram.event - INFO - Update id=762237509 is handled. Duration 1897 ms by bot id=7849840849
2025-06-16 14:09:40,974 - aiogram.event - INFO - Update id=762237510 is handled. Duration 593 ms by bot id=7849840849
2025-06-16 14:10:03,147 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:10:03,365 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 32}]}
2025-06-16 14:10:03,366 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:10:03,606 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:10:03,931 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 36}, {'name': 'H', 'quantity': 32}]}
2025-06-16 14:10:03,931 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:10:05,299 - aiogram.event - INFO - Update id=762237511 is handled. Duration 2389 ms by bot id=7849840849
2025-06-16 14:10:09,321 - aiogram.event - INFO - Update id=762237512 is handled. Duration 636 ms by bot id=7849840849
2025-06-16 14:10:17,067 - aiogram.event - INFO - Update id=762237513 is handled. Duration 846 ms by bot id=7849840849
2025-06-16 14:10:19,805 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 14:10:20,110 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 14:10:20,466 - aiogram.event - INFO - Update id=762237514 is handled. Duration 1177 ms by bot id=7849840849
2025-06-16 14:10:23,095 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 14:10:23,327 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 14:10:23,328 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 14:10:23,328 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:10:23,557 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 36}, {'name': 'H', 'quantity': 32}]}
2025-06-16 14:10:23,557 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:10:23,557 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 14:10:23,558 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 36}, {'name': 'H', 'quantity': 32}]
2025-06-16 14:10:23,558 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 32}
2025-06-16 14:10:23,795 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T14:18:56.653056'}
2025-06-16 14:10:24,106 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 14:10:24,106 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 14:10:24,334 - database.mongodb - INFO - Current quantity: 32, Change: -1, New quantity will be: 31
2025-06-16 14:10:24,565 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=31
2025-06-16 14:10:24,810 - database.mongodb - INFO - Verified updated quantity: 31
2025-06-16 14:10:24,810 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 14:10:24,810 - handlers.user_handlers - INFO - Updating user data
2025-06-16 14:10:25,219 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 14:10:25,220 - aiogram.event - INFO - Update id=762237515 is handled. Duration 2125 ms by bot id=7849840849
2025-06-16 14:10:27,977 - aiogram.event - INFO - Update id=762237516 is handled. Duration 895 ms by bot id=7849840849
2025-06-16 14:10:30,188 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:10:30,422 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 36}, {'name': 'H', 'quantity': 31}]}
2025-06-16 14:10:30,422 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:10:30,742 - aiogram.event - INFO - Update id=762237517 is handled. Duration 1343 ms by bot id=7849840849
2025-06-16 14:10:38,097 - aiogram.event - INFO - Update id=762237518 is handled. Duration 655 ms by bot id=7849840849
2025-06-16 14:10:40,470 - aiogram.event - INFO - Update id=762237519 is handled. Duration 1019 ms by bot id=7849840849
2025-06-16 14:10:43,300 - aiogram.event - INFO - Update id=762237520 is handled. Duration 1988 ms by bot id=7849840849
2025-06-16 14:10:47,708 - aiogram.event - INFO - Update id=762237521 is handled. Duration 1720 ms by bot id=7849840849
2025-06-16 14:10:50,066 - aiogram.event - INFO - Update id=762237522 is handled. Duration 669 ms by bot id=7849840849
2025-06-16 14:11:01,495 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:11:01,787 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 36}, {'name': 'H', 'quantity': 31}]}
2025-06-16 14:11:01,787 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:11:02,036 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:11:02,299 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 36}, {'name': 'H', 'quantity': 30}]}
2025-06-16 14:11:02,299 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:11:03,282 - aiogram.event - INFO - Update id=762237523 is handled. Duration 2023 ms by bot id=7849840849
2025-06-16 14:11:07,830 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=16:11
2025-06-16 14:11:08,853 - aiogram.event - INFO - Update id=762237524 is handled. Duration 1792 ms by bot id=7849840849
2025-06-16 14:12:17,837 - aiogram.event - INFO - Update id=762237525 is handled. Duration 782 ms by bot id=7849840849
2025-06-16 14:12:20,436 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=Jf, change=1
2025-06-16 14:12:20,738 - database.mongodb - INFO - Current quantity: 36, Change: 1, New quantity will be: 37
2025-06-16 14:12:21,045 - database.mongodb - INFO - Successfully updated flavor quantity: Jf, new quantity=37
2025-06-16 14:12:21,271 - database.mongodb - INFO - Verified updated quantity: 37
2025-06-16 14:12:21,505 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=1
2025-06-16 14:12:21,762 - database.mongodb - INFO - Current quantity: 30, Change: 1, New quantity will be: 31
2025-06-16 14:12:22,068 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=31
2025-06-16 14:12:22,377 - database.mongodb - INFO - Verified updated quantity: 31
2025-06-16 14:12:24,827 - aiogram.event - INFO - Update id=762237526 is handled. Duration 4628 ms by bot id=7849840849
2025-06-16 14:12:29,248 - aiogram.event - INFO - Update id=762237527 is handled. Duration 416 ms by bot id=7849840849
2025-06-16 14:12:33,161 - aiogram.event - INFO - Update id=762237528 is handled. Duration 848 ms by bot id=7849840849
2025-06-16 14:12:36,008 - aiogram.event - INFO - Update id=762237529 is handled. Duration 419 ms by bot id=7849840849
2025-06-16 14:12:37,695 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-06-16 14:12:38,061 - aiogram.event - INFO - Update id=762237530 is handled. Duration 832 ms by bot id=7849840849
2025-06-16 14:12:40,758 - aiogram.event - INFO - Update id=762237531 is handled. Duration 1224 ms by bot id=7849840849
2025-06-16 14:12:44,393 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 14:12:44,700 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 14:12:45,973 - aiogram.event - INFO - Update id=762237532 is handled. Duration 2112 ms by bot id=7849840849
2025-06-16 14:12:46,424 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 14:12:46,656 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 14:12:46,656 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 14:12:46,656 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:12:46,954 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 31}]}
2025-06-16 14:12:46,955 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:12:46,955 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 14:12:46,955 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 31}]
2025-06-16 14:12:46,955 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 31}
2025-06-16 14:12:47,188 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T14:20:24.810475'}
2025-06-16 14:12:47,415 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 14:12:47,416 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 14:12:47,641 - database.mongodb - INFO - Current quantity: 31, Change: -1, New quantity will be: 30
2025-06-16 14:12:47,977 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=30
2025-06-16 14:12:48,212 - database.mongodb - INFO - Verified updated quantity: 30
2025-06-16 14:12:48,212 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 14:12:48,213 - handlers.user_handlers - INFO - Updating user data
2025-06-16 14:12:48,606 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 14:12:48,607 - aiogram.event - INFO - Update id=762237533 is handled. Duration 2183 ms by bot id=7849840849
2025-06-16 14:12:51,724 - aiogram.event - INFO - Update id=762237534 is handled. Duration 867 ms by bot id=7849840849
2025-06-16 14:12:53,608 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:12:53,915 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 30}]}
2025-06-16 14:12:53,915 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:12:54,811 - aiogram.event - INFO - Update id=762237535 is handled. Duration 1906 ms by bot id=7849840849
2025-06-16 14:13:02,631 - aiogram.event - INFO - Update id=762237536 is handled. Duration 724 ms by bot id=7849840849
2025-06-16 14:13:05,151 - aiogram.event - INFO - Update id=762237537 is handled. Duration 992 ms by bot id=7849840849
2025-06-16 14:13:11,371 - aiogram.event - INFO - Update id=762237538 is handled. Duration 1988 ms by bot id=7849840849
2025-06-16 14:13:18,303 - aiogram.event - INFO - Update id=762237539 is handled. Duration 627 ms by bot id=7849840849
2025-06-16 14:13:20,166 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 14:13:20,438 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 14:13:21,017 - aiogram.event - INFO - Update id=762237540 is handled. Duration 1395 ms by bot id=7849840849
2025-06-16 14:13:22,183 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 14:13:22,409 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 14:13:22,410 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 14:13:22,410 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:13:22,691 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 30}]}
2025-06-16 14:13:22,691 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:13:22,692 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 14:13:22,692 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 30}]
2025-06-16 14:13:22,692 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 30}
2025-06-16 14:13:22,995 - handlers.user_handlers - INFO - User data: {'_id': '684fc6c31a16d73950655727', 'user_id': 7737565280, 'username': None, 'cart': [], 'cart_expires_at': '2025-06-16T14:22:48.213031'}
2025-06-16 14:13:23,219 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 14:13:23,219 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 14:13:23,460 - database.mongodb - INFO - Current quantity: 30, Change: -1, New quantity will be: 29
2025-06-16 14:13:23,689 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=29
2025-06-16 14:13:23,919 - database.mongodb - INFO - Verified updated quantity: 29
2025-06-16 14:13:23,919 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 14:13:23,920 - handlers.user_handlers - INFO - Updating user data
2025-06-16 14:13:24,312 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 14:13:24,313 - aiogram.event - INFO - Update id=762237541 is handled. Duration 2131 ms by bot id=7849840849
2025-06-16 14:13:30,861 - aiogram.event - INFO - Update id=762237542 is handled. Duration 880 ms by bot id=7849840849
2025-06-16 14:13:32,236 - aiogram.event - INFO - Update id=762237543 is handled. Duration 1045 ms by bot id=7849840849
2025-06-16 14:13:33,521 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:13:33,853 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 29}]}
2025-06-16 14:13:33,853 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:13:34,185 - aiogram.event - INFO - Update id=762237544 is handled. Duration 1353 ms by bot id=7849840849
2025-06-16 14:13:34,857 - aiogram.event - INFO - Update id=762237545 is handled. Duration 733 ms by bot id=7849840849
2025-06-16 14:13:36,530 - database.mongodb - INFO - [DEBUG] Getting products for category: Одноразовые устройства
2025-06-16 14:13:36,823 - database.mongodb - INFO - [DEBUG] Found 1 products in category Одноразовые устройства
2025-06-16 14:13:37,334 - aiogram.event - INFO - Update id=762237546 is handled. Duration 1274 ms by bot id=7849840849
2025-06-16 14:13:38,873 - handlers.user_handlers - INFO - Starting select_flavor handler with callback data: sf_684f296f80e47ed522bb0aa5_2
2025-06-16 14:13:39,110 - handlers.user_handlers - INFO - Parsed callback data: ['sf', '684f296f80e47ed522bb0aa5', '2']
2025-06-16 14:13:39,111 - handlers.user_handlers - INFO - Product ID: 684f296f80e47ed522bb0aa5, Flavor Index: 1
2025-06-16 14:13:39,111 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:13:39,337 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 29}]}
2025-06-16 14:13:39,337 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:13:39,337 - handlers.user_handlers - INFO - Found product: Gh
2025-06-16 14:13:39,337 - handlers.user_handlers - INFO - Product flavors: [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 29}]
2025-06-16 14:13:39,338 - handlers.user_handlers - INFO - Selected flavor: {'name': 'H', 'quantity': 29}
2025-06-16 14:13:39,567 - handlers.user_handlers - INFO - User data: {'_id': '684ee2075301bc63dc01723a', 'user_id': 1088067370, 'username': 'qantemir', 'cart': [], 'cart_expires_at': None}
2025-06-16 14:13:39,894 - handlers.user_handlers - INFO - Attempting to deduct flavor quantity: H
2025-06-16 14:13:39,895 - database.mongodb - INFO - Attempting to update flavor quantity: product_id=684f296f80e47ed522bb0aa5, flavor=H, change=-1
2025-06-16 14:13:40,201 - database.mongodb - INFO - Current quantity: 29, Change: -1, New quantity will be: 28
2025-06-16 14:13:40,510 - database.mongodb - INFO - Successfully updated flavor quantity: H, new quantity=28
2025-06-16 14:13:40,816 - database.mongodb - INFO - Verified updated quantity: 28
2025-06-16 14:13:40,817 - handlers.user_handlers - INFO - Adding to cart: {'product_id': '684f296f80e47ed522bb0aa5', 'name': 'Gh', 'price': 5, 'flavor': 'H', 'quantity': 1}
2025-06-16 14:13:40,817 - handlers.user_handlers - INFO - Updating user data
2025-06-16 14:13:41,215 - handlers.user_handlers - INFO - Successfully added item to cart
2025-06-16 14:13:41,215 - aiogram.event - INFO - Update id=762237547 is handled. Duration 2344 ms by bot id=7849840849
2025-06-16 14:13:41,514 - aiogram.event - INFO - Update id=762237548 is handled. Duration 637 ms by bot id=7849840849
2025-06-16 14:13:48,414 - database.mongodb - INFO - [DEBUG] Getting products for category: Жидкости
2025-06-16 14:13:48,626 - database.mongodb - INFO - [DEBUG] Found 1 products in category Жидкости
2025-06-16 14:13:49,116 - aiogram.event - INFO - Update id=762237549 is handled. Duration 1115 ms by bot id=7849840849
2025-06-16 14:13:52,800 - aiogram.event - INFO - Update id=762237550 is handled. Duration 1433 ms by bot id=7849840849
2025-06-16 14:13:57,136 - database.mongodb - INFO - [DEBUG] Attempting to get product with ID: 684f296f80e47ed522bb0aa5
2025-06-16 14:13:57,346 - database.mongodb - INFO - [DEBUG] Found product in database: {'_id': ObjectId('684f296f80e47ed522bb0aa5'), 'name': 'Gh', 'category': 'Одноразовые устройства', 'price': 5, 'description': '-', 'photo': 'AgACAgIAAxkBAAIReWhPJueYa1YlMkQ8N2TzvEX68uT5AAJW-DEbPpZ4SgfwzBAOt2qXAQADAgADeQADNgQ', 'available': True, 'flavors': [{'name': 'Jf', 'quantity': 37}, {'name': 'H', 'quantity': 28}]}
2025-06-16 14:13:57,347 - database.mongodb - INFO - [DEBUG] Converted product ID to string: 684f296f80e47ed522bb0aa5
2025-06-16 14:13:57,948 - aiogram.event - INFO - Update id=762237551 is handled. Duration 1463 ms by bot id=7849840849
2025-06-16 14:14:01,625 - aiogram.event - INFO - Update id=762237552 is handled. Duration 1004 ms by bot id=7849840849
2025-06-16 14:14:05,080 - aiogram.event - INFO - Update id=762237553 is handled. Duration 609 ms by bot id=7849840849
2025-06-16 14:14:08,540 - aiogram.event - INFO - Update id=762237554 is handled. Duration 903 ms by bot id=7849840849
2025-06-16 14:14:13,826 - aiogram.event - INFO - Update id=762237555 is handled. Duration 1681 ms by bot id=7849840849
2025-06-16 14:14:32,186 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=16:14
2025-06-16 14:14:32,772 - aiogram.event - INFO - Update id=762237556 is handled. Duration 1217 ms by bot id=7849840849
2025-06-16 14:15:31,452 - aiogram.event - INFO - Update id=762237561 is handled. Duration 876 ms by bot id=7849840849
2025-06-16 14:15:31,477 - aiogram.event - INFO - Update id=762237557 is handled. Duration 1066 ms by bot id=7849840849
2025-06-16 14:15:31,638 - aiogram.event - INFO - Update id=762237560 is handled. Duration 1220 ms by bot id=7849840849
2025-06-16 14:15:32,788 - aiogram.event - INFO - Update id=762237559 is handled. Duration 2376 ms by bot id=7849840849
2025-06-16 14:15:32,879 - aiogram.event - INFO - Update id=762237558 is handled. Duration 2468 ms by bot id=7849840849
2025-06-16 14:15:41,719 - aiogram.event - INFO - Update id=762237562 is handled. Duration 422 ms by bot id=7849840849
2025-06-16 14:15:43,449 - database.mongodb - INFO - Sleep mode updated: enabled=False, end_time=None
2025-06-16 14:15:43,879 - aiogram.event - INFO - Update id=762237563 is handled. Duration 941 ms by bot id=7849840849
2025-06-16 14:15:45,681 - aiogram.event - INFO - Update id=762237564 is handled. Duration 694 ms by bot id=7849840849
2025-06-16 14:15:50,000 - database.mongodb - INFO - Sleep mode updated: enabled=True, end_time=16:15
2025-06-16 14:15:50,556 - aiogram.event - INFO - Update id=762237565 is handled. Duration 2305 ms by bot id=7849840849
2025-06-16 14:15:51,314 - aiogram.event - INFO - Update id=762237566 is handled. Duration 1046 ms by bot id=7849840849
2025-06-16 14:15:53,794 - aiogram.event - INFO - Update id=762237567 is handled. Duration 558 ms by bot id=7849840849
2025-06-16 14:17:45,824 - aiogram.event - INFO - Update id=762237568 is handled. Duration 184 ms by bot id=7849840849
2025-06-16 14:17:47,739 - aiogram.event - INFO - Update id=762237569 is handled. Duration 647 ms by bot id=7849840849
